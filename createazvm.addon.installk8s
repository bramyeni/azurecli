# $Id: createazvm.addon.installk8s 460 2022-07-17 05:05:47Z bpahlawa $
# initially created by Bram Pahlawanto 25-June-2020
# This is the list of parameters to deploy VM and SQL BDC fully automated
# $Author: bpahlawa $
# Modified by: bpahlawa
# $Date: 2022-07-17 13:05:47 +0800 (Sun, 17 Jul 2022) $
# $Revision: 460 $

#========configuration section========================

export K8SMASTER=lk8smaster
export K8SNODE=lk8snode
export NOOFWORKERS=2
export SCRIPT2RUN="setup-k8sfull.sh"
export DEBUG=""

#=====================================================

export THEUSER=root
export FULLVMNAME
export KUBEADM_JOIN_CMD=""
export NOOFCGROUP=""

creating_disk()
{
[[ "$DEBUG" = "1" ]] && echo -e "\n\n\n" && set -x
   local MOUNTPOINT="$1"
   local SSHCONNECT="$2"
   echo -n "Creating $MOUNTPOINT filesystem on Linux VM $SSHCONNECT remotely..."
   ssh -o "StrictHostKeyChecking no" ${SSHCONNECT} "
   [[ \$(mount | grep \"$MOUNTPOINT \" | grep -v grep | wc -l) -ne 0 ]] && echo \"mountpoint $MOUNTPOINT has been created!!\" && exit 1
DISK=\`sudo lsblk -no NAME | grep -Ev \"\$(sudo blkid | sed \"s/^\/dev\/\([a-zA-Z]\+\).*/\1/g\")|sr0|fd0\" | tail -1\`
if [ \"\$DISK\" != \"\" ]
then
   echo \"Creating $MOUNTPOINT disk....\"
   mkdir -p $MOUNTPOINT
   which mkfs.xfs 1>&2 >/dev/null
   if [ \$? -ne 0 ]
   then
      echo yes | sudo mkfs.ext4 /dev/\$DISK
      FSTYPE=ext4
   else
      echo yes | sudo mkfs.xfs /dev/\$DISK
      FSTYPE=xfs
   fi
   DISKUUID=\$(blkid /dev/\$DISK | awk '{print \$2}')
   echo \"\$DISKUUID $MOUNTPOINT \$FSTYPE defaults 0 0\" | sudo tee -a /etc/fstab
fi
sudo mount $MOUNTPOINT
if [ \$? -ne 0 ]
then
   echo \"Error creating filesystem $MOUNTPOINT on VM $VMNAME ( $FULLVMNAME ).... \"
   exit 1
else
   echo \"mounting $MOUNTPOINT filesystem..... OK\"
   echo \"$MOUNTPOINT has been created and mounted successfully...\"
fi
"

set +x
}


check_cgroup_v2()
{
[[ "$DEBUG" = "1" ]] && echo -e "\n\n\n" && set -x
   local SSHCONNECT="$1"
   NOOFCGROUP=$(ssh -o "StrictHostKeyChecking no" ${SSHCONNECT} "
   grep \"^cgroup \" /etc/mtab | awk '{print \$1}' | uniq | wc -l
")

set +x
}

generate_ssh_key()
{
[[ "$DEBUG" = "1" ]] && echo -e "\n\n\n" && set -x
    ssh -o "StrictHostKeyChecking no" ${THEUSER}@${FULLVMNAME} "
[[ \"$DEBUG\" = \"1\" ]] && set -x
hostname
[[ ! -f ~/.ssh/id_rsa ]] && ssh-keygen -f ~/.ssh/id_rsa -N \"\" || echo \"id_rsa and id_rsa.pub have been generated!!\"
"

set +x
}

install_packages()
{
[[ "$DEBUG" = "1" ]] && echo -e "\n\n\n" && set -x
   ssh -o "StrictHostKeyChecking no" ${THEUSER}@${FULLVMNAME} "
hostname
apt-get update
apt-get -y upgrade
"
set +x
}


copy_createazvm()
{
[[ "$DEBUG" = "1" ]] && echo -e "\n\n\n" && set -x
   scp createazvm.env ${THEUSER}@${FULLVMNAME}:~
   scp createazvm.sh ${THEUSER}@${FULLVMNAME}:~
   scp createazvm.addon.installk8s ${THEUSER}@${FULLVMNAME}:~/remotescript.sh
set +x
}

run_createazvm()
{
[[ "$DEBUG" = "1" ]] && echo -e "\n\n\n" && set -x
   ssh -o "StrictHostKeyChecking no" ${THEUSER}@${FULLVMNAME} "
[[ \"$DEBUG\" = \"1\" ]] && set -x
hostname
./createazvm.sh $K8SMASTER
W=0
while [[ \$W -lt $NOOFWORKERS ]]
do
  W=\$(( W + 1 ))
  ./createazvm.sh "${K8SNODE}\${W}"
done
source ~/remotescript.sh
remote_run
"

set +x
}


remote_copy_and_run_script()
{
[[ "$DEBUG" = "1" ]] && echo -e "\n\n\n" && set -x
   local SSHREMOTE="$1"
   source createazvm.env
   ssh -o "StrictHostKeyChecking no" "$SSHREMOTE" "
[[ \"$DEBUG\" = \"1\" ]] && set -x
export K8SMASTER=$K8SMASTER
export K8SNODE=$K8SNODE
export NOOFWORKERS=$NOOFWORKERS
export USERNAME=$ADMINUSER
export PASSWORD=\$(echo $ADMINPASSWORD | base64)
export NOPROMPT=1
./${SCRIPT2RUN} -m reset-master -k /opt/kubelet -c /opt/containers -n f"

set +x
}

remote_check_createvm_log()
{
[[ "$DEBUG" = "1" ]] && echo -e "\n\n\n" && set -x
  local NODENAME="$1"
  if [ $(tail -1 /tmp/createazvm.sh-${NODENAME}.log | grep "^ERROR:" | wc -l) -eq 0 ]
  then
     return 0
  else
     tail -1 /tmp/createazvm.sh-${NODENAME}.log
     return 1
  fi

set +x
}
   

remote_run()
{
[[ "$DEBUG" = "1" ]] && echo -e "\n\n\n" && set -x
  spool_script
  echo "Running on hostname $(hostname) ....."
  chmod ugo+x $SCRIPT2RUN
  [[ -f $SCRIPT2RUN ]] && scp -o "StrictHostKeyChecking no" $SCRIPT2RUN ${THEUSER}@${K8SMASTER}:~
  creating_disk "/opt" ${THEUSER}@${K8SMASTER}
  ssh -o "StrictHostKeyChecking no" ${THEUSER}@${K8SMASTER} "cat ~/.ssh/authorized_keys" > authorized_keys

  W=0
  while [[ $W -lt $NOOFWORKERS ]]
  do
     W=$(( W + 1 ))
     remote_check_createvm_log "${K8SNODE}${W}"
     if [ $? -eq 0 ]
     then
        creating_disk "/opt" "${THEUSER}@${K8SNODE}${W}"
     else
        echo "Error in creating VM ${K8SNODE}${W}"
     fi
  done
  check_cgroup_v2 ${THEUSER}@${K8SMASTER}
  if [ $NOOFCGROUP -le 1 ]
  then
      remote_copy_and_run_script "${THEUSER}@${K8SMASTER}"
      while [ $(ssh -o "StrictHostKeyChecking no" ${THEUSER}@${K8SMASTER} "echo \$(hostname)" 2>/dev/null) = "" ]
      do
         echo "Waiting for ${K8SMASTER} to be up and running...."
         sleep 3
     done
  fi
  remote_copy_and_run_script "${THEUSER}@${K8SMASTER}"
  remote_check_createvm_log "$K8SMASTER"
  [[ $? -ne 0 ]] && exit 1

set +x

}


run_addon()
{
[[ "$DEBUG" = "1" ]] && echo -e "\n\n\n" && set -x
   generate_ssh_key
   install_packages
   copy_createazvm
   run_createazvm
set +x
}


spool_script()
{
echo "IyEvYmluL2Jhc2gKIyAkSWQ6IHNldHVwLWs4c2Z1bGxjcmlvLnNoIDQ1NCAyMDIyLTA2LTExIDA0OjAyOjE4WiBicGFobGF3YSAkCiMgaW5pdGlhbGx5IGNhcHR1cmVkIGZyb20gTWljcm9zb2Z0IHdlYnNpdGUKIyAkQXV0aG9yOiBicGFobGF3YSAkCiMgTW9kaWZpZWQgYnk6IGJwYWhsYXdhCiMgJERhdGU6IDIwMjItMDYtMTEgMTI6MDI6MTggKzA4MDAgKFNhdCwgMTEgSnVuIDIwMjIpICQKIyAkUmV2aXNpb246IDQ1NCAkCgoKdHJhcCBleGl0c2hlbGwgU0lHSU5UIFNJR1RFUk0KZXhwb3J0IE5PT0ZXT1JLRVJTCmV4cG9ydCBLOFNNQVNURVIKZXhwb3J0IEs4U05PREVTCkVOVkZJTEU9LiR7MH0uZW52CgpDVVJSRElSPSQocHdkKQoKZXhpdHNoZWxsKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIGVjaG8gLWUgIiR7Tk9STUFMRk9OVH1DYW5jZWxsaW5nIHNjcmlwdC4uLi5leGl0aW5nLi4uLi4iCiAgIHN0dHkgc2FuZQogICBleGl0IDAKc2V0ICt4Cn0KCmV4cG9ydCBUSEVVU0VSPSIke0tVQkVfVVNFUjotazhzfSIKZXhwb3J0IERFQlVHPSIiCmV4cG9ydCBDUklVU0VEPSIke0NSSTotY29udGFpbmVyZH0iCmV4cG9ydCBSVU5DT05UQUlORVJTPSIvcnVuL2NvbnRhaW5lcnMiCmV4cG9ydCBLOFNWRVJQQVJBTT0iIgpleHBvcnQgU0NSSVBURElSPWBkaXJuYW1lICQwYCAmJiBbWyAiJFNDUklQVERJUiIgPSAiLiIgXV0gJiYgU0NSSVBURElSPWBwd2RgCmV4cG9ydCBLVUJFUEFSQU1JTklUPSItLXBvZC1uZXR3b3JrLWNpZHI9MTAuMjQ0LjAuMC8xNiIKZXhwb3J0IERFRkFVTFRfU1RPUkFHRT0iL21udC9sb2NhbC1zdG9yYWdlIgpleHBvcnQgS1VCRVNUT1JBR0U9IiR7S1VCRV9TVE9SQUdFOi0vdmFyL2xpYi9rdWJlbGV0fSIKZXhwb3J0IHBhc3N3b3JkPSIiCmV4cG9ydCBwYXNzd29yZDI9IlgiCmV4cG9ydCBMT0NBTFNUR01JTlNJWkU9MTUKZXhwb3J0IERJU1RSTz0iIgpleHBvcnQgVkVSU0lPTl9JRD0iIgpleHBvcnQgRlVMTF9WRVJTSU9OX0lEPSIiCmV4cG9ydCBDUklPX1ZFUlNJT049IjEuMjIiCmV4cG9ydCBGTEFOTkVMPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY29yZW9zL2ZsYW5uZWwvbWFzdGVyL0RvY3VtZW50YXRpb24va3ViZS1mbGFubmVsLnltbCIKZXhwb3J0IENBTElDTz0iaHR0cHM6Ly9kb2NzLnByb2plY3RjYWxpY28ub3JnL21hbmlmZXN0cy9jYWxpY28ueWFtbCIKZXhwb3J0IENJTElVTT0iaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2NpbGl1bS9jaWxpdW0vMS43LjIvaW5zdGFsbC9rdWJlcm5ldGVzL3F1aWNrLWluc3RhbGwueWFtbCIKI2V4cG9ydCBEQVNIQk9BUkQ9Imh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9rdWJlcm5ldGVzL2Rhc2hib2FyZC92MS4xMC4xL3NyYy9kZXBsb3kvcmVjb21tZW5kZWQva3ViZXJuZXRlcy1kYXNoYm9hcmQueWFtbCIKZXhwb3J0IERBU0hCT0FSRD0iaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2t1YmVybmV0ZXMvZGFzaGJvYXJkL21hc3Rlci9haW8vZGVwbG95L3JlY29tbWVuZGVkLnlhbWwiCmV4cG9ydCBMQU5HPWVuX1VTLlVURi04CiMgV2FpdCBmb3IgNSBtaW51dGVzIGZvciB0aGUgY2x1c3RlciB0byBiZSByZWFkeS4KIwpleHBvcnQgVElNRU9VVD02MDAKZXhwb3J0IFJFVFJZX0lOVEVSVkFMPTUKCmVudGVyX2lucHV0KCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIGxvY2FsIFFVRVNUSU9OPSIkMSIKICAgbG9jYWwgSElEREVOPSIkMiIKICAgaWYgWyAiJEhJRERFTiIgIT0gIiIgXQogICB0aGVuCiAgICAgIHJlYWQgLXNwICIkUVVFU1RJT04gOiAiIEFOUwogICBlbHNlCiAgICAgIGVjaG8gLWUgIiRRVUVTVElPTiIKICAgICAgcmVhZCAtcCAiPT4gOiAiIEFOUwogICBmaQogICBleHBvcnQgQU5TCnNldCAreAp9Cgppc19ydW5uaW5nKCkKeyAKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAogICBsb2NhbCBIT1NUPSIkMSIKICAgcGluZyAtViAyPi9kZXYvbnVsbCAxPi9kZXYvbnVsbAogICBbWyAkPyAtbmUgMCBdXSAmJiBpbnN0YWxsX3BrZyBpcHV0aWxzLXBpbmcKICAgcGluZyAtYzEgJEhPU1QgMT4vZGV2L251bGwgMj4vZGV2L251bGwKICAgcmV0dXJuICQ/CnNldCAreAp9Cgppc19zZXJ2aWNlX2FjdGl2ZSgpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAogICBsb2NhbCBTVkM9IiQxIgogICBUSU1FT1VUPTYwCiAgIHdoaWxlIHRydWUgOyBkbwogICAgICAgaWYgWyAkVElNRU9VVCAtbGUgMCBdCiAgICAgICB0aGVuCiAgICAgICAgICAgZWNobyAiU2VydmljZSBpcyBub3QgcmVhZHkgYWZ0ZXIgJFRJTUVPVVQgc2Vjb25kcy4uLmV4aXRpbmcuLi4iCiAgICAgICAgICAgZXhpdCAxCiAgICAgICBmaQoKICAgICAgIHN5c3RlbWN0bCBpcy1hY3RpdmUgLS1xdWlldCAkU1ZDCiAgICAgICBpZiBbICQ/IC1lcSAwIC1vICRTVkMgPSAia3ViZWxldCIgXQogICAgICAgdGhlbgogICAgICAgICAgZWNobyAiU2VydmljZSAkU1ZDIGlzIG5vdyBhY3RpdmUuLi4uIgogICAgICAgICAgcmV0dXJuCiAgICAgICBmaQogICAgICAgc2xlZXAgMgogICAgICAgVElNRU9VVD0kKCgkVElNRU9VVC0yKSkKICAgICAgIGVjaG8gIldhaXRpbmcgZm9yIHNlcnZpY2UgJFNWQyB0byBiZSByZWFkeS4uLiIKICAgZG9uZQpzZXQgK3gKfQoKd29ya2Vybm9kZXNfY3N2KCkKewogICAgbG9jYWwgSzhTTk9ERT0iJDEiCiAgICBsb2NhbCBOT09GV09SS0VSUz0iJDIiCiAgICBDTlQ9MQogICAgd2hpbGUgWyAkQ05UIC1sZSAkTk9PRldPUktFUlMgXQogICAgZG8KICAgICAgIFtbICRDTlQgLWx0ICROT09GV09SS0VSUyBdXSAmJiBBTExXT1JLRVJTPSIke0FMTFdPUktFUlN9JHtLOFNOT0RFfSR7Q05UfSwiIHx8IEFMTFdPUktFUlM9IiR7QUxMV09SS0VSU30ke0s4U05PREV9JHtDTlR9IgogICAgICAgQ05UPSQoKCBDTlQgKyAxICkpCiAgICBkb25lCiAgICBleHBvcnQgQUxMV09SS0VSUwp9CgpjaGVja19tYXN0ZXJfd29ya2VyKCkKeyAKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAogIFtbIC1mICRFTlZGSUxFIF1dICYmIHNvdXJjZSAkRU5WRklMRQogIGlmIFsgIiRLOFNNQVNURVIiID0gIiIgXQogIHRoZW4KCSAgZW50ZXJfaW5wdXQgIlBsZWFzZSBzcGVjaWZ5IE1hc3RlciBOb2RlIGRlZmF1bHQ9JChob3N0bmFtZSkiCgkgIEs4U01BU1RFUj0ke0FOUzotJChob3N0bmFtZSl9CgkgIGVjaG8gImV4cG9ydCBLOFNNQVNURVI9XCIkSzhTTUFTVEVSXCIiID4+ICRFTlZGSUxFCgkgIGlzX3J1bm5pbmcgJEs4U01BU1RFUgoJICBbWyAkPyAtbmUgMCBdXSAmJiBlY2hvICJNYXN0ZXIgbm9kZSAkSzhTTUFTVEVSIGlzIG5vdCBydW5uaW5nLi4gZXhpdGluZy4uIiAmJiBleGl0IDEgfHwgZWNobyAiTWFzdGVyIE5vZGUgJEs4U01BU1RFUiBpcyBhbGl2ZSAhIgogIGZpCgogIGlmIFsgIiRLOFNOT0RFIiA9ICIiIF0KICB0aGVuCgkgIGVudGVyX2lucHV0ICJQbGVhc2Ugc3BlY2lmeSBlaXRoZXIgb2YgdGhlIGZvbGxvd2luZyA6XG4xLiBXb3JrZXIgTm9kZSBiYXNlIG5hbWUgKEUuZzogbHhrOHNub2RlIClcbjIuIEFsbCBXb2tlciBub2RlcyBzZXBhcmF0ZWQgYnkgY29tbWEgKEUuZzogbHhrOHNub2RlMSxseGs4d29ya2VyMixseGs4c3N2cjAxIClcbjMuIE1vZGlmeSAkRU5WRklMRSBmaWxlIGFuZCBsaXN0IGFsbCB3b3JrZXIgbm9kZXMgaW4gdmFyIEs4U05PREUgKEUuZzogZXhwb3J0IEs4U05PREU9XCJseGs4c25vZGUsbHhrOHN3b3JrZXIxLGx4azhzc3ZyMlwiKSIKCSAgSzhTTk9ERT0iJEFOUyIKCSAgZWNobyAiZXhwb3J0IEs4U05PREU9XCIkSzhTTk9ERVwiIiA+PiAkRU5WRklMRQoJICBpZiBbICQoZ3JlcCAiLCIgJEVOVkZJTEUgfCBncmVwIC12IGdyZXAgfCB3YyAtbCkgLWVxIDAgXQoJICB0aGVuCgkgICAgIFtbICIkTk9PRldPUktFUlMiID0gIiIgXV0gJiYgZW50ZXJfaW5wdXQgIlBsZWFzZSBzcGVjaWZ5IG5vIG9mIHdvcmtlciBub2RlcyAodGhpcyBpcyBpZ25vcmVkIGlmICB3b3JrZXIgbm9kZXMgYXJlIGxpc3RlZCBhcyBjb21tYSBzZXBhcmF0ZWQhISkiCgkgICAgIE5PT0ZXT1JLRVJTPSIkQU5TIgogICAgICAgICAgICAgQUxMV09SS0VSUz0iIgoJICAgICB3b3JrZXJub2Rlc19jc3YgIiRLOFNOT0RFIiAiJE5PT0ZXT1JLRVJTIgogICAgICAgICAgICAgc2VkIC1pICJzL15leHBvcnQgSzhTTk9ERT0uKi9leHBvcnQgSzhTTk9ERT1cIiRBTExXT1JLRVJTXCIvIiAkRU5WRklMRQoJICBmaQogIGZpCgogIGlmIFsgIiROT1BST01QVCIgPSAiMSIgXQogIHRoZW4KICAgICBpZiBbICIkTk9PRldPUktFUlMiICE9ICIiIF0KICAgICB0aGVuCiAgICAgICAgd29ya2Vybm9kZXNfY3N2ICIkSzhTTk9ERSIgIiROT09GV09SS0VSUyIKICAgICAgICBLOFNOT0RFPSIkQUxMV09SS0VSUyIKICAgICBmaQogIGVsc2UKICAgICBLOFNOT0RFPSQoZ3JlcCAiXmV4cG9ydCBLOFNOT0RFIiAkRU5WRklMRSB8IGN1dCAtZjIgLWQiPSIgfCBzZWQgJ3MvIi8vZycpCiAgZmkKICBPTERJRlM9IiRJRlMiCiAgSUZTPScsJyByZWFkIC1yIC1hIEs4U05PREVTIDw8PCAiJEs4U05PREUiIAogIElGUz0iJE9MRElGUyIKCiAgZm9yIFdLTk9ERSBpbiAiJHtLOFNOT0RFU1tAXX0iCiAgZG8KICAgICBpc19ydW5uaW5nICRXS05PREUKICAgICBbWyAkPyAtbmUgMCBdXSAmJiBlY2hvICJXb3JrZXIgbm9kZSAke1dLTk9ERX0gaXMgbm90IHJ1bm5pbmcuLiwgYWxsIHdvcmtlciBub2RlcyBtdXN0IGJlIHJ1bm5pbmchIS4uIGV4aXRpbmcuLiIgJiYgW1sgLWYgJEVOVkZJTEUgXV0gJiYgcm0gLWYgJEVOVkZJTEUgJiYgZXhpdCAxIHx8IGVjaG8gIldvcmtlciBOb2RlICR7V0tOT0RFfSBpcyBhbGl2ZSAhIgogIGRvbmUKc2V0ICt4Cn0KCiAgICAKZ2V0X2Rpc3Ryb192ZXJzaW9uKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIGlmIFsgLWYgL2V0Yy9vcy1yZWxlYXNlIF0KICAgdGhlbgogICAgICBBTExWRVI9YHNlZCAtbiAnOmE7TjskYmI7YmE7OmI7cy8uKlZFUlNJT05fSUQ9IlwoWzAtOVwuXVwrXCkiLiovXDEvcCcgL2V0Yy9vcy1yZWxlYXNlYAogICAgICBbWyAiJEFMTFZFUiIgPSAiIiBdXSAmJiBBTExWRVI9IjAiCiAgICAgIEZVTExfVkVSU0lPTl9JRD0iJEFMTFZFUiIKICAgICAgVkVSU0lPTl9JRD1gZWNobyAkQUxMVkVSIHwgY3V0IC1mMSAtZCIuImAKICAgICAgZXhwb3J0IERJU1RSTz1gc2VkIC1uICdzL15JRFsgXHw9XVwoLipcKS9cMS9wJyAvZXRjL29zLXJlbGVhc2UgfCBzZWQgJ3MvIi8vZydgCiAgICAgIERJU1RSTz0ke0RJU1RST15efQogICBlbHNlCiAgICAgIGVjaG8gIlVuc3VwcG9ydGVkIG9wZXJhdGluZyBzeXN0ZW0gdmVyc2lvbiEhIgogICAgICBleGl0IDEKICAgZmkKc2V0ICt4Cn0KCiAgIAoKaWYgWyAiJEVVSUQiIC1uZSAwIF0KICB0aGVuIGVjaG8gIlBsZWFzZSBydW4gYXMgcm9vdCIKICBleGl0CmZpCgpleHBvcnQgSzhTREVQTE9ZX0RJUj1rOHNkZXBsb3kKCiMgTmFtZSBvZiB2aXJ0dWFsZW52IHZhcmlhYmxlIHVzZWQuCiMKZXhwb3J0IExPR19GSUxFPSJrOHNkZXBsb3kubG9nIgpleHBvcnQgUFJPR1JFU1NfRklMRT0iazhzcHJvZ3Jlc3MubG9nIgpleHBvcnQgREVCSUFOX0ZST05URU5EPW5vbmludGVyYWN0aXZlCmV4cG9ydCBQVl9DT1VOVD0iJHtQVkNPVU5UOi0zMH0iCgojIEt1YmUgdmVyc2lvbi4KIwojS1VCRV9EUEtHX1ZFUlNJT049MS4xNy40LTAwCiNLVUJFX1ZFUlNJT049MS4xNy40CgojIE1ha2UgYSBkaXJlY3RvcnkgZm9yIGluc3RhbGxpbmcgdGhlIHNjcmlwdHMgYW5kIGxvZ3MuCiMKbWtkaXIgLXAgJEs4U0RFUExPWV9ESVIKY2QgJEs4U0RFUExPWV9ESVIvCnRvdWNoICRMT0dfRklMRQp0b3VjaCAkUFJPR1JFU1NfRklMRQoKc2V0X2NyaW9fY2dyb3VwX21hbmFnZXIoKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKICAgIGVjaG8gIkNoZWNraW5nIHdoZXRoZXIgY3Jpby5ydW50aW1lIGhhcyBjZ3JvdXBfbWFuYWdlciBzZXQgdG8gc3lzdGVtZC4uLi4iCiAgICBpZiBbIC1kICIvZXRjL2NyaW8iIF0KICAgIHRoZW4KICAgICAgIENHUk9VUFNZU1RFTUQ9JChmaW5kIC9ldGMvY3JpbyAtbmFtZSAiKmNvbmYiIC10eXBlIGYgLWV4ZWMgZ3JlcCAiXmNncm91cF9tYW5hZ2VyLipzeXN0ZW1kIiB7fSBcOykKICAgICAgIGlmIFsgIiRDR1JPVVBTWVNURU1EIiA9ICIiIF0KICAgICAgIHRoZW4KICAgICAgICAgIENVUlJESVI9JChwd2QpCiAgICAgICAgICBbWyAhIC1kIC9ldGMvY3Jpby9jcmlvLmNvbmYuZCBdXSAmJiBta2RpciAtcCAvZXRjL2NyaW8vY3Jpby5jb25mLmQKICAgICAgICAgIGNkIC9ldGMvY3Jpby9jcmlvLmNvbmYuZAogICAgICAgICAgRklMRU5PPSQobHMgLTF2ICotKiB8IHRhaWwgLTEgfCBjdXQgLWYxIC1kIi0iKQogICAgICAgICAgQ1JJT0NPTkZJRz0iL2V0Yy9jcmlvL2NyaW8uY29uZi5kLyQoKCBGSUxFTk8gKyAxICkpLWNyaW8tcnVudGltZS5jb25mIgogICAgICAgICAgZWNobyAiQWRkaW5nIGNncm91cF9tYW5hZ2VyID0gc3lzdGVtZCBvbiAkQ1JJT0NPTkZJRyBmaWxlLi4iCiAgICAgICAgICBlY2hvICJbY3Jpby5ydW50aW1lXSIgPiAkQ1JJT0NPTkZJRwogICAgICAgICAgZ3JlcCAtdiAiXiMiIC9ldGMvY3Jpby9jcmlvLmNvbmYgfCBzZWQgJy9eJC9kJyB8IHNlZCAtRSAnOmE7TjskIWJhO3MvLipcW2NyaW8ucnVudGltZVxdKFthLXpBLVpcbj0gIi5fXSspXFsuKi9cMS9nJyA+PiAkQ1JJT0NPTkZJRwogICAgICAgICAgZWNobyAiY2dyb3VwX21hbmFnZXIgPSBcInN5c3RlbWRcIiIgPj4gJENSSU9DT05GSUcKICAgICAgICAgIGNkICRDVVJSRElSCiAgICAgICBmaQogICAgZWxzZQogICAgICAgZWNobyAiQ3JpbyBjb25maWcgZmlsZSAvZXRjL2NyaW8gZG9lc250IGV4aXN0Li4uZXhpdGluZy4uIgogICAgICAgZXhpdCAxCiAgICBmaQoKc2V0ICt4Cn0KCmFkZF9jcmlvX25ldGNvbmZpZygpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAoKICAgaWYgWyAtZCAvZXRjL2NyaW8vY3Jpby5jb25mLmQgXQogICB0aGVuCiAgICAgICAgICAgaWYgWyAkKGdyZXAgIlwvb3B0XC9jbmlcL2JpbiIgL2V0Yy9jcmlvL2NyaW8uY29uZi5kLyogfCB3YyAtbCkgLWVxIDAgXQogICAgICAgICAgIHRoZW4KICAgICAgICAgICAgICAgICBlY2hvICJBZGRpbmcgY3JpbyBuZXR3b3JrIGNvbmZpZ3VyYXRpb24uLi4iCgogICAgICAgICAgICAgICAgIGVjaG8gLWUgIltjcmlvLm5ldHdvcmtdCm5ldHdvcmtfZGlyID0gXCIvZXRjL2NuaS9uZXQuZC9cIgpwbHVnaW5fZGlycyA9IFsKICAgICAgICBcIi9vcHQvY25pL2Jpbi9cIiwKICAgICAgICBcIi91c3IvbGliZXhlYy9jbmkvXCIsCl0KIiA+IC9ldGMvY3Jpby9jcmlvLmNvbmYuZC8xMC1jcmlvLW5ldHdvcmsuY29uZgogICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgZWNobyAiY3JpbyBuZXR3b3JrIGhhcyBiZWVuIGNvbmZpZ3VyZS4uIgogICAgICAgICAgIGZpCiAgIGVsc2UKICAgICAgICAgbWtkaXIgLXAgL2V0Yy9jcmlvL2NyaW8uY29uZi5kCiAgICAgICAgIGVjaG8gLWUgIltjcmlvLm5ldHdvcmtdCm5ldHdvcmtfZGlyID0gXCIvZXRjL2NuaS9uZXQuZC9cIgpwbHVnaW5fZGlycyA9IFsKICAgICAgICBcIi9vcHQvY25pL2Jpbi9cIiwKICAgICAgICBcIi91c3IvbGliZXhlYy9jbmkvXCIsCl0KIiA+IC9ldGMvY3Jpby9jcmlvLmNvbmYuZC8xMC1jcmlvLW5ldHdvcmsuY29uZgoKICAgICAgICAgZWNobyAiQWRkZWQgY3Jpby5uZXR3b3JrIGludG8gL2V0Yy9jcmlvL2NyaW8uY29uZi5kLzEwLWNyaW8tbmV0d29yay5jb25mIgogICBmaQpzZXQgK3gKfQoKCnJlc2V0X2t1YmVhZG0oKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKICAgcm0gLXJmIC9ldGMvY25pCiAgIHJtIC1yZiAvZXRjL2t1YmVybmV0ZXMKICAgcm0gLXJmIC92YXIvbGliL2NuaQogICBybSAtcmYgL3Zhci9saWIva3ViZWxldAogICBybSAtcmYgL3Zhci9saWIvZXRjZAogICBybSAtcmYgL3Zhci9ydW4va3ViZXJuZXRlcwogICBybSAtcmYgL3Zhci9sb2cvcG9kcwogICBybSAtcmYgL3Zhci9sb2cvY29udGFpbmVycwogICBbWyAtZCAvdmFyL2xpYi9ldGNkIF1dICYmIHJtIC1yZiAvdmFyL2xpYi9ldGNkLyoKICAgaXAgbGluayBsaXN0IGt1YmUtaXB2czAgMj4vZGV2L251bGwgMT4vZGV2L251bGwKICAgW1sgJD8gLWVxIDAgXV0gJiYgZWNobyAiRGVsZXRpbmcga3ViZS1pcHZzMC4uLi4iICYmIGlwIGxpbmsgc2V0IGRldiBrdWJlLWlwdnMwIGRvd24gJiYgaXAgbGluayBkZWxldGUga3ViZS1pcHZzMAogICBbWyAtZCAvcnVuL2NhbGljbyBdXSAmJiBybSAtcmYgL3J1bi9jYWxpY28KICAgW1sgJChpcCBsaW5rIGxpc3QgfCBncmVwIHR1bmwwICB8IHdjIC1sKSAtbmUgMCBdXSAmJiBlY2hvICJEZWxldGluZyBpbnRlcmZhY2UgY2FsaWNvIHR1bmwwLi4uLiIgJiYgbW9kcHJvYmUgLXIgaXBpcAogICBbWyAtZCAvcnVuL2ZsYW5uZWwgXV0gJiYgcm0gLXJmIC9ydW4vZmxhbm5lbAogICBpcCBsaW5rIGxpc3QgZmxhbm5lbC4xIDI+L2Rldi9udWxsIDE+L2Rldi9udWxsCiAgIFtbICQ/IC1lcSAwIF1dICYmIGVjaG8gIkRlbGV0aW5nIGludGVyZmFjZSBmbGFubmVsIGZsYW5uZWwuMS4uLi4iICYmIGlwIGxpbmsgc2V0IGRldiBmbGFubmVsLjEgZG93biAmJiBpcCBsaW5rIGRlbGV0ZSBmbGFubmVsLjEKCiAgIFtbIC1kIC9ydW4vY2lsaXVtIF1dICYmIHJtIC1yZiAvcnVuL2NpbGl1bQogICBpcCBsaW5rIGxpc3QgY2lsaXVtX2hvc3QgMj4vZGV2L251bGwgMT4vZGV2L251bGwKICAgW1sgJD8gLWVxIDAgXV0gJiYgZWNobyAiRGVsZXRpbmcgaW50ZXJmYWNlIGNpbGl1bSBob3N0IGFuZCBuZXQuLi4uIiAmJiBpcCBsaW5rIGRlbGV0ZSBjaWxpdW1fdnhsYW4gJiYgaXAgbGluayBkZWxldGUgY2lsaXVtX25ldCAmJiBpcCBsaW5rIGRlbGV0ZSBjaWxpdW1faG9zdAoKICAgaXAgbGluayBsaXN0IHdlYXZlIDI+L2Rldi9udWxsIDE+L2Rldi9udWxsCiAgIGlmIFsgJD8gLWVxIDAgXQogICB0aGVuCiAgICAgIGVjaG8gIkRlbGV0aW5nIGludGVyZmFjZSB3ZWF2ZW5ldCB3ZWF2ZS4uLi4iIAogICAgICBbWyAtZCAvdXNyL2xvY2FsL2JpbiBdXSAmJiBta2RpciAtcCAvdXNyL2xvY2FsL2JpbgogICAgICBjdXJsIC1MIGdpdC5pby93ZWF2ZSAtbyAvdXNyL2xvY2FsL2Jpbi93ZWF2ZSAKICAgICAgY2htb2QgdWdvK3ggL3Vzci9sb2NhbC9iaW4vd2VhdmUKICAgICAgL3Vzci9sb2NhbC9iaW4vd2VhdmUgc3RvcAogICAgICAvdXNyL2xvY2FsL2Jpbi93ZWF2ZSByZXNldCAtLWZvcmNlCiAgICAgIGlwIGxpbmsgc2V0IGRldiB3ZWF2ZSBkb3duIAogICAgICBpcCBsaW5rIGRlbGV0ZSB3ZWF2ZQogICBmaQogICBpcCBsaW5rIGxpc3QgZGF0YXBhdGggMj4vZGV2L251bGwgMT4vZGV2L251bGwKICAgW1sgJD8gLWVxIDAgXV0gJiYgY3VybCAtTCBnaXQuaW8vd2VhdmUgLW8gL3RtcC93ZWF2ZSAmJiBjaG1vZCB1Z28rcnggL3RtcC93ZWF2ZQoKICAgaXAgbGluayBsaXN0IGNuaTAgMj4vZGV2L251bGwgMT4vZGV2L251bGwKICAgaWYgWyAkPyAtZXEgMCBdCiAgIHRoZW4KICAgICAgZWNobyAiRGVsZXRpbmcgaW50ZXJmYWNlIGNuaTAuLi4uIgogICAgICBpcCBsaW5rIHNldCBkZXYgY25pMCBkb3duCiAgICAgIGlwIGxpbmsgZGVsZXRlIGNuaTAKICAgZmkKCiAgIGZvciBJRkFDRSBpbiAkKGlwIGxpbmsgbGlzdCB8IGVncmVwICJ2ZXRofGNhbGkiIHwgYXdrICJ7cHJpbnQgXCQyfSIgfCBjdXQgLWYxIC1kQCkKICAgZG8KICAgICAgaXAgbGluayBkZWxldGUgJElGQUNFCiAgIGRvbmUKICAgaWYgWyAiJEtVQkVBRE1fSk9JTl9DTUQiICE9ICIiIF0KICAgdGhlbgogICAgICBNQVNURVJOT0RFPWBlY2hvICRLVUJFQURNX0pPSU5fQ01EIHwgYXdrICd7cHJpbnQgJDN9JyB8IGN1dCAtZjEgLWQnOidgCiAgICAgIHNzaCAkTUFTVEVSTk9ERSAia3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgZGVsZXRlIFwkKGt1YmVjdGwgLS1rdWJlY29uZmlnPS9ldGMva3ViZXJuZXRlcy9hZG1pbi5jb25mIGdldCBub2RlcyBgaG9zdG5hbWVgIC1vIE5BTUUgMj4vZGV2L251bGwpIgogICBmaQoKCnNldCAreAp9CgphZGRfZ3J1Yl9wYXJhbSgpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAogICBsb2NhbCBQQVJBTT0iJDEiCiAgIGlmIFsgLWQgL2V0Yy9kZWZhdWx0L2dydWIuZCBdCiAgIHRoZW4KICAgICAgaWYgWyAkKGZpbmQgL2V0Yy9kZWZhdWx0L2dydWIuZCAgLXR5cGUgZiAtZXhlYyBncmVwICIkUEFSQU0iIHt9IFw7fHdjIC1sKSAtZXEgMCBdCiAgICAgIHRoZW4KICAgICAgICAgIEdSVUJGSUxFPSQoZmluZCAvZXRjL2RlZmF1bHQvZ3J1Yi5kIC10eXBlIGYgLWV4ZWMgZ3JlcCAiXkdSVUJfQ01ETElORV9MSU5VWD0iIHt9IFw7IC1wcmludCB8IHRhaWwgLTEpCiAgICAgIGZpCiAgICAgIGlmIFsgIiRHUlVCRklMRSIgPSAiIiBdCiAgICAgIHRoZW4KCSAgR1JVQkZJTEU9JChmaW5kIC9ldGMvZGVmYXVsdCAtdHlwZSBmIC1leGVjIGdyZXAgIl5HUlVCX0NNRExJTkVfTElOVVg9IiB7fSBcOyAtcHJpbnQgfCB0YWlsIC0xKQogICAgICBmaQogIGVsc2UKICAgICAgR1JVQkZJTEU9JChmaW5kIC9ldGMvZGVmYXVsdCAtdHlwZSBmIC1leGVjIGdyZXAgIl5HUlVCX0NNRExJTkVfTElOVVg9IiB7fSBcOyAtcHJpbnQgfCB0YWlsIC0xKQogIGZpCiAgW1sgIiRHUlVCRklMRSIgIT0gIiIgXV0gJiYgW1sgJChncmVwICRQQVJBTSAkR1JVQkZJTEUgfCB3YyAtbCkgLWVxIDAgXV0gJiYgIHNlZCAtaSAicy9cKF5HUlVCX0NNRExJTkVfTElOVVg9LipcKVwiL1wxICRQQVJBTVwiL2ciICRHUlVCRklMRQogIGdldF9kaXN0cm9fdmVyc2lvbgogICBjYXNlICIkRElTVFJPIiBpbgogICAgIkNFTlRPUyJ8IlJIRUwiKQogICAgICAgICAgICBncnViMi1ta2NvbmZpZyAtbyAvYm9vdC9ncnViL2dydWIuY2ZnCiAgICAgICAgICAgIENIRUNLSVQ9JChmaW5kIC9ib290L2dydWIgLXR5cGUgZiAtZXhlYyBncmVwICIkUEFSQU0iIHt9IFw7KQogICAgICAgICAgICA7OwoKICAgICJVQlVOVFUiKQogICAgICAgICAgICB1cGRhdGUtZ3J1YiAKICAgICAgICAgICAgQ0hFQ0tJVD0kKGZpbmQgL2Jvb3QvZ3J1YiAtdHlwZSBmIC1leGVjIGdyZXAgIiRQQVJBTSIge30gXDspCiAgICAgICAgICAgIDs7CiAgICAiQVJDSCIpCiAgICAgICAgICAgIGdydWItbWtjb25maWcgLW8gL2Jvb3QvZ3J1Yi9ncnViLmNmZwogICAgICAgICAgICBDSEVDS0lUPSQoZmluZCAvYm9vdC9ncnViIC10eXBlIGYgLWV4ZWMgZ3JlcCAiJFBBUkFNIiB7fSBcOykKICAgICAgICAgICAgOzsKICAgICJERUJJQU4iKQoJICAgIHVwZGF0ZS1ncnViCiAgICAgICAgICAgIENIRUNLSVQ9JChmaW5kIC9ib290L2dydWIgLXR5cGUgZiAtZXhlYyBncmVwICIkUEFSQU0iIHt9IFw7KQogICAgICAgICAgICA7OwogICAgKlNVU0UqKQogICAgICAgICAgICBncnViMi1ta2NvbmZpZyAtbyAvYm9vdC9ncnViMi9ncnViLmNmZwogICAgICAgICAgICBDSEVDS0lUPSQoZmluZCAvYm9vdC9ncnViMiAtdHlwZSBmIC1leGVjIGdyZXAgIiRQQVJBTSIge30gXDspCiAgICAgICAgICAgIDs7CiAgICBlc2FjCiAgICBbWyAiJENIRUNLSVQiICE9ICIiIF1dICYmIHJldHVybiAwIHx8IHJldHVybiAxCgpzZXQgK3gKfQoKY2hlY2tfY2dyb3VwX3YyKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIENHUlBWMT0kKGdyZXAgIl5jZ3JvdXAgIiAvZXRjL210YWIgfCBhd2sgJ3twcmludCAkMX0nIHwgdW5pcSB8IHdjIC1sKQogICBpZiBbICRDR1JQVjEgLWVxIDAgXQogICB0aGVuCiAgICAgIGVjaG8gImNncm91cCBpcyBlbmZvcmNlZCB0byB2MiwgaW4gbGltaXRlZCByZXNvdXJjZSwga3ViZXJuZXRlcyBjbHVzdGVyIHdpbGwgaGF2ZSBzb21lIGlzc3Vlcy4uLiIKICAgICAgZWNobyAiVXNlIGNncm91cCB2MSBieSBhZGRpbmcgZGVmYXVsdCBncnViIHBhcmFtZXRlciBhcyBmb2xsb3c6IgogICAgICBlY2hvICIgICAgIHN5c3RlbWQudW5pZmllZF9jZ3JvdXBfaGllcmFyY2h5PTAiCiAgICAgIGVjaG8gIm1vZGlmeWluZyBkZWZhdWx0L2dydWIgZmlsZS4uLi4iCiAgICAgIGFkZF9ncnViX3BhcmFtICJzeXN0ZW1kLnVuaWZpZWRfY2dyb3VwX2hpZXJhcmNoeT0wIgogICAgICBpZiBbICQ/IC1uZSAwIF0KICAgICAgdGhlbgoJICBlY2hvICJGYWlsZWQgdG8gYWx0ZXIgZGVmYXVsdC9ncnViIHBhcmFtZXRlciBHUlVCX0NNRExJTkVfTElOVVggLi4uIgoJICBlY2hvICJQbGVhc2UgZG8gaXQgbWFudWFsbHkhISB0aGVuIHJlLXJ1biB0aGlzIHNjcmlwdC4uLiIKCSAgcmV0dXJuIDEKICAgICAgZWxzZQoJICBlY2hvICJQYXJhbXRlciBHUlVCX0NNRExJTkVfTElOVVggaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IG1vZGlmaWVkLCBwbGVhc2UgcmVib290IHRoZSBzZXJ2ZXIuLi4iCgkgIFJFQk9PVD0xCgkgIHJldHVybiAwCiAgICAgIGZpCiAgIGVsc2UKICAgICAgZWNobyAiVXNpbmcgY2dyb3VwIHYxIC4uLi4iCiAgIGZpCgpzZXQgK3gKfQoKcmVtb3ZlX21vdW50cG9pbnRzKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIGZvciBNTlRQT0lOVCBpbiBgbW91bnQgfCBlZ3JlcCAiL3Zhci9saWIvY29udGFpbmVyc3wvcnVuL2NvbnRhaW5lcnN8L3Zhci9saWIvY29udGFpbmVyZHwvcnVuL2NvbnRhaW5lcmR8JHtDT05UQUlORVJTVE9SQUdFOi0vdmFyL2xpYi9jb250YWluZXJzfXwke0tVQkVTVE9SQUdFOi0vdmFyL2xpYi9rdWJlbGV0fXwke0NPTlRBSU5FUlNUT1JBR0U6LS92YXIvbGliL2NvbnRhaW5lcnN9Ly4uL3J1biR7UlVOQ09OVEFJTkVSU1VCfXwke1JVTkNPTlRBSU5FUlM6LS9ydW4vY29udGFpbmVyc318dXRzbnN8aXBjbnN8bmV0bnMiIHwgYXdrICd7cHJpbnQgJDN9JyB8IHNvcnQgLXJgCiAgIGRvCiAgICAgIGVjaG8gIlVubW91bnRpbmcgJE1OVFBPSU5UIgogICAgICB1bW91bnQgLWwgJE1OVFBPSU5UCiAgIGRvbmUKCnNldCAreAp9CgpkZXN0cm95X2V2ZXJ5dGhpbmcoKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKZWNobyAiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyIKZWNobyAiIyMjIyMjIyBEZXN0cm95aW5nIGFuZCBVbmluc3RhbGxpbmcgS3ViZXJuZXRlcyBhbmQgaXRzIGNvbXBvbmVudHMgIyMjIyMjIyIKZWNobyAiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyIKICAgS1VCRVBJRD0kKHBzIC1lbyBwaWQsY21kIHwgZ3JlcCAiYmluL2t1YmVsZXQiIHwgZ3JlcCAtdiBncmVwIHwgYXdrICd7cHJpbnQgJDF9JykKICAgW1sgIiRLVUJFUElEIiAhPSAiIiBdXSAmJiBlY2hvICJLaWxsaW5nIGt1YmVsZXQuLi4iICYmIHN5c3RlbWN0bCBzdG9wIGt1YmVsZXQgJiYga2lsbCAtOSAkS1VCRVBJRCAyPi9kZXYvbnVsbCAxPi9kZXYvbnVsbAogICBnZXRfY3JpX3BhcmFtCgogICBrdWJlYWRtIHJlc2V0ICR7Q1JJUEFSQU19IC1mIDw8RU9GCnkKRU9GCiAgIFtbIC1mIC9saWIvc3lzdGVtZC9zeXN0ZW0vY29udGFpbmVyZC5zZXJ2aWNlIHx8IC1mIC91c3IvbGliL3N5c3RlbWQvc3lzdGVtL2NvbnRhaW5lcmQuc2VydmljZSBdXSAmJiBzeXN0ZW1jdGwgc3RvcCBjb250YWluZXJkCiAgIFtbIC1mIC9saWIvc3lzdGVtZC9zeXN0ZW0vY3Jpby5zZXJ2aWNlIHx8IC1mIC91c3IvbGliL3N5c3RlbWQvc3lzdGVtL2NyaW8uc2VydmljZSBdXSAmJiBzeXN0ZW1jdGwgc3RvcCBjcmlvCiAgIFtbIC1mIC9saWIvc3lzdGVtZC9zeXN0ZW0vZG9rY2VyLnNlcnZpY2UgfHwgLWYgL3Vzci9saWIvc3lzdGVtZC9zeXN0ZW0vZG9rY2VyLnNlcnZpY2UgXV0gJiYgc3lzdGVtY3RsIHN0b3AgZG9ja2VyCgogICBpcHRhYmxlcyAtRiAmJiBpcHRhYmxlcyAtdCBuYXQgLUYgJiYgaXB0YWJsZXMgLXQgbWFuZ2xlIC1GICYmIGlwdGFibGVzIC1YCiAgIHdoaWNoIG5mdAogICBbWyAkPyAtZXEgMCBdXSAmJiBuZnQgZmx1c2ggcnVsZXNldAoKCiAgIGZvciBNTlRQT0lOVCBpbiBgZGYgfCBhd2sgJ3twcmludCAkTkZ9JyB8IGVncmVwICJrdWJlbGV0fFwvdm9sfGNvbnRhaW5lcnN8b3ZlcmxheSBvbnxuc2ZzIG9uImAKICAgZG8KICAgICAgIHVtb3VudCAkTU5UUE9JTlQKICAgZG9uZQoKICAgZm9yIE1OVFBPSU5UIGluIGBtb3VudCB8IGVncmVwICJrdWJlbGV0fFwvdm9sfGNvbnRhaW5lcnN8b3ZlcmxheSBvbnxuc2ZzIG9uIiB8IGF3ayAne3ByaW50ICQzfSdgCiAgIGRvCiAgICAgIHVtb3VudCAkTU5UUE9JTlQKICAgICAgcm0gLXJmICRNTlRQT0lOVAogICBkb25lCgogICByZXNldF9rdWJlYWRtCiAgIGRlbGV0ZV9lcGhlbWVyYWxfZGlza3MgIiRLVUJFU1RPUkFHRSIKICAgZGVsZXRlX2VwaGVtZXJhbF9kaXNrcyAiJENPTlRBSU5FUlNUT1JBR0UiCiAgIGRlbGV0ZV9lcGhlbWVyYWxfZGlza3MgIiRMT0NBTFNUT1JBR0UiCiAKICAgcmVtb3ZlX2xpbmtkaXJzIC92YXIvbGliL2t1YmVsZXQKICAgcmVtb3ZlX2xpbmtkaXJzIC92YXIvbGliL2NvbnRhaW5lcnMKICAgcmVtb3ZlX2xpbmtkaXJzIC92YXIvbGliL2NvbnRhaW5lcmQKICAgcmVtb3ZlX2xpbmtkaXJzIC9ydW4vY29udGFpbmVycwogICByZW1vdmVfbGlua2RpcnMgL3J1bi9jb250YWluZXJkCgogICBnZXRfZGlzdHJvX3ZlcnNpb24KICAgY2FzZSAiJERJU1RSTyIgaW4KICAgICJDRU5UT1MifCJSSEVMIikKCSAgICBbWyAtZiAvbGliL3N5c3RlbWQvc3lzdGVtL2NvbnRhaW5lcmQuc2VydmljZSBdXSAmJiB5dW0gcmVtb3ZlIC15IGNvbnRhaW5lcmQqCiAgICAgICAgICAgIHl1bSByZW1vdmUgLXkga3ViZSoKCSAgICBbWyAtZiAvbGliL3N5c3RlbWQvc3lzdGVtL2NyaW8uc2VydmljZSBdXSAmJiB5dW0gcmVtb3ZlIC15IGNyaW8qCiAgICAgICAgICAgIFtbIC1mIC9ldGMveXVtLnJlcG9zLmQva3ViZXJuZXRlcy5yZXBvIF1dICYmIHJtIC1mIC9ldGMveXVtLnJlcG9zLmQva3ViZXJuZXRlcy5yZXBvCgkgICAgOzsKCiAgICAiVUJVTlRVInwiREVCSUFOIikKICAgICAgICAgICAgYXB0LWdldCBwdXJnZSAteSBrdWJlKgogICAgICAgICAgICBbWyAtZiAvbGliL3N5c3RlbWQvc3lzdGVtL2NvbnRhaW5lcmQuc2VydmljZSBdXSAmJiBhcHQtZ2V0IHB1cmdlIC15IGNvbnRhaW5lcmQqCgkgICAgW1sgLWYgL2xpYi9zeXN0ZW1kL3N5c3RlbS9jcmlvLnNlcnZpY2UgXV0gJiYgYXB0LWdldCBwdXJnZSAteSBjcmktbyBjcmktby1ydW5jCiAgICAgICAgICAgIFtbIC1mIC9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL2t1YmVybmV0ZXMubGlzdCBdXSAmJiBybSAtZiAvZXRjL2FwdC9zb3VyY2VzLmxpc3QuZC9rdWJlcm5ldGVzLmxpc3QKCSAgICA7OwogICAgIkFSQ0giKQogICAgICAgICAgICBmb3IgcGtnIGluIGt1YmVhZG0tYmluIGt1YmVsZXQtYmluIGt1YmVjdGwtYmluIGt1YmVybmV0ZXMtY25pLWJpbiBjcmktbyBjcmljdGwga3ViZS1hcGlzZXJ2ZXIga3ViZS1jb250cm9sbGVyLW1hbmFnZXIga3ViZS1wcm94eSBrdWJlLXNjaGVkdWxlciBrdWJlYWRtIGt1YmVjdGwga3ViZWxldCBrdWJlcm5ldGVzLWNvbnRyb2wtcGxhbmUtY29tbW9uIGNvbnRhaW5lcmQgZG9ja2VyIGNyaWN0bAogICAgICAgICAgICBkbwogICAgICAgICAgICAgICBpZiBbICIkKHBhY21hbiAtUSAkcGtnIDI+L2Rldi9udWxsKSIgIT0gIiIgXQogICAgICAgICAgICAgICB0aGVuCiAgICAgICAgICAgICAgICAgICBwYWNtYW4gLVJzIC0tbm9jb25maXJtICRwa2cKICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgZG9uZQoJICAgIDs7CiAgICAqU1VTRSopIAogICAgICAgICAgICBbWyAtZiAvbGliL3N5c3RlbWQvc3lzdGVtL2NvbnRhaW5lcmQuc2VydmljZSB8fCAtZiAvdXNyL2xpYi9zeXN0ZW1kL3N5c3RlbS9jb250YWluZXJkLnNlcnZpY2UgXV0gJiYgenlwcGVyIGluIHJtIGNvbnRhaW5lcmQKICAgICAgICAgICAgW1sgLWYgL2xpYi9zeXN0ZW1kL3N5c3RlbS9jcmlvLnNlcnZpY2UgfHwgLWYgL3Vzci9saWIvc3lzdGVtZC9zeXN0ZW0vY3Jpby5zZXJ2aWNlIF1dICYmIHp5cHBlciBpbiBybSBjcmktbwogICAgICAgICAgICBbWyAtZiAvbGliL3N5c3RlbWQvc3lzdGVtL2RvY2tlci5zZXJ2aWNlIHx8IC1mIC91c3IvbGliL3N5c3RlbWQvc3lzdGVtL2RvY2tlci5zZXJ2aWNlIF1dICYmIHp5cHBlciBpbiBybSBkb2NrZXIKICAgICAgICAgICAgenlwcGVyIC1uIHJtIGNyaS1vCiAgICAgICAgICAgIHp5cHBlciAtbiBybSBjb250YWluZXJkCiAgICAgICAgICAgIHp5cHBlciAtbiBybSBsaWJjb250YWluZXJzLWNvbW1vbgogICAgICAgICAgICA7OwogICBlc2FjCgogICBmaW5kIC8gXCggLW5hbWUgImt1YmVsZXQiIFwpIC1leGVjIHJtIC1yZiB7fSBcOyAgMj4vZGV2L251bGwKICAgY2QgJENVUlJESVIgCiAgIFtbIC1kICRLOFNERVBMT1lfRElSIF1dICYmIHJtIC1yZiAkSzhTREVQTE9ZX0RJUgpzZXQgK3gKfQoKbW9kaWZ5X3NzbF9jb25maWcoKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKICAgIGlmIFsgIiRESVNUUk8iID0gIkRFQklBTiIgLWEgMCRWRVJTSU9OX0lEIC1nZSAxMCBdCiAgICB0aGVuCiAgICAgICBTU0xDT05GSUc9YGZpbmQgL2V0YyAtbmFtZSAib3BlbnNzbCpjbmYiYAogICAgICAgaWYgWyAiJFNTTENPTkZJRyIgIT0gIiIgXQogICAgICAgdGhlbgogICAgICAgICAgREVCSUFOMTBTU0xDT05GSUc9YHNlZCAtbiAicy9eXChcW2RlZmF1bHRfY29uZi4qXCkvXDEvcCIgJFNTTENPTkZJR2AKICAgICAgICAgIGlmIFsgIiRERUJJQU4xMFNTTENPTkZJRyIgIT0gIiIgXQogICAgICAgICAgdGhlbgogICAgICAgICAgZWNobyAiTW9kaWZ5aW5nICRTU0xDT05GSUcgYXMgS3ViZXJuZXRlcyBpcyBub3QgY29tcGF0aWJsZSB3aXRoIFRMUyB2MS4yIG9yIGxhdGVyLi4uLiIKICAgICAgICAgICAgIHNlZCAtaSAicy9eXChcW2RlZmF1bHRfY29uZi4qXCkvXG4jQ29tbWVudGVkIG91dCBieSBzZXR1cC1iZGMuc2ggJChkYXRlKVxuI1wxL2c7IHMvXlwoc3NsX2NvbmYuKlx8b3BlbnNzbF9jb25mLipcKS8jXDEvZyIgJFNTTENPTkZJRwogICAgICAgICAgZmkKICAgICAgIGZpCiAgICAgICB1cGRhdGUtYWx0ZXJuYXRpdmVzIC0tc2V0IGlwdGFibGVzIC91c3Ivc2Jpbi9pcHRhYmxlcy1sZWdhY3kKICAgICAgIHVwZGF0ZS1hbHRlcm5hdGl2ZXMgLS1zZXQgaXA2dGFibGVzIC91c3Ivc2Jpbi9pcDZ0YWJsZXMtbGVnYWN5CiAgICAgICBbWyAtZiAvdXNyL3NiaW4vYXJwdGFibGVzLWxlZ2FjeSBdXSAmJiB1cGRhdGUtYWx0ZXJuYXRpdmVzIC0tc2V0IGFycHRhYmxlcyAvdXNyL3NiaW4vYXJwdGFibGVzLWxlZ2FjeQogICAgICAgdXBkYXRlLWFsdGVybmF0aXZlcyAtLXNldCBlYnRhYmxlcyAvdXNyL3NiaW4vZWJ0YWJsZXMtbGVnYWN5CgogICAgZWxpZiBbIFwoICIkRElTVFJPIiA9ICJDRU5UT1MiIC1vICIkRElTVFJPIiA9ICJSSEVMIiBcKSAtYSAkVkVSU0lPTl9JRCAtZ2UgOCBdCiAgICB0aGVuCiAgICAgICBlY2hvICJDaGVja2luZyBjcnlwdG8gcG9saWN5IG9mICRESVNUUk8gJFZFUlNJT05fSUQiCiAgICAgICBDUllQVE9WRVI9YHVwZGF0ZS1jcnlwdG8tcG9saWNpZXMgLS1zaG93YAogICAgICAgZWNobyAiQ3VycmVudCBjcnlwdG8gcG9saWN5IGlzICRDUllQVE9WRVIiCiAgICAgICBbWyAiJENSWVBUT1ZFUiIgIT0gIkxFR0FDWSIgXV0gJiYgZWNobyAiU2V0dGluZyBjcnlwdG8gcG9saWN5IHRvIExFR0FDWS4uIiAmJiB1cGRhdGUtY3J5cHRvLXBvbGljaWVzIC0tc2V0IExFR0FDWQogICAgZWxzZQogICAgICAgZWNobyAiQ3VycmVudCBjcnlwdG8gcG9saWN5IGlzIHN1aXRhYmxlIGZvciB0aGlzIGt1YmVybmV0ZXMgY2x1c3Rlci4uLi4uLi4uLi4uIgogICAgZmkKc2V0ICt4Cn0KCmluc3RhbGxfcGtnX2NlbnRvcygpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAplY2hvICJDaGVja2luZyBrdWJlcm5ldGVzIHZlcnNpb24uLi4iCks4U1ZFUj1ga3ViZWxldCAtLXZlcnNpb24gfCBzZWQgLW4gICdzLy4qdlswLTldLlwoWzAtOV1cK1wpLi9cMS9wJ2AKW1sgJEs4U1ZFUiAtbHQgMTcwIF1dICYmIGVjaG8gIlJlbW92aW5nIGt1YmVybmV0ZXMgdmVyc2lvbiAkSzhTVkVSIG9uICRESVNUUk8uLi4iICYmIHl1bSByZW1vdmUgLXkga3ViZSoKCmVjaG8gIlVwZGF0aW5nIGNlbnRvcy4uLi4iCnl1bSB1cGRhdGUgYWxsCnl1bSB1cGRhdGUgLXkKZWNobyAiSW5zdGFsbGluZyBsaWJyYXJpZXMuLi4uLiIKeXVtIGluc3RhbGwgLXkgY3VybCBjYS1jZXJ0aWZpY2F0ZXMgeXVtLXV0aWxzIGRldmljZS1tYXBwZXItcGVyc2lzdGVudC1kYXRhIGx2bTIgd2dldCBpcHJvdXRlLXRjCnl1bSBpbnN0YWxsIC15IHNvZnR3YXJlLXByb3BlcnRpZXMtY29tbW9uCgppZiBbICEgLWYgL2V0Yy9hcHQvc291cmNlcy5saXN0LmQvZGV2ZWw6a3ViaWM6bGliY29udGFpbmVyczpzdGFibGU6Y3JpLW86JENSSU9fVkVSU0lPTi5saXN0IF0KICAgdGhlbgogICAgICAgY3VybCAtTCBodHRwczovL2Rvd25sb2FkLm9wZW5zdXNlLm9yZy9yZXBvc2l0b3JpZXMvZGV2ZWw6L2t1YmljOi9saWJjb250YWluZXJzOi9zdGFibGUvQ2VudE9TXyR7VkVSU0lPTl9JRH0vZGV2ZWw6a3ViaWM6bGliY29udGFpbmVyczpzdGFibGUucmVwbyA+IC9ldGMveXVtLnJlcG9zLmQvZGV2ZWw6a3ViaWM6bGliY29udGFpbmVyczpzdGFibGUucmVwbwogICAgICAgY3VybCAtTCBodHRwOi8vZG93bmxvYWQub3BlbnN1c2Uub3JnL3JlcG9zaXRvcmllcy9kZXZlbDova3ViaWM6L2xpYmNvbnRhaW5lcnM6L3N0YWJsZTovY3JpLW86LyRDUklPX1ZFUlNJT04vQ2VudE9TXyR7VkVSU0lPTl9JRH0vZGV2ZWw6a3ViaWM6bGliY29udGFpbmVyczpzdGFibGU6Y3JpLW86MS4yMi5yZXBvID4gL2V0Yy95dW0ucmVwb3MuZC9kZXZlbDprdWJpYzpsaWJjb250YWluZXJzOnN0YWJsZTpjcmktbzoxLjIyLnJlcG8KZmkKCmVjaG8gIkFkZGluZyBrdWJlcm5ldGVzIHJlcG8uLi4uIgpjYXQgPDxFT0YgPiAvZXRjL3l1bS5yZXBvcy5kL2t1YmVybmV0ZXMucmVwbwpba3ViZXJuZXRlc10KbmFtZT1LdWJlcm5ldGVzCmJhc2V1cmw9aHR0cHM6Ly9wYWNrYWdlcy5jbG91ZC5nb29nbGUuY29tL3l1bS9yZXBvcy9rdWJlcm5ldGVzLWVsNy14ODZfNjQKZW5hYmxlZD0xCmdwZ2NoZWNrPTEKcmVwb19ncGdjaGVjaz0xCmdwZ2tleT1odHRwczovL3BhY2thZ2VzLmNsb3VkLmdvb2dsZS5jb20veXVtL2RvYy95dW0ta2V5LmdwZyBodHRwczovL3BhY2thZ2VzLmNsb3VkLmdvb2dsZS5jb20veXVtL2RvYy9ycG0tcGFja2FnZS1rZXkuZ3BnCkVPRgoKICAgaWYgWyAiJENSSVVTRUQiID0gImNvbnRhaW5lcmQiIF0KICAgdGhlbgogICAgICBlY2hvICJJbnN0YWxsaW5nIGNvbnRhaW5lcmQgcnVudGltZSBwYWNrYWdlLi4uIgogICAgICBzeXN0ZW1jdGwga2lsbCAtcyA5IGNyaW8gMj4vZGV2L251bGwKICAgICAgeXVtIHJlbW92ZSAteSBjcmktbwogICAgICB5dW0gcmVtb3ZlIC15IGNvbnRhaW5lcnMtY29tbW9uCiAgICAgIHJlbW92ZV9jcmlvX2RpcnMKICAgICAgZWNobyAiaW5zdGFsbGluZyBEb2NrZXIgY2UgYW5kIGNvbnRhaW5lcmQuLi4uIgogICAgICBlY2hvIC1lICIkKGN1cmwgLS1zaWxlbnQgaHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL2xpbnV4L2NlbnRvcy8ke1ZFUlNJT05fSUR9L3g4Nl82NC9zdGFibGUvUGFja2FnZXMvIHwgZ3JlcCAiYSBocmVmLioiIHwgc2VkICdzLzxbXj5cXSo+Ly9nJyAgfCBhd2sgJ3twcmludCAkMX0nKVxuIiA+IC90bXAvZG9ja2VycGtnbGlzdC5sc3QKICAgICAgaWYgWyAtZiAvdG1wL2RvY2tlcnBrZ2xpc3QubHN0IF0KICAgICAgdGhlbgogICAgICAgICAgIENPTlRBSU5FUkRWPSQoIGNhdCAvdG1wL2RvY2tlcnBrZ2xpc3QubHN0IHwgZ3JlcCAiY29udGFpbmVyZC4qIiB8IHNlZCAncy9bXjAtOVwuXC1dKi8vZzsgcy9eXC5cfF5bXC1dKi8vZycgfCBjdXQgLWYxLTMgLWQiLiIgfCBzb3J0IC1uIHwgdGFpbCAtMSkKICAgICAgICAgICBlY2hvICJMYXRlc3QgY29udGFpbmVyZCB2ZXJzaW9uIGlzICRDT05UQUlORVJEViIKICAgICAgICAgICBmb3IgUEtHVE9JTlNUQUxMIGluIGBjYXQgL3RtcC9kb2NrZXJwa2dsaXN0LmxzdCB8IGVncmVwICIuKiRDT05UQUlORVJEViJgCiAgICAgICAgICAgZG8KICAgICAgICAgICAgICBlY2hvICJJbnN0YWxsaW5nICRQS0dUT0lOU1RBTEwiCiAgICAgICAgICAgICAgeXVtIGluc3RhbGwgLXkgaHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL2xpbnV4L2NlbnRvcy8ke1ZFUlNJT05fSUR9L3g4Nl82NC9zdGFibGUvUGFja2FnZXMvJFBLR1RPSU5TVEFMTAogICAgICAgICAgIGRvbmUKICAgICAgZmkKICAgICAgZXhwb3J0IEtVQkVBRE1BUkc9Ii0tY3JpLXNvY2tldD11bml4Oi8vL3J1bi9jb250YWluZXJkL2NvbnRhaW5lcmQuc29jayIKICAgICAgZXhwb3J0IEtVQkVMRVRfRVhUUkFfQVJHUz0iLS1jZ3JvdXAtZHJpdmVyPXN5c3RlbWQiCiAgICAgIFtbIC1mIC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbCBdXSAmJiBybSAtZiAvZXRjL2NvbnRhaW5lcmQvY29uZmlnLnRvbWwKICAgICAgI2NvbnRhaW5lcmQgY29uZmlnIGRlZmF1bHQgfCBzZWQgInN8XlwoXHMqXClcKFxbcGx1Z2lucy4qY29udGFpbmVyZFwucnVudGltZXNcLnJ1bmNcLm9wdGlvbnNcXVwpfFwxXDJcblwxICBTeXN0ZW1kQ2dyb3VwID0gdHJ1ZXxnIiA+IC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbAogICAgICBzeXN0ZW1jdGwgc3RhcnQgY29udGFpbmVyZAogICBlbHNlCiAgICAgIGVjaG8gIkluc3RhbGxpbmcgY3JpbyBydW50aW1lIHBhY2thZ2UuLi4iCiAgICAgIHN5c3RlbWN0bCBraWxsIC1zIDkgY29udGFpbmVyZCAyPi9kZXYvbnVsbAogICAgICB5dW0gcmVtb3ZlIC15IGNvbnRhaW5lcmQuaW8KICAgICAgeXVtIHJlbW92ZSAteSBkb2NrZXItY2UKICAgICAgW1sgLWQgL2V0Yy9jb250YWluZXJkIF1dICYmIHJtIC1yZiAvZXRjL2NvbnRhaW5lcmQKICAgICAgcmVtb3ZlX2NvbnRhaW5lcmRfZGlycwogICAgICB5dW0gaW5zdGFsbCAteSBjcmktbyAKICAgICAgc2V0X2NyaW9fY2dyb3VwX21hbmFnZXIKICAgICAgZXhwb3J0IEtVQkVBRE1BUkc9Ii0tY3JpLXNvY2tldD11bml4Oi8vL3J1bi9jcmlvL2NyaW8uc29jayIKICAgICAgZXhwb3J0IEtVQkVMRVRfRVhUUkFfQVJHUz0iLS1jZ3JvdXAtZHJpdmVyPXN5c3RlbWQiCiAgICAgIGFkZF9jcmlvX25ldGNvbmZpZwogICAgICBzeXN0ZW1jdGwgc3RhcnQgY3JpbwogICBmaQoKCiAgIGVjaG8gIkluc3RhbGwga3ViZWxldCBrdWJlYWRtIGFuZCBrdWJlY3RsLi4uIgogICB5dW0gaW5zdGFsbCAteSBrdWJlbGV0IGt1YmVhZG0ga3ViZWN0bCAtLWRpc2FibGVleGNsdWRlcz1rdWJlcm5ldGVzCiAgIGVjaG8gIkluc3RhbGxpbmcgZWJ0YWJsZXMgYW5kIGV0aHRvb2wuLi4iCiAgIHl1bSBpbnN0YWxsIC15IGVidGFibGVzIGV0aHRvb2wKICAgZWNobyAiSW5zdGFsbCBrdWJlbGV0IGt1YmVhZG0gYW5kIGt1YmVjdGwuLi4iCiAgIHl1bSBpbnN0YWxsIC15IGt1YmVsZXQga3ViZWFkbSBrdWJlY3RsIC0tZGlzYWJsZWV4Y2x1ZGVzPWt1YmVybmV0ZXMKCiAgIHN5c3RlbWN0bCBkYWVtb24tcmVsb2FkCiAgIHN5c3RlbWN0bCByZXNldC1mYWlsZWQKCnNldCAreAp9CgppbnN0YWxsX3BrZ19zdXNlKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIHp5cHBlciAtbiB1cGRhdGUKICAgenlwcGVyIC1uIGluIGN1cmwgc29jYXQgZWJ0YWJsZXMKICAgenlwcGVyIC1uIGluIGJyaWRnZS11dGlscwogICB6eXBwZXIgYWRkcmVwbyBodHRwOi8vZG93bmxvYWQub3BlbnN1c2Uub3JnL3R1bWJsZXdlZWQvcmVwby9vc3Mgb3NzCiAgIHp5cHBlciByZWYKICAgenlwcGVyIC1uIGluIGt1YmVybmV0ZXMta3ViZWxldAogICB6eXBwZXIgLW4gaW4ga3ViZXJuZXRlcy1rdWJlbGV0LWNvbW1vbgogICB6eXBwZXIgLW4gaW4ga3ViZXJuZXRlcy1jbGllbnQKICAgenlwcGVyIC1uIGluIGt1YmVybmV0ZXMtY2xpZW50LWNvbW1vbgogICB6eXBwZXIgLW4gaW4ga3ViZXJuZXRlcy1jb250cm9sbGVyLW1hbmFnZXIKICAgenlwcGVyIC1uIGluIGt1YmVybmV0ZXMtZXRjZAogICB6eXBwZXIgLW4gaW4ga3ViZXJuZXRlcy1rdWJlYWRtCiAgIHp5cHBlciAtbiBpbiBrdWJlcm5ldGVzLXByb3h5CiAgIHp5cHBlciAtbiBpbiBrdWJlcm5ldGVzLXNjaGVkdWxlcgogICB6eXBwZXIgLW4gaW4gbGliY29udGFpbmVycy1jb21tb24KCiAgIGt1YmVhZG0gMj4vZGV2L251bGwgMT4vZGV2L251bGwKICAgW1sgJD8gLW5lIDAgXV0gJiYgZWNobyAiVW5hYmxlIHRvIGZpbmQga3ViZWFkbSBmaWxlLi4gZXhpdGluZy4uIiAmJiBleGl0IDEKICAgSzhTVkVSPSQoa3ViZWFkbSB2ZXJzaW9uIC1vIHNob3J0IHwgc2VkICdzL3YvL2cnKQogICBLOFNWRVJTSE9SVD0kKGVjaG8gJEs4U1ZFUiB8IGN1dCAtZjEtMiAtZC4pCgogICBpZiBbIC1mIC9ldGMvc3lzY29uZmlnL2t1YmVsZXQgXQogICB0aGVuCiAgICAgIGlmIFsgIiQoZ3JlcCBLVUJFTEVUX1ZFUiAvZXRjL3N5c2NvbmZpZy9rdWJlbGV0IHxjdXQgLWYyIC1kPSkiICE9ICIkSzhTVkVSU0hPUlQiIF0KICAgICAgdGhlbgogICAgICAgICBzZWQgLWkgInMvXCheS1VCRUxFVF9WRVI9XCkuKi9cMSR7SzhTVkVSU0hPUlR9L2ciIC9ldGMvc3lzY29uZmlnL2t1YmVsZXQKICAgICAgZmkKICAgZmkKCiAgIGlmIFsgLWQgL3Vzci9saWJleGVjL2NuaSBdCiAgIHRoZW4KICAgICAgW1sgLWQgL29wdC9jbmkvYmluIF1dICYmIGNwIC91c3IvbGliZXhlYy9jbmkvKiAvb3B0L2NuaS9iaW4KICAgZmkKICAgSzhTVkVSUEFSQU09Ii0ta3ViZXJuZXRlcy12ZXJzaW9uPSR7SzhTVkVSfSIKICAgaWYgWyAiJENSSVVTRUQiID0gImNvbnRhaW5lcmQiIF0KICAgdGhlbgogICAgICBlY2hvICJJbnN0YWxsaW5nIGNvbnRhaW5lcmQgcnVudGltZSBwYWNrYWdlLi4uIgogICAgICBzeXN0ZW1jdGwga2lsbCAtcyA5IGNyaW8gMj4vZGV2L251bGwKICAgICAgc3lzdGVtY3RsIGRpc2FibGUgY3JpbwogICAgICByZW1vdmVfbGlua2RpcnMgIi92YXIvbGliL2NvbnRhaW5lcnMiCiAgICAgIGVjaG8gIkxpbnV4ICRESVNUUk8gcHJlZmVyIHRvIHJ1biBDb250YWluZXIgcnVudGltZSBjcmlvIHJhdGhlciB0aGFuIGNvbnRhaW5lcmQuLiIKICAgICAgenlwcGVyIC1uIHJtIGRvY2tlciAKICAgICAgenlwcGVyIC1uIGluIGNvbnRhaW5lcmQKCiAgICAgIGlmIFsgJChncmVwIHJ1bnRpbWUtZW5kcG9pbnQgL2V0Yy9jcmljdGwueWFtbCAgfCBncmVwIGNvbnRhaW5lcmQgfCB3YyAtbCkgLWVxIDAgXQogICAgICB0aGVuCiAgICAgICAgIHNlZCAtaSAic3xcKF5ydW50aW1lLWVuZHBvaW50OlwpLip8XDEgdW5peDovLy9ydW4vY29udGFpbmVyZC9jb250YWluZXJkLnNvY2t8ZyIgL2V0Yy9jcmljdGwueWFtbAogICAgICBmaQogICAgICBpZiBbIC1mIC9ldGMvc3lzY29uZmlnL2t1YmVsZXQgXQogICAgICB0aGVuCiAgICAgICAgIGlmIFsgYGdyZXAgIktVQkVMRVRfRVhUUkFfQVJHUyIgL2V0Yy9zeXNjb25maWcva3ViZWxldCB8IHdjIC1sYCAtbmUgMCBdCiAgICAgICAgIHRoZW4KICAgICAgICAgICAgc2VkIC1pICJzfFwoXktVQkVMRVRfRVhUUkFfQVJHUz1cKS4qfFwxXCItLWNvbnRhaW5lci1ydW50aW1lPXJlbW90ZSAtLWNvbnRhaW5lci1ydW50aW1lLWVuZHBvaW50PXVuaXg6Ly8vcnVuL2NvbnRhaW5lcmQvY29udGFpbmVyZC5zb2NrIC0tcnVudGltZS1yZXF1ZXN0LXRpbWVvdXQ9MTVtIC0tY2dyb3VwLWRyaXZlcj1zeXN0ZW1kXCJ8ZyIgL2V0Yy9zeXNjb25maWcva3ViZWxldAogICAgICAgICBmaQogICAgICBmaQogICAgICAKICAgICAgZXhwb3J0IEtVQkVBRE1BUkc9Ii0tY3JpLXNvY2tldCB1bml4Oi8vL3J1bi9jb250YWluZXJkL2NvbnRhaW5lcmQuc29jayIKICAgICAgW1sgLWYgL2V0Yy9jb250YWluZXJkL2NvbmZpZy50b21sIF1dICYmIHJtIC1mIC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbAogICAgICAjY29udGFpbmVyZCBjb25maWcgZGVmYXVsdCB8IHNlZCAic3xeXChccypcKVwoXFtwbHVnaW5zLipjb250YWluZXJkXC5ydW50aW1lc1wucnVuY1wub3B0aW9uc1xdXCl8XDFcMlxuXDEgIFN5c3RlbWRDZ3JvdXAgPSB0cnVlfGciID4gL2V0Yy9jb250YWluZXJkL2NvbmZpZy50b21sCiAgICAgIHN5c3RlbWN0bCBzdGFydCBjb250YWluZXJkCiAgIGVsc2UKICAgICAgZWNobyAiSW5zdGFsbGluZyBjcmlvIHJ1bnRpbWUgcGFja2FnZS4uLiIKICAgICAgc3lzdGVtY3RsIGtpbGwgLXMgOSBjb250YWluZXJkIDI+L2Rldi9udWxsCiAgICAgIHp5cHBlciAtbiBybSBjb250YWluZXJkCiAgICAgIFtbIC1kIC9ldGMvY29udGFpbmVyZCBdXSAmJiBybSAtcmYgL2V0Yy9jb250YWluZXJkCiAgICAgIHJlbW92ZV9jb250YWluZXJkX2RpcnMKICAgICAgW1sgISAtZCAvdXNyL2xpYi9jbmkgXV0gJiYgbWtkaXIgLXAgL3Vzci9saWIvY25pCiAgICAgIHp5cHBlciAtbiBpbiBjcmktbwogICAgICBpZiBbICQoZ3JlcCBydW50aW1lLWVuZHBvaW50IC9ldGMvY3JpY3RsLnlhbWwgIHwgZ3JlcCBjcmlvIHwgd2MgLWwpIC1lcSAwIF0KICAgICAgdGhlbgogICAgICAgICBzZWQgLWkgInN8XChecnVudGltZS1lbmRwb2ludDpcKS4qfFwxIHVuaXg6Ly8vcnVuL2NyaW8vY3Jpby5zb2NrfGciIC9ldGMvY3JpY3RsLnlhbWwKICAgICAgZmkKICAgICAgaWYgWyAtZiAvZXRjL3N5c2NvbmZpZy9rdWJlbGV0IF0KICAgICAgdGhlbgogICAgICAgICBpZiBbIGBncmVwICJLVUJFTEVUX0VYVFJBX0FSR1MiIC9ldGMvc3lzY29uZmlnL2t1YmVsZXQgfCB3YyAtbGAgLW5lIDAgXQogICAgICAgICB0aGVuCiAgICAgICAgICAgIHNlZCAtaSAic3xcKF5LVUJFTEVUX0VYVFJBX0FSR1M9XCkuKnxcMVwiLS1jb250YWluZXItcnVudGltZT1yZW1vdGUgLS1jb250YWluZXItcnVudGltZS1lbmRwb2ludD11bml4Oi8vL3Zhci9ydW4vY3Jpby9jcmlvLnNvY2sgLS1ydW50aW1lLXJlcXVlc3QtdGltZW91dD0xNW0gLS1jZ3JvdXAtZHJpdmVyPXN5c3RlbWRcInxnIiAvZXRjL3N5c2NvbmZpZy9rdWJlbGV0CiAgICAgICAgIGZpCiAgICAgIGZpCiAgICAgIGV4cG9ydCBLVUJFQURNQVJHPSItLWNyaS1zb2NrZXQ9dW5peDovLy9ydW4vY3Jpby9jcmlvLnNvY2siCiAgICAgIGFkZF9jcmlvX25ldGNvbmZpZwogICAgICBzeXN0ZW1jdGwgc3RhcnQgY3JpbwogICBmaQogICBzeXN0ZW1jdGwgZGFlbW9uLXJlbG9hZAoKCgpzZXQgK3gKfQoKaW5zdGFsbF9wa2dfdWJ1bnR1KCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIGlmIFsgYGdyZXAgIl5lbl9VUy5VVEYtOCIgL2V0Yy9sb2NhbGUuZ2VuIHwgd2MgLWxgIC1lcSAwIF0KICAgdGhlbgogICAgICBlY2hvICJlbl9VUy5VVEYtOCBVVEYtOCIgPj4gIC9ldGMvbG9jYWxlLmdlbgogICAgICBkcGtnLXJlY29uZmlndXJlIGxvY2FsZXMKICAgZmkKCiAgIGVjaG8gIkNoZWNraW5nIGt1YmVybmV0ZXMgdmVyc2lvbi4uLiIKICAgSzhTVkVSPWBrdWJlbGV0IC0tdmVyc2lvbiAyPi9kZXYvbnVsbHwgc2VkIC1uICAncy8uKnZbMC05XS5cKFswLTldXCtcKS4vXDEvcCcgMj4vZGV2L251bGxgCiAgIFtbICRLOFNWRVIgLWx0IDE3MCBdXSAmJiBlY2hvICJSZW1vdmluZyBrdWJlcm5ldGVzIHZlcnNpb24gJEs4U1ZFUiBvbiBVQlVOVFUuLi4iICYmIGFwdCAtLXllcyBwdXJnZSBrdWJlKgogICBhcHQgLS15ZXMgaW5zdGFsbCBjdXJsIGxzYi1yZWxlYXNlCiAgIGN1cmwgLWZzU0wgaHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL2xpbnV4L3VidW50dS9ncGcgfCBhcHQta2V5IGFkZCAtCiAgIGN1cmwgLXNMIGh0dHBzOi8vcGFja2FnZXMuY2xvdWQuZ29vZ2xlLmNvbS9hcHQvZG9jL2FwdC1rZXkuZ3BnIHwgYXB0LWtleSBhZGQgLQoKICAgaWYgWyAhIC1mIC9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL2RldmVsOmt1YmljOmxpYmNvbnRhaW5lcnM6c3RhYmxlOmNyaS1vOiRDUklPX1ZFUlNJT04ubGlzdCBdCiAgIHRoZW4KICAgICAgIGVjaG8gImRlYiBodHRwczovL2Rvd25sb2FkLm9wZW5zdXNlLm9yZy9yZXBvc2l0b3JpZXMvZGV2ZWw6L2t1YmljOi9saWJjb250YWluZXJzOi9zdGFibGUveFVidW50dV8ke0ZVTExfVkVSU0lPTl9JRH0vIC8ifCB0ZWUgL2V0Yy9hcHQvc291cmNlcy5saXN0LmQvZGV2ZWw6a3ViaWM6bGliY29udGFpbmVyczpzdGFibGUubGlzdAogICAgICAgY3VybCAtTCBodHRwczovL2Rvd25sb2FkLm9wZW5zdXNlLm9yZy9yZXBvc2l0b3JpZXMvZGV2ZWw6L2t1YmljOi9saWJjb250YWluZXJzOi9zdGFibGUveFVidW50dV8ke0ZVTExfVkVSU0lPTl9JRH0vUmVsZWFzZS5rZXkgfCBzdWRvIGFwdC1rZXkgYWRkIC0KICAgICAgIGVjaG8gImRlYiBodHRwOi8vZG93bmxvYWQub3BlbnN1c2Uub3JnL3JlcG9zaXRvcmllcy9kZXZlbDova3ViaWM6L2xpYmNvbnRhaW5lcnM6L3N0YWJsZTovY3JpLW86LyRDUklPX1ZFUlNJT04veFVidW50dV8ke0ZVTExfVkVSU0lPTl9JRH0vIC8ifHN1ZG8gdGVlIC9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL2RldmVsOmt1YmljOmxpYmNvbnRhaW5lcnM6c3RhYmxlOmNyaS1vOiRDUklPX1ZFUlNJT04ubGlzdAogICAgICAgY3VybCAtTCBodHRwczovL2Rvd25sb2FkLm9wZW5zdXNlLm9yZy9yZXBvc2l0b3JpZXMvZGV2ZWw6L2t1YmljOi9saWJjb250YWluZXJzOi9zdGFibGUveFVidW50dV8ke0ZVTExfVkVSU0lPTl9JRH0vUmVsZWFzZS5rZXkgfCBzdWRvIGFwdC1rZXkgYWRkIC0KICAgZmkKCiAgIGlmIFsgISAtZiAvZXRjL2FwdC9zb3VyY2VzLmxpc3QuZC9kb2NrZXIubGlzdCBdCiAgIHRoZW4KICAgICAgIGVjaG8gImRlYiBbYXJjaD1hbWQ2NF0gaHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL2xpbnV4L3VidW50dS8gJChsc2JfcmVsZWFzZSAtY3MpIHN0YWJsZSIgPiAvZXRjL2FwdC9zb3VyY2VzLmxpc3QuZC9kb2NrZXIubGlzdAogICBmaQogICBpZiBbICEgLWYgL2V0Yy9hcHQvc291cmNlcy5saXN0LmQva3ViZXJuZXRlcy5saXN0IF0KICAgdGhlbgogICAgICBLOFNSRVBPPWBjdXJsIC1MIGh0dHA6Ly9hcHQua3ViZXJuZXRlcy5pby9kaXN0cyB8IGdyZXAgImt1YmVybmV0ZXMtJChsc2JfcmVsZWFzZSAtY3MpIiB8IHNlZCAncy8uKj5cKFthLXpcLV1cK1wpPC4qL1wxL2cnIHwgZ3JlcCAtRXYgJ3VwZGF0ZXx1bnN0YWJsZSdgCiAgICAgIFtbICIkSzhTUkVQTyIgPSAiIiBdXSAmJiBLOFNSRVBPPSJrdWJlcm5ldGVzLXhlbmlhbCIKICAgICAgY2F0IDw8RU9GID4vZXRjL2FwdC9zb3VyY2VzLmxpc3QuZC9rdWJlcm5ldGVzLmxpc3QKZGViIGh0dHA6Ly9hcHQua3ViZXJuZXRlcy5pby8gJEs4U1JFUE8gbWFpbgpFT0YKICAgZmkKICAgYXB0LWdldCB1cGRhdGUgLXEKICAgYXB0IC0teWVzIGluc3RhbGwgYXB0LXRyYW5zcG9ydC1odHRwcyBzb2Z0d2FyZS1wcm9wZXJ0aWVzLWNvbW1vbiBzZWxpbnV4LXV0aWxzIGVidGFibGVzIGV0aHRvb2wKICAgYXB0LWdldCBpbnN0YWxsIC1xIC15IHB5dGhvbjMgcHl0aG9uMy1waXAgcHl0aG9uMy1kZXYgbG9jYWxlcyBicmlkZ2UtdXRpbHMKICAgYXB0LWdldCBpbnN0YWxsIC1xIC15IGxpYmtyYjUtZGV2IGxpYnNxbGl0ZTMtZGV2IHVuaXhvZGJjLWRldgogICBhcHQtZ2V0IGluc3RhbGwgLXEgLXkga3ViZWxldCBrdWJlYWRtIGt1YmVjdGwKICAgYXB0LWdldCBpbnN0YWxsIC1xIC15IGNwcAogICBpZiBbICIkQ1JJVVNFRCIgPSAiY29udGFpbmVyZCIgXQogICB0aGVuCiAgICAgIGVjaG8gIkluc3RhbGxpbmcgY29udGFpbmVyZCBydW50aW1lIHBhY2thZ2UuLi4iCiAgICAgIHN5c3RlbWN0bCBraWxsIC1zIDkgY3JpbyAyPi9kZXYvbnVsbAogICAgICBhcHQgLS15ZXMgcHVyZ2UgY3JpLW8KICAgICAgYXB0IC0teWVzIHB1cmdlIGNyaS1vLXJ1bmMKICAgICAgYXB0IC0teWVzIHB1cmdlIGNvbnRhaW5lcnMtY29tbW9uCiAgICAgIHJlbW92ZV9jcmlvX2RpcnMKICAgICAgYXB0LWdldCBpbnN0YWxsIC0teWVzIGNvbnRhaW5lcmQuaW8KICAgICAgZXhwb3J0IEtVQkVBRE1BUkc9Ii0tY3JpLXNvY2tldD11bml4Oi8vL3J1bi9jb250YWluZXJkL2NvbnRhaW5lcmQuc29jayIKICAgICAgW1sgLWYgL2V0Yy9jb250YWluZXJkL2NvbmZpZy50b21sIF1dICYmIHJtIC1mIC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbAogICAgICAjY29udGFpbmVyZCBjb25maWcgZGVmYXVsdCB8IHNlZCAic3xeXChccypcKVwoXFtwbHVnaW5zLipjb250YWluZXJkXC5ydW50aW1lc1wucnVuY1wub3B0aW9uc1xdXCl8XDFcMlxuXDEgIFN5c3RlbWRDZ3JvdXAgPSB0cnVlfGciID4gL2V0Yy9jb250YWluZXJkL2NvbmZpZy50b21sCiAgICAgIHN5c3RlbWN0bCBzdGFydCBjb250YWluZXJkCiAgIGVsc2UKICAgICAgZWNobyAiSW5zdGFsbGluZyBjcmlvIHJ1bnRpbWUgcGFja2FnZS4uLiIKICAgICAgc3lzdGVtY3RsIGtpbGwgLXMgOSBjb250YWluZXJkIDI+L2Rldi9udWxsCiAgICAgIGFwdCAtLXllcyBwdXJnZSBjb250YWluZXJkLmlvCiAgICAgIFtbIC1kIC9ldGMvY29udGFpbmVyZCBdXSAmJiBybSAtcmYgL2V0Yy9jb250YWluZXJkCiAgICAgIHJlbW92ZV9jb250YWluZXJkX2RpcnMKICAgICAgYXB0IC0teWVzIGluc3RhbGwgY3JpLW8gY3JpLW8tcnVuYwogICAgICBleHBvcnQgS1VCRUFETUFSRz0iLS1jcmktc29ja2V0PXVuaXg6Ly8vcnVuL2NyaW8vY3Jpby5zb2NrIgogICAgICBhZGRfY3Jpb19uZXRjb25maWcKICAgICAgc3lzdGVtY3RsIHN0YXJ0IGNyaW8KICAgZmkKICAgc3lzdGVtY3RsIGRhZW1vbi1yZWxvYWQKICAgc3lzdGVtY3RsIHJlc2V0LWZhaWxlZAoKICAgbG9jYWxlLWdlbiBlbl9VUy5VVEYtOAogICBQSVA9cGlwMwoKc2V0ICt4Cn0KCnJlbW92ZV9saW5rZGlycygpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAogIGxvY2FsIERJUk5BTUU9IiQxIgogIGlmIFsgLUwgIiRESVJOQU1FIiBdCiAgdGhlbgogICAgIERJUjJERUw9JChyZWFkbGluayAkRElSTkFNRSkKICAgICBbWyAiJERJUjJERUwiICE9ICIiIF1dICYmIGVjaG8gIlJlbW92aW5nICRESVIyREVMIC4uLiIgJiYgcm0gLXJmICIkRElSMkRFTCIKICAgICBlY2hvICJSZW1vdmluZyBsaW5rICRESVJOQU1FIC4uLiIKICAgICBybSAtZiAiJERJUk5BTUUiCiAgZWxzZQogICAgIFtbIC1kICIkRElSTkFNRSIgXV0gJiYgZWNobyAiUmVtb3ZpbmcgJERJUk5BTUUgLi4iICYmIHJtIC1yZiAiJERJUk5BTUUiCiAgZmkKc2V0ICt4Cn0KCnJlbW92ZV9jcmlvX2RpcnMoKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKICAgICAgZWNobyAiUmVtb3ZpbmcgY3JpbyBkaXJlY3Rvcmllcy4uLiIKICAgICAgW1sgLWQgL2V0Yy9jcmlvIF1dICYmIHJtIC1yZiAvZXRjL2NyaW8KICAgICAgW1sgLWQgL3Zhci9ydW4vY3JpbyBdXSAmJiBybSAtcmYgL3Zhci9ydW4vY3JpbwogICAgICBbWyAtZCAvZXRjL2NvbnRhaW5lcnMgXV0gJiYgcm0gLXJmIC9ldGMvY29udGFpbmVycwogICAgICByZW1vdmVfbGlua2RpcnMgIi92YXIvbGliL2NvbnRhaW5lcnMiCiAgICAgIHJlbW92ZV9saW5rZGlycyAiL3J1bi9jb250YWluZXJzIgpzZXQgK3gKfQoKcmVtb3ZlX2NvbnRhaW5lcmRfZGlycygpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAogICAgICBlY2hvICJSZW1vdmluZyBjb250YWluZXJkIGRpcmVjdG9yaWVzLi4uIgogICAgICBbWyAtZCAvZXRjL2NvbnRhaW5lcmQgXV0gJiYgcm0gLXJmIC9ldGMvY29udGFpbmVyZAogICAgICByZW1vdmVfbGlua2RpcnMgIi92YXIvbGliL2NvbnRhaW5lcmQiCiAgICAgIHJlbW92ZV9saW5rZGlycyAiL3J1bi9jb250YWluZXJkIgpzZXQgK3gKfQoKaW5zdGFsbF9wa2dfZGViaWFuKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIGlmIFsgYGdyZXAgIl5lbl9VUy5VVEYtOCIgL2V0Yy9sb2NhbGUuZ2VuIHwgd2MgLWxgIC1lcSAwIF0KICAgdGhlbgogICAgICBlY2hvICJlbl9VUy5VVEYtOCBVVEYtOCIgPj4gIC9ldGMvbG9jYWxlLmdlbgogICAgICBkcGtnLXJlY29uZmlndXJlIGxvY2FsZXMKICAgZmkKCiAgIGlmIFsgLWYgL3Zhci9saWIvZHBrZy9sb2NrIF0KICAgdGhlbgogICAgICBybSAtZiAvdmFyL2xpYi9kcGtnL2xvY2sKICAgICAgZHBrZyAtLWNvbmZpZ3VyZSAtYQogICBmaQoKICAgZWNobyAiQ2hlY2tpbmcga3ViZXJuZXRlcyB2ZXJzaW9uLi4uIgogICBLOFNWRVI9YGt1YmVsZXQgLS12ZXJzaW9uIDI+L2Rldi9udWxsfCBzZWQgLW4gICdzLy4qdlswLTldLlwoWzAtOV1cK1wpLi9cMS9wJ2AKICAgW1sgJEs4U1ZFUiAtbHQgMTcwIF1dICYmIGVjaG8gIlJlbW92aW5nIGt1YmVybmV0ZXMgdmVyc2lvbiAkSzhTVkVSIG9uIERFQklBTi4uLiIgJiYgYXB0IC0teWVzIHB1cmdlIGt1YmUqCiAgIGFwdCAtLXllcyBpbnN0YWxsIGN1cmwgbHNiLXJlbGVhc2UKICAgaWYgWyAkVkVSU0lPTl9JRCAtZ2UgMTAgXQogICB0aGVuCiAgICAgIGFwdCAtLXllcyBwdXJnZSBpcHRhYmxlcyAmJiBhcHQgLS15ZXMgaW5zdGFsbCBnbnVwZzIKICAgZmkKICAgYXB0LWdldCB1cGRhdGUKICAgYXB0LWdldCBpbnN0YWxsIC15IGF6ZGF0YS1jbGkKICAgY3VybCAtZnNTTCBodHRwczovL2Rvd25sb2FkLmRvY2tlci5jb20vbGludXgvZGViaWFuL2dwZyB8IGFwdC1rZXkgYWRkIC0KICAgY3VybCAtc0wgaHR0cHM6Ly9wYWNrYWdlcy5jbG91ZC5nb29nbGUuY29tL2FwdC9kb2MvYXB0LWtleS5ncGcgfCBhcHQta2V5IGFkZCAtCiAgIGlmIFsgISAtZiAvZXRjL2FwdC9zb3VyY2VzLmxpc3QuZC9kb2NrZXIubGlzdCBdCiAgIHRoZW4KICAgICAgIGVjaG8gImRlYiBbYXJjaD1hbWQ2NF0gaHR0cHM6Ly9kb3dubG9hZC5kb2NrZXIuY29tL2xpbnV4L2RlYmlhbi8gJChsc2JfcmVsZWFzZSAtY3MpIHN0YWJsZSIgPiAvZXRjL2FwdC9zb3VyY2VzLmxpc3QuZC9kb2NrZXIubGlzdAogICBmaQoKICAgaWYgWyAhIC1mIC9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL2RldmVsOmt1YmljOmxpYmNvbnRhaW5lcnM6c3RhYmxlOmNyaS1vOiRDUklPX1ZFUlNJT04ubGlzdCBdCiAgIHRoZW4KICAgICAgIGVjaG8gImRlYiBodHRwczovL2Rvd25sb2FkLm9wZW5zdXNlLm9yZy9yZXBvc2l0b3JpZXMvZGV2ZWw6L2t1YmljOi9saWJjb250YWluZXJzOi9zdGFibGUvRGViaWFuXyR7VkVSU0lPTl9JRH0vIC8ifCB0ZWUgL2V0Yy9hcHQvc291cmNlcy5saXN0LmQvZGV2ZWw6a3ViaWM6bGliY29udGFpbmVyczpzdGFibGUubGlzdAogICAgICAgY3VybCAtTCBodHRwczovL2Rvd25sb2FkLm9wZW5zdXNlLm9yZy9yZXBvc2l0b3JpZXMvZGV2ZWw6L2t1YmljOi9saWJjb250YWluZXJzOi9zdGFibGUvRGViaWFuXyR7VkVSU0lPTl9JRH0vUmVsZWFzZS5rZXkgfCBzdWRvIGFwdC1rZXkgYWRkIC0KICAgICAgIGVjaG8gImRlYiBodHRwOi8vZG93bmxvYWQub3BlbnN1c2Uub3JnL3JlcG9zaXRvcmllcy9kZXZlbDova3ViaWM6L2xpYmNvbnRhaW5lcnM6L3N0YWJsZTovY3JpLW86LyRDUklPX1ZFUlNJT04vRGViaWFuXyR7VkVSU0lPTl9JRH0vIC8ifHN1ZG8gdGVlIC9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL2RldmVsOmt1YmljOmxpYmNvbnRhaW5lcnM6c3RhYmxlOmNyaS1vOiRDUklPX1ZFUlNJT04ubGlzdAogICAgICAgY3VybCAtTCBodHRwczovL2Rvd25sb2FkLm9wZW5zdXNlLm9yZy9yZXBvc2l0b3JpZXMvZGV2ZWw6L2t1YmljOi9saWJjb250YWluZXJzOi9zdGFibGUvRGViaWFuXyR7VkVSU0lPTl9JRH0vUmVsZWFzZS5rZXkgfCBzdWRvIGFwdC1rZXkgYWRkIC0KCiAgIGZpCgogICBpZiBbICEgLWYgL2V0Yy9hcHQvc291cmNlcy5saXN0LmQva3ViZXJuZXRlcy5saXN0IF0KICAgdGhlbgogICAgICBjYXQgPDxFT0YgPi9ldGMvYXB0L3NvdXJjZXMubGlzdC5kL2t1YmVybmV0ZXMubGlzdApkZWIgaHR0cDovL2FwdC5rdWJlcm5ldGVzLmlvLyBrdWJlcm5ldGVzLXhlbmlhbCBtYWluCkVPRgogICBmaQogICBjYXNlICIkVkVSU0lPTl9JRCIgaW4KICAgMTApCiAgICAgICBhcHQtZ2V0IHVwZGF0ZSAtdCBidXN0ZXItYmFja3BvcnRzCiAgICAgICA7OwogICAqKSAgYXB0LWdldCB1cGRhdGUgLXEKICAgICAgIDs7CiAgIGVzYWMKICAgYXB0IC0teWVzIGluc3RhbGwgYXB0LXRyYW5zcG9ydC1odHRwcyBjYS1jZXJ0aWZpY2F0ZXMgZ251cGcyIHNvZnR3YXJlLXByb3BlcnRpZXMtY29tbW9uIHNlbGludXgtdXRpbHMgZWJ0YWJsZXMgZXRodG9vbAogICBhcHQtZ2V0IGluc3RhbGwgLS15ZXMgcHl0aG9uMyBweXRob24zLXBpcCBweXRob24zLWRldiBsb2NhbGVzIGJyaWRnZS11dGlscwoKICAgaWYgWyAiJENSSVVTRUQiID0gImNvbnRhaW5lcmQiIF0KICAgdGhlbgogICAgICBlY2hvICJJbnN0YWxsaW5nIGNvbnRhaW5lcmQgcnVudGltZSBwYWNrYWdlLi4uIgogICAgICBzeXN0ZW1jdGwga2lsbCAtcyA5IGNyaW8gMj4vZGV2L251bGwKICAgICAgYXB0IC0teWVzIHB1cmdlIGNyaS1vCiAgICAgIGFwdCAtLXllcyBwdXJnZSBjcmktby1ydW5jCiAgICAgIGFwdCAtLXllcyBwdXJnZSBjb250YWluZXJzLWNvbW1vbgogICAgICByZW1vdmVfY3Jpb19kaXJzCiAgICAgIGFwdC1nZXQgaW5zdGFsbCAtLXllcyBjb250YWluZXJkLmlvCiAgICAgIGV4cG9ydCBLVUJFQURNQVJHPSItLWNyaS1zb2NrZXQ9dW5peDovLy9ydW4vY29udGFpbmVyZC9jb250YWluZXJkLnNvY2siCiAgICAgIFtbIC1mIC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbCBdXSAmJiBybSAtZiAvZXRjL2NvbnRhaW5lcmQvY29uZmlnLnRvbWwKICAgICAgI2NvbnRhaW5lcmQgY29uZmlnIGRlZmF1bHQgfCBzZWQgInN8XlwoXHMqXClcKFxbcGx1Z2lucy4qY29udGFpbmVyZFwucnVudGltZXNcLnJ1bmNcLm9wdGlvbnNcXVwpfFwxXDJcblwxICBTeXN0ZW1kQ2dyb3VwID0gdHJ1ZXxnIiA+IC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbAogICAgICBzeXN0ZW1jdGwgc3RhcnQgY29udGFpbmVyZAogICBlbHNlCiAgICAgIGVjaG8gIkluc3RhbGxpbmcgY3JpbyBydW50aW1lIHBhY2thZ2UuLi4iCiAgICAgIHN5c3RlbWN0bCBraWxsIC1zIDkgY29udGFpbmVyZCAyPi9kZXYvbnVsbAogICAgICBhcHQgLS15ZXMgcHVyZ2UgY29udGFpbmVyZC5pbwogICAgICByZW1vdmVfY29udGFpbmVyZF9kaXJzCiAgICAgIGFwdCAtLXllcyBpbnN0YWxsIGNyaS1vIGNyaS1vLXJ1bmMKCiAgICAgIGV4cG9ydCBLVUJFQURNQVJHPSItLWNyaS1zb2NrZXQ9dW5peDovLy9ydW4vY3Jpby9jcmlvLnNvY2siCiAgICAgIGFkZF9jcmlvX25ldGNvbmZpZwogICAgICBzeXN0ZW1jdGwgc3RhcnQgY3JpbwogICBmaQoKICAgYXB0LWdldCB1cGRhdGUgLXEKICAgYXB0LWdldCBpbnN0YWxsIC15IGxpYmtyYjUtZGV2IGxpYnNxbGl0ZTMtZGV2IHVuaXhvZGJjLWRldgogICBhcHQtZ2V0IGluc3RhbGwgLXkga3ViZWxldCBrdWJlYWRtIGt1YmVjdGwKICAgYXB0LWdldCBpbnN0YWxsIC15IGxpYnNzbC1kZXYKICAgYXB0LWdldCBpbnN0YWxsIC15IGNwcAogICBzeXN0ZW1jdGwgZGFlbW9uLXJlbG9hZAogICBzeXN0ZW1jdGwgcmVzZXQtZmFpbGVkCgogICBsb2NhbGUtZ2VuIGVuX1VTLlVURi04CiAgIFBJUD1waXAzCgpzZXQgK3gKfQoKCmluc3RhbGxfcGtnX2FyY2hsaW51eCgpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAogICB3aGlsZSBbWyBgcHMgLWVmIHwgZ3JlcCAicGFjbWFuICIgfCBncmVwIC12IGdyZXAgfCB3YyAtbGAgLW5lIDAgXV0KICAgZG8KICAgICAgZWNobyAiV2FpdGluZyBmb3IgcGFjbWFuIHRvIGZpbmlzaCEhIgogICAgICBzbGVlcCA1CiAgIGRvbmUKICAgW1sgLWYgL3Zhci9saWIvcGFjbWFuL2RiLmxjayBdXSAmJiBybSAtZiAvdmFyL2xpYi9wYWNtYW4vZGIubGNrCiAgIHBhY21hbiAtU3kgYXJjaGxpbnV4LWtleXJpbmcgLS1ub2NvbmZpcm0KICAgcGFjbWFuIC1TeXUgLS1ub2NvbmZpcm0KCmlmIFsgJChwYWNtYW4gLVEgaXB0YWJsZXMgfCBhd2sgJ3twcmludCAkMX0nKSA9ICJpcHRhYmxlcyIgXQogICB0aGVuCiAgICAgIHBhY21hbiAtU3kgaXB0YWJsZXMtbmZ0IDw8IQp5CnkKWQohCgogICBmaQogICBwYWNtYW4gLVN5IC0tbm9jb25maXJtIGt1YmUtYXBpc2VydmVyIGt1YmUtY29udHJvbGxlci1tYW5hZ2VyIGt1YmUtcHJveHkga3ViZS1zY2hlZHVsZXIga3ViZWFkbSBrdWJlY3RsIGt1YmVsZXQga3ViZXJuZXRlcy1jb250cm9sLXBsYW5lLWNvbW1vbiBjcmljdGwKICAgaWYgWyAiJENSSVVTRUQiID0gImNvbnRhaW5lcmQiIF0KICAgdGhlbgogICAgICBlY2hvICJJbnN0YWxsaW5nIGNvbnRhaW5lcmQgcnVudGltZSBwYWNrYWdlLi4uIgogICAgICBzeXN0ZW1jdGwga2lsbCAtcyA5IGNyaW8gMj4vZGV2L251bGwKICAgICAgcGFjbWFuIC1ScyAtLW5vY29uZmlybSBjcmktbwogICAgICBwYWNtYW4gLVJzIC0tbm9jb25maXJtIHJ1bmMKICAgICAgcmVtb3ZlX2NyaW9fZGlycwogICAgICBwYWNtYW4gLVN5IC0tbm9jb25maXJtIGNvbnRhaW5lcmQKICAgICAgc3lzdGVtY3RsIHN0YXJ0IGNvbnRhaW5lcmQKICAgICAgZXhwb3J0IEtVQkVBRE1BUkc9Ii0tY3JpLXNvY2tldD11bml4Oi8vL3J1bi9jb250YWluZXJkL2NvbnRhaW5lcmQuc29jayIKICAgZWxzZQogICAgICBlY2hvICJJbnN0YWxsaW5nIGNyaW8gcnVudGltZSBwYWNrYWdlLi4uIgogICAgICBzeXN0ZW1jdGwga2lsbCAtcyA5IGNvbnRhaW5lcmQgMj4vZGV2L251bGwKICAgICAgcGFjbWFuIC1ScyAtLW5vY29uZmlybSBjb250YWluZXJkCiAgICAgIHNldF9jcmlvX2Nncm91cF9tYW5hZ2VyCiAgICAgIFtbIC1kIC9ldGMvY29udGFpbmVyZCBdXSAmJiBybSAtcmYgL2V0Yy9jb250YWluZXJkCiAgICAgIHJlbW92ZV9jb250YWluZXJkX2RpcnMKICAgICAgcGFjbWFuIC1TeSAtLW5vY29uZmlybSBjcmktbyBjcmljdGwgcnVuYwogICAgICBhZGRfY3Jpb19uZXRjb25maWcKICAgICAgc3lzdGVtY3RsIHN0YXJ0IGNyaW8KICAgICAgZXhwb3J0IEtVQkVBRE1BUkc9Ii0tY3JpLXNvY2tldD11bml4Oi8vL3J1bi9jcmlvL2NyaW8uc29jayIKICAgZmkKICAgcGFjbWFuIC1TeSAtLW5vY29uZmlybSBjdXJsIGdpdCBzdWRvIHdnZXQgZXRodG9vbCB1bnppcCBjb25udHJhY2stdG9vbHMgc29jYXQgY25pLXBsdWdpbnMKICAgcGFjbWFuIC1TeSAtLW5vY29uZmlybSBweXRob24gZmFrZXJvb3QgYmludXRpbHMKICAgd2dldCBodHRwczovL2Jvb3RzdHJhcC5weXBhLmlvL2dldC1waXAucHkgLU8gL3RtcC9nZXQtcGlwLnB5CiAgIHB5dGhvbiAvdG1wL2dldC1waXAucHkKICAgcGFjbWFuIC1TeSAtLW5vY29uZmlybSBzcWxpdGUgdW5peG9kYmMga3JiNSBnY2MKICAgcGFjbWFuIC1TYyAtLW5vY29uZmlybQogICBbWyBgZ3JlcCAiZ2l0ICIgL2V0Yy9zdWRvZXJzIHwgd2MgLWxgIC1lcSAwIF1dICYmIGVjaG8gImdpdCBBTEw9KEFMTCkgICBOT1BBU1NXRDogQUxMIiA+PiAvZXRjL3N1ZG9lcnMKICAgZXhwb3J0IEtVQkVMRVRfQVJHUz0iLS1jZ3JvdXAtZHJpdmVyPSRDR1JPVVAiCgogICBQSVA9cGlwCgpzZXQgK3gKfQoKaW5zdGFsbF9wa2coKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKICAgbG9jYWwgUEtHTkFNRT0iJDEiCiAgIGdldF9kaXN0cm9fdmVyc2lvbgogICBjYXNlICIkRElTVFJPIiBpbgogICAgIkNFTlRPUyJ8IlJIRUwiKQogICAgICAgICAgICBpZiBbICIkUEtHTkFNRSIgPSAic3NocGFzcyIgXQogICAgICAgICAgICB0aGVuCiAgICAgICAgICAgICAgIHl1bSAteSBpbnN0YWxsIGh0dHBzOi8vY2JzLmNlbnRvcy5vcmcva29qaWZpbGVzL3BhY2thZ2VzL3NzaHBhc3MvMS4wOS8xLmVsOHMveDg2XzY0L3NzaHBhc3MtMS4wOS0xLmVsOHMueDg2XzY0LnJwbQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgIHl1bSBpbnN0YWxsIC15ICRQS0dOQU1FCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIDs7CgogICAgIlVCVU5UVSIpCgkgICAgYXB0LWdldCB1cGRhdGUKICAgICAgICAgICAgYXB0LWdldCBpbnN0YWxsIC1xIC15ICRQS0dOQU1FCiAgICAgICAgICAgIDs7CiAgICAiQVJDSCIpCiAgICAgICAgICAgIHBhY21hbiAtU3kgLS1ub2NvbmZpcm0gJFBLR05BTUUKICAgICAgICAgICAgOzsKICAgICJERUJJQU4iKQogICAgICAgICAgICBhcHQtZ2V0IHVwZGF0ZQoJICAgIGFwdC1nZXQgaW5zdGFsbCAtcSAteSAkUEtHTkFNRQogICAgICAgICAgICA7OwogICAgKlNVU0UqKQoJICAgIHp5cHBlciAtbiBpbiAkUEtHTkFNRQogICAgICAgICAgICA7Owplc2FjCn0KCmluc3RhbGxfcHJlcmVxcygpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAoKW1sgIiQoZ3JlcCBQUkVSRVFTICRQUk9HUkVTU19GSUxFKSIgPSAiUFJFUkVRUyIgXV0gJiYgZWNobyAtZSAiPj4+Pj4+Pj4+PiBBbGwgcHJlcmVxdWlzaXRlcyBoYXZlIGJlZW4gaW5zdGFsbGVkIS4uIHNraXBwaW5nLi4uXG4iICYmIHJldHVybgpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiMKIwplY2hvICIiCmVjaG8gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiCmVjaG8gIiMjIyMjIyMjIEdhdGhlcmluZyBMaW51eCBEaXN0cm8gYW5kIEluc3RhbGxpbmcgUmVxdWlyZWQgcGFja2FnZXMgIyMjIyMjIyMiCmVjaG8gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiCgoKCmNhc2UgIiRESVNUUk8iIGluCiAgICAiQ0VOVE9TInwiUkhFTCIpCiAgICAgICAgICAgIGluc3RhbGxfcGtnX2NlbnRvcwogICAgICAgICAgICA7OwoKICAgICJVQlVOVFUiKQogICAgICAgICAgICBpbnN0YWxsX3BrZ191YnVudHUKICAgICAgICAgICAgOzsKICAgICJBUkNIIikKICAgICAgICAgICAgaW5zdGFsbF9wa2dfYXJjaGxpbnV4CiAgICAgICAgICAgIDs7CiAgICAiREVCSUFOIikKICAgICAgICAgICAgaW5zdGFsbF9wa2dfZGViaWFuCiAgICAgICAgICAgIDs7CiAgICAqU1VTRSopCiAgICAgICAgICAgIGluc3RhbGxfcGtnX3N1c2UKICAgICAgICAgICAgOzsKZXNhYwoKaWYgWyBgZ3JlcCAkVEhFVVNFUiAvZXRjL3Bhc3N3ZCB8IHdjIC1sYCAtZXEgMCBdCnRoZW4KICAgZWNobyAiQ3JlYXRpbmcgdXNlciAkVEhFVVNFUiAuLi4iCiAgIFtbICEgLWQgL2hvbWUvJFRIRVVTRVIgXV0gJiYgbWtkaXIgLXAgL2hvbWUvJFRIRVVTRVIKICAgdXNlcmFkZCAtVWQgL2hvbWUvJFRIRVVTRVIgJFRIRVVTRVIKZWxzZQogICBlY2hvICJDaGVja2luZyB1c2VyICRUSEVVU0VSIC4uLiIKICAgW1sgISAtZCAvaG9tZS8kVEhFVVNFUiBdXSAmJiBta2RpciAtcCAvaG9tZS8kVEhFVVNFUiAmJiB1c2VybW9kIC1kIC9ob21lLyRUSEVVU0VSICRUSEVVU0VSCmZpCgpbWyBgY2F0ICRQUk9HUkVTU19GSUxFIHwgZ3JlcCAiVVNFUj0iIHwgd2MgLWxgIC1lcSAwIF1dICYmIGVjaG8gIlVTRVI9JHtUSEVVU0VSfSIgPj4gJFBST0dSRVNTX0ZJTEUKW1sgYGdyZXAgIiR7VEhFVVNFUn0uKmJhc2giIC9ldGMvcGFzc3dkIHwgd2MgLWxgIC1lcSAwIF1dICYmIHVzZXJtb2QgLXMgL2Jpbi9iYXNoICRUSEVVU0VSCmNob3duIC1SaCAkKGdyZXAgIl4ke1RIRVVTRVJ9OiIgL2V0Yy9wYXNzd2QgfCBjdXQgLWYzLTQgLWQiOiIpIC9ob21lLyR7VEhFVVNFUn0KCiMgU2V0IFNFTGludXggaW4gcGVybWlzc2l2ZSBtb2RlIChlZmZlY3RpdmVseSBkaXNhYmxpbmcgaXQpCmVjaG8gIkNoZWNrIHNlbGludXggYW5kIGRpc2FibGUgaXQuLi4uLiIKU0VMSU5VWEZJTEU9L2V0Yy9zeXNjb25maWcvc2VsaW51eAp3aGljaCBnZXRlbmZvcmNlIDI+L2Rldi9udWxsCmlmIFsgJD8gLWVxIDAgXQp0aGVuCiAgIFtbICQoZ2V0ZW5mb3JjZSkgPSAnRW5mb3JjaW5nJyBdXSAmJiBzZXRlbmZvcmNlIDAgJiYgc2VkIC1pICdzL15TRUxJTlVYPWVuZm9yY2luZyQvU0VMSU5VWD1wZXJtaXNzaXZlLycgJFNFTElOVVhGSUxFCmVsc2UKICAgaWYgWyAtZiAkU0VMSU5VWEZJTEUgXQogICB0aGVuCiAgICAgIGlmIFsgYHNlZCAtbiAncy9eU0VMSU5VWFsgPV1cK1woW1s6YWxwaGE6XV1cK1wpLiokL1wxL3AnICRTRUxJTlVYRklMRSB8IGVncmVwICdkaXNhYmxlZHxwZXJtaXNzaXZlJyB8IHdjIC1sYCAtbmUgMCBdCiAgICAgIHRoZW4KICAgICAgICAgIHNldGVuZm9yY2UgMAogICAgICAgICAgc2VkIC1pICdzL15TRUxJTlVYPWVuZm9yY2luZyQvU0VMSU5VWD1wZXJtaXNzaXZlLycgJFNFTElOVVhGSUxFCiAgICAgIGZpCiAgIGZpCmZpCgpTRUxJTlVYRklMRTI9L2V0Yy9zZWxpbnV4L2NvbmZpZwppZiBbIC1mICRTRUxJTlVYRklMRTIgXQp0aGVuCiAgIHNlZCAtaSAncy9eU0VMSU5VWD1lbmZvcmNpbmckL1NFTElOVVg9cGVybWlzc2l2ZS8nICRTRUxJTlVYRklMRTIKZmkKCgplY2hvICJQYWNrYWdlcyBpbnN0YWxsZWQuIgoKIyBMb2FkIGFsbCBwcmUtcmVxdWlzaXRlcyBmb3IgS3ViZXJuZXRlcy4KIwplY2hvICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIgplY2hvICIjIyMjIyMjIyMjIyMjIyBTZXR0aW5nIHVwIHByZS1yZXF1aXNpdGVzIGZvciBLdWJlcm5ldGVzICMjIyMjIyMjIyMjIyMjIyMjIgplY2hvICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIgoKW1sgJChncmVwICQoaG9zdG5hbWUpIC9ldGMvaG9zdHMgfCB3YyAtbCkgLWVxIDAgXV0gJiYgZWNobyAiJChob3N0bmFtZSAtaSkgJChob3N0bmFtZSkiID4+IC9ldGMvaG9zdHMKCmVjaG8gIlN3YXAgbXVzdCBiZSB0dXJuZWQgb2ZmIGFuZCBtb2RpZnkgL2V0Yy9mc3RhYiB0byBleGNsdWRlIHN3YXAiCnN3YXBvZmYgLWEKc2VkIC1pICcvc3dhcC9zL15cKC4qXCkkLyNcMS9nJyAvZXRjL2ZzdGFiCgoKZWNobyAiRW5hYmxpbmcga3ViZWxldCBvbiBzeXN0ZW1kLi4uIgpzeXN0ZW1jdGwgZW5hYmxlIGt1YmVsZXQKCiMgSG9sZGluZyB0aGUgdmVyc2lvbiBvZiBrdWJlIHBhY2thZ2VzLgojCmVjaG8gIkRvd25sb2FkaW5nIGhlbG0uLi4iCmN1cmwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2t1YmVybmV0ZXMvaGVsbS9tYXN0ZXIvc2NyaXB0cy9nZXQgfCBiYXNoCgplY2hvIC1lICJvdmVybGF5XG5icl9uZXRmaWx0ZXIiID4gL2V0Yy9tb2R1bGVzLWxvYWQuZC9jb250YWluZXJkLmNvbmYKbW9kcHJvYmUgYnJfbmV0ZmlsdGVyCm1vZHByb2JlIG92ZXJsYXkKCiMgRGlzYWJsZSBJcHY2IGZvciBjbHVzdGVyIGVuZHBvaW50cy4KIwplY2hvICJBZGRpbmcgbmVjZXNzYXJ5IGtlcm5lbCBwYXJhbWV0ZXJzIHRvIC9ldGMvc3lzY3RsLmNvbmYuLi4iCmVjaG8gbmV0LmlwdjYuY29uZi5hbGwuZGlzYWJsZV9pcHY2PTEgPiAvZXRjL3N5c2N0bC5jb25mCmVjaG8gbmV0LmlwdjYuY29uZi5kZWZhdWx0LmRpc2FibGVfaXB2Nj0xID4+IC9ldGMvc3lzY3RsLmNvbmYKZWNobyBuZXQuaXB2Ni5jb25mLmxvLmRpc2FibGVfaXB2Nj0xID4+IC9ldGMvc3lzY3RsLmNvbmYKZWNobyBuZXQuYnJpZGdlLmJyaWRnZS1uZi1jYWxsLWlwdGFibGVzPTEgPj4gL2V0Yy9zeXNjdGwuY29uZgplY2hvIG5ldC5pcHY0LmlwX2ZvcndhcmQ9MSA+PiAvZXRjL3N5c2N0bC5jb25mCmVjaG8gbmV0LmJyaWRnZS5icmlkZ2UtbmYtY2FsbC1pcDZ0YWJsZXM9MSA+PiAvZXRjL3N5c2N0bC5jb25mCiNlY2hvIG5ldC5pcHY0LmNvbmYuYWxsLnJwX2ZpbHRlcj0yID4+IC9ldGMvc3lzY3RsLmNvbmYKI2VjaG8gbmV0LmlwdjQuY29uZi5kZWZhdWx0LnJwX2ZpbHRlcj0yID4+IC9ldGMvc3lzY3RsLmNvbmYKCgplY2hvICJBY3RpdmF0aW5nIGtlcm5lbCBwYXJhbWV0ZXJzLi4uIgpzeXNjdGwgLS1zeXN0ZW0Kc2V0ICt4CmVjaG8gIkt1YmVybmV0ZXMgcHJlLXJlcXVpc2l0ZXMgaGF2ZSBiZWVuIGNvbXBsZXRlZC4iCmVjaG8gUFJFUkVRUyA+PiAkUFJPR1JFU1NfRklMRQoKfQoKCmluc3RhbGxfY2FsaWNvX25mdGFibGVzKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgICB3Z2V0IC1PIC90bXAvY2FsaWNvLnlhbWwgJENBTElDTwogICAgc2VkIC1pICc6YTtOOyQhYmE7cy8jIERpc2FibGUgSVB2NiBvbiBLdWJlcm5ldGVzLlxuLyMgQWRkZWQgYnkgc2V0dXAtazhzIGZvciBuZnR0YWJsZVxuICAgICAgICAgICAgLSBuYW1lOiBGRUxJWF9JUFRBQkxFU0JBQ0tFTkRcbiAgICAgICAgICAgICAgdmFsdWU6ICJBdXRvIlxuL2cnIC90bXAvY2FsaWNvLnlhbWwKICAgIGVjaG8gIkluc3RhbGxpbmcgY2FsaWNvIG5mdGFibGVzIgogICAga3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgYXBwbHkgLWYgL3RtcC9jYWxpY28ueWFtbAp9CgoKaW5zdGFsbF9uZXR3b3JrKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CmVjaG8gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiCmVjaG8gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyAgSW5zdGFsbGluZyBOZXR3b3JrIHBsdWdpbiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiCmVjaG8gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiCiAgIGVjaG8gIkluc3RhbGxpbmcgQ05JIHBsdWdpbi4uLi4iCiAgIGNhc2UgIiRESVNUUk8iIGluIAogICAnREVCSUFOJykKCSAgIGlmIFsgIiRWRVJTSU9OX0lEIiAtZ2UgIjEwIiBdIAogICAgICAgICAgIHRoZW4KICAgICAgICAgICAgICAgI2VjaG8gIlRoaXMgbGludXggdmVyc2lvbiB1c2VzIG5mdGFibGVzLCB0aGVyZWZvcmUgY2FsaWNvIHBsdWdpbiBtdXN0IGJlIHVzZWQhIiAKICAgICAgICAgICAgICAgI2luc3RhbGxfY2FsaWNvX25mdGFibGVzCiAgICAgICAgICAgICAgIHVwZGF0ZS1hbHRlcm5hdGl2ZXMgLS1zZXQgaXB0YWJsZXMgL3Vzci9zYmluL2lwdGFibGVzLWxlZ2FjeQogICAgICAgICAgICAgICB1cGRhdGUtYWx0ZXJuYXRpdmVzIC0tc2V0IGlwNnRhYmxlcyAvdXNyL3NiaW4vaXA2dGFibGVzLWxlZ2FjeQogICAgICAgICAgICAgICBbWyAtZiAvdXNyL3NiaW4vYXJwdGFibGVzLWxlZ2FjeSBdXSAmJiB1cGRhdGUtYWx0ZXJuYXRpdmVzIC0tc2V0IGFycHRhYmxlcyAvdXNyL3NiaW4vYXJwdGFibGVzLWxlZ2FjeQogICAgICAgICAgICAgICB1cGRhdGUtYWx0ZXJuYXRpdmVzIC0tc2V0IGVidGFibGVzIC91c3Ivc2Jpbi9lYnRhYmxlcy1sZWdhY3kKICAgICAgICAgICAgICAgI3JldHVybgogICAgICAgICAgIGZpCiAgICAgICAgICAgOzsKICAgJ0NFTlRPUyd8J1JIRUwnKQoJICAgW1sgIiRWRVJTSU9OX0lEIiAtZ2UgIjgiIF1dICYmIGVjaG8gIlRoaXMgbGludXggdmVyc2lvbiB1c2VzIG5mdGFibGVzLi4uLi4uLi4uLi4uLi4uLiIKICAgICAgICAgICA7OwogICAqKQoJICAgZWNobyAiVXNpbmcgbmV0d29yayBwbHVnaW4gJENOSVBMVUdJTiIKICAgICAgICAgICA7OwogICBlc2FjCiAgIFtbICIkQ05JUExVR0lOIiA9ICJXRUFWRU5FVCIgXV0gJiYgQ05JUExVR0lOPSJodHRwczovL2Nsb3VkLndlYXZlLndvcmtzL2s4cy9uZXQ/azhzLXZlcnNpb249JChrdWJlY3RsIC0ta3ViZWNvbmZpZyAvZXRjL2t1YmVybmV0ZXMvYWRtaW4uY29uZiB2ZXJzaW9uIHwgYmFzZTY0IHwgdHIgLWQgJ1xuJykiICYmIC91c3IvbG9jYWwvYmluL3dlYXZlIHJlc2V0CiAgIFtbIC1mIC90bXAvd2VhdmUgXV0gJiYgL3RtcC93ZWF2ZSByZXNldCAmJiBybSAtZiAvdG1wL3dlYXZlCiAgIGt1YmVjdGwgLS1rdWJlY29uZmlnPS9ldGMva3ViZXJuZXRlcy9hZG1pbi5jb25mIGFwcGx5IC1mICRDTklQTFVHSU4KCn0KCmdldF9jcmlfcGFyYW0oKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKICAgaWYgWyAtUyAvcnVuL2NvbnRhaW5lcmQvY29udGFpbmVyZC5zb2NrIC1hICQocHMgLWVmIHxncmVwICdiaW4vY29udGFpbmVyZCd8Z3JlcCAtdiBncmVwfHdjIC1sKSAtbmUgMCBdCiAgIHRoZW4KICAgICAgQ1JJUEFSQU09Ii0tY3JpLXNvY2tldD11bml4Oi8vL3J1bi9jb250YWluZXJkL2NvbnRhaW5lcmQuc29jayIKICAgZWxpZiBbIC1TIC9ydW4vY3Jpby9jcmlvLnNvY2sgLWEgJChwcyAtZWYgfGdyZXAgJ2Jpbi9jcmlvJ3xncmVwIC12IGdyZXB8d2MgLWwpIC1uZSAwIF0KICAgdGhlbgogICAgICBDUklQQVJBTT0iLS1jcmktc29ja2V0PXVuaXg6Ly8vcnVuL2NyaW8vY3Jpby5zb2NrIgogICBlbHNlCiAgICAgIENSSVBBUkFNPSIiCiAgIGZpCn0KCnNldHVwX2s4cygpCnsKW1sgIiQoZ3JlcCBTRVRVUEs4UyAkUFJPR1JFU1NfRklMRSkiID0gIlNFVFVQSzhTIiBdXSAmJiBlY2hvIC1lICI+Pj4+Pj4+Pj4+IEt1YmVybmV0ZXMgaGFzIGJlZW4gaW5zdGFsbGVkIS4uIHNraXBwaW5nLi4uXG4iICYmIHJldHVybgpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CmVjaG8gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiCmVjaG8gIiMjIyMjIyMjIyMjIyMjIyMjIyMgIFNldHRpbmcgdXAgS3ViZXJuZXRlcyAkVEhFTk9ERSAgIyMjIyMjIyMjIyMjIyMjIyMjIyMiCmVjaG8gIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiCgoKaWYgWyAiJE1PREUiID0gImFkZC13b3JrZXIiIF0KdGhlbgogICBDVVJSSE9TVD0kKGt1YmVjdGwgZ2V0IG5vZGVzIC0tbm8taGVhZGVycz10cnVlIC0tb3V0cHV0PWN1c3RvbS1jb2x1bW5zPU5BTUU6Lm1ldGFkYXRhLm5hbWUgYGhvc3RuYW1lYCAyPi9kZXYvbnVsbCAxPi9kZXYvbnVsbCkKICAgW1sgIiRDVVJSSE9TVCIgIT0gIiIgXV0gJiYga3ViZWN0bCBkZWxldGUgbm9kZSAkQ1VSUkhPU1QKZmkKCmlmIFsgYHBzIC1lZiB8IGdyZXAgImJpbi9rdWJlbGV0IiB8IGdyZXAgLXYgZ3JlcCB8IHdjIC1sYCAtZ3QgMCBdCnRoZW4KICAgS1VCRVBJRD1gcHMgLWVvIHBpZCxjbWQgfCBncmVwICJiaW4va3ViZWxldCIgfCBncmVwIC12IGdyZXAgfCBhd2sgJ3twcmludCAkMX0nYAogICBbWyAiJEtVQkVQSUQiICE9ICIiIF1dICYmIGVjaG8gIktpbGxpbmcga3ViZWxldC4uLiIgJiYgc3lzdGVtY3RsIHN0b3Aga3ViZWxldCAmJiBraWxsIC05ICRLVUJFUElEIDI+L2Rldi9udWxsIDE+L2Rldi9udWxsCmZpCgppZiAoWyBgcHMgLWVmIHwgZ3JlcCAiYmluL2t1YmVsZXQiIHwgZ3JlcCAtdiBncmVwIHwgd2MgLWxgIC1sdCAyIF0gJiYgKFsgIiRNT0RFIiA9ICJyZXNldC1tYXN0ZXIiIF0gfHwgWyAiJE1PREUiID0gInJlc2V0LXNpbmdsZSIgXSkpIHx8IChbICIkTU9ERSIgPSAiYWRkLXdvcmtlciIgXSB8fCBbICIkTU9ERSIgPSAicmVzZXQtd29ya2VyIiBdKQp0aGVuCiAgIHN5c3RlbWN0bCByZXN0YXJ0IGt1YmVsZXQKICAgaXNfc2VydmljZV9hY3RpdmUgImt1YmVsZXQiCgogICBnZXRfY3JpX3BhcmFtCiAgIGVjaG8gIkV4ZWN1dGluZyBrdWJlYWRtIHJlc2V0ICR7Q1JJUEFSQU19IC1mIgogICBrdWJlYWRtIHJlc2V0ICR7Q1JJUEFSQU19IC1mIDw8RU9GCnkKRU9GCgoKCiAgIFtbIC1mIC9saWIvc3lzdGVtZC9zeXN0ZW0vY29udGFpbmVyZC5zZXJ2aWNlIHx8IC1mIC91c3IvbGliL3N5c3RlbWQvc3lzdGVtL2NvbnRhaW5lcmQuc2VydmljZSBdXSAmJiBzeXN0ZW1jdGwgc3RvcCBjb250YWluZXJkCiAgIFtbIC1mIC9saWIvc3lzdGVtZC9zeXN0ZW0vY3Jpby5zZXJ2aWNlIHx8IC1mIC91c3IvbGliL3N5c3RlbWQvc3lzdGVtL2NyaW8uc2VydmljZSBdXSAmJiBzeXN0ZW1jdGwgc3RvcCBjcmlvCiAgIFtbIC1mIC9saWIvc3lzdGVtZC9zeXN0ZW0vZG9rY2VyLnNlcnZpY2UgfHwgLWYgL3Vzci9saWIvc3lzdGVtZC9zeXN0ZW0vZG9rY2VyLnNlcnZpY2UgXV0gJiYgc3lzdGVtY3RsIHN0b3AgZG9ja2VyCgoKICAgS1VCRVBJRD1gcHMgLWVvIHBpZCxjbWQgfCBncmVwICJiaW4va3ViZWxldCIgfCBncmVwIC12IGdyZXAgfCBhd2sgJ3twcmludCAkMX0nYAogICBbWyAiJEtVQkVQSUQiICE9ICIiIF1dICYmIGVjaG8gIktpbGxpbmcga3ViZWxldC4uLiIgJiYgc3lzdGVtY3RsIHN0b3Aga3ViZWxldCAmJiBraWxsIC05ICRLVUJFUElEIDI+L2Rldi9udWxsIDE+L2Rldi9udWxsCiAgIENPTlRBSU5FUkRQSUQ9JChwcyAtZW8gcGlkLGNtZCB8IGVncmVwICJiaW4vY29udGFpbmVyZHxiaW4vY3Jpb3xiaW4vY29ubW9uIiB8IGdyZXAgLXYgZ3JlcCB8IGF3ayAne3ByaW50ICQxfScgMj4vZGV2L251bGwgKQogICB3aGlsZSBbICIkQ09OVEFJTkVSRFBJRCIgIT0gIiIgXQogICBkbwogICAgICBDT05UQUlORVJEUElEPSQocHMgLWVvIHBpZCxjbWQgfCBlZ3JlcCAiYmluL2NvbnRhaW5lcmR8YmluL2NyaW98YmluL2Nvbm1vbiIgfCBncmVwIC12IGdyZXAgfCBhd2sgJ3twcmludCAkMX0nIHwgdHIgJ1xuJyAnICcgMj4vZGV2L251bGwgKQogICAgICAgICBlY2hvICJLaWxsaW5nIGNvbnRhaW5lciBydW50aW1lIFBJRFM9JHtDT05UQUlORVJEUElEfS4uLiIKICAgICAgICAgZXZhbCAia2lsbCAtOSAkQ09OVEFJTkVSRFBJRCIgMj4vZGV2L251bGwgMT4vZGV2L251bGwKICAgICAgc2xlZXAgMgogICBkb25lCgoKICAgaXB0YWJsZXMgLUYgJiYgaXB0YWJsZXMgLXQgbmF0IC1GICYmIGlwdGFibGVzIC10IG1hbmdsZSAtRiAmJiBpcHRhYmxlcyAtWAogICB3aGljaCBuZnQKICAgW1sgJD8gLWVxIDAgXV0gJiYgbmZ0IGZsdXNoIHJ1bGVzZXQKCiAgIHJlbW92ZV9tb3VudHBvaW50cwogICByZXNldF9rdWJlYWRtCiAgIHJlbW92ZV9saW5rZGlycyAiL3Zhci9saWIva3ViZWxldCIKICAgI1tbICIkQ1JJVVNFRCIgPSAiY29udGFpbmVyZCIgXV0gJiYgcmVtb3ZlX2NyaW9fZGlycyB8fCByZW1vdmVfY29udGFpbmVyZF9kaXJzCiAgIHVtb3VudCAvdmFyL2xpYi9jb250YWluZXJzL3N0b3JhZ2Uvb3ZlcmxheSAyPi9kZXYvbnVsbAoKICAgI1JlbG9jYXRlIGt1YmVsZXQKICAgaWYgWyAiJEtVQkVTVE9SQUdFIiAhPSAiL3Zhci9saWIva3ViZWxldCIgXQogICB0aGVuCiAgICAgIGVjaG8gIlJlbG9jYXRpbmcgL3Zhci9saWIva3ViZWxldCB0byAkS1VCRVNUT1JBR0UgLi4uLiIKICAgICAgW1sgLWQgL3Zhci9saWIva3ViZWxldCBdXSAmJiBybSAtcmYgL3Zhci9saWIva3ViZWxldAogICAgICBta2RpciAtcCAkS1VCRVNUT1JBR0UKICAgICAgW1sgJD8gLW5lIDAgXV0gJiYgZWNobyAiRmFpbGVkIHRvIGNyZWF0ZSAkS1VCRVNUT1JBR0UsIGV4aXRpbmcuLi4iICYmIGV4aXQgMQogICAgICBsbiAtcyAkS1VCRVNUT1JBR0UgL3Zhci9saWIva3ViZWxldAogICBlbHNlCiAgICAgIGlmIFsgIiQocmVhZGxpbmsgIi92YXIvbGliL2t1YmVsZXQiKSIgIT0gIiIgXQogICAgICB0aGVuCiAgICAgICAgIHJtIC1mICIvdmFyL2xpYi9rdWJlbGV0IgogICAgICAgICBta2RpciAtcCAiL3Zhci9saWIva3ViZWxldCIKICAgICAgZWxzZQogICAgICAgICBbWyAhIC1kICIvdmFyL2xpYi9rdWJlbGV0IiBdXSAmJiBta2RpciAtcCAiL3Zhci9saWIva3ViZWxldCIKICAgICAgZmkKICAgZmkKCgogICBzeXN0ZW1jdGwgZGFlbW9uLXJlbG9hZAogICBzeXN0ZW1jdGwgcmVzdGFydCBrdWJlbGV0CgogICBpZiBbICIkQ1JJVVNFRCIgPSAiY3JpbyIgXQogICB0aGVuCgogICAgICBzeXN0ZW1jdGwgc3RvcCBjcmlvCiAgICAgIHJlbW92ZV9saW5rZGlycyAvdmFyL2xpYi9jb250YWluZXJzCiAgICAgIHJlbW92ZV9saW5rZGlycyAvcnVuL2NvbnRhaW5lcnMKICAgICAgI1JlbG9jYXRlIC92YXIvbGliL2NvbnRhaW5lcnMKICAgICAgaWYgWyAiJENPTlRBSU5FUlNUT1JBR0UiICE9ICIvdmFyL2xpYi9jb250YWluZXJzIiBdCiAgICAgIHRoZW4KICAgICAgICAgZWNobyAiUmVsb2NhdGluZyAvdmFyL2xpYi9jb250YWluZXJzIHRvICRDT05UQUlORVJTVE9SQUdFIC4uLi4iCiAgICAgICAgIFtbIC1kIC92YXIvbGliL2NvbnRhaW5lcnMgXV0gJiYgcm0gLXJmIC92YXIvbGliL2NvbnRhaW5lcnMKICAgICAgICAgbWtkaXIgLXAgJENPTlRBSU5FUlNUT1JBR0UKICAgICAgICAgW1sgJD8gLW5lIDAgXV0gJiYgZWNobyAiRmFpbGVkIHRvIGNyZWF0ZSAkQ09OVEFJTkVSU1RPUkFHRSwgZXhpdGluZy4uLiIgJiYgZXhpdCAxCiAgICAgICAgIGxuIC1zICRDT05UQUlORVJTVE9SQUdFIC92YXIvbGliL2NvbnRhaW5lcnMKCiAgICAgICAgIGlmIFsgLWQgJFJVTkNPTlRBSU5FUlMgXQogICAgICAgICB0aGVuCiAgICAgICAgICAgIFJVTkNPTlRBSU5FUlNVQj0kKGJhc2VuYW1lICR7UlVOQ09OVEFJTkVSU30pCiAgICAgICAgICAgIGVjaG8gIlJlbG9jYXRpbmcgL3J1bi9jb250YWluZXJzIHRvICRDT05UQUlORVJTVE9SQUdFLy4uL3J1biR7UlVOQ09OVEFJTkVSU1VCfSAuLi4uIgogICAgICAgICAgICBybSAtcmYgJFJVTkNPTlRBSU5FUlMKICAgICAgICAgICAgbWtkaXIgLXAgJENPTlRBSU5FUlNUT1JBR0UvLi4vcnVuJHtSVU5DT05UQUlORVJTVUJ9CiAgICAgICAgICAgIFtbICQ/IC1uZSAwIF1dICYmIGVjaG8gIkZhaWxlZCB0byBjcmVhdGUgJENPTlRBSU5FUlNUT1JBR0UvLi4vcnVuJHtSVU5DT05UQUlORVJTVUJ9LCBza2lwcGluZy4uLiIKICAgICAgICAgICAgbG4gLXMgIiRDT05UQUlORVJTVE9SQUdFLy4uL3J1biR7UlVOQ09OVEFJTkVSU1VCfSIgIiRSVU5DT05UQUlORVJTIgogICAgICAgIGZpCiAgICAgIGVsc2UKICAgICAgICBpZiBbICIkKHJlYWRsaW5rIC92YXIvbGliL2NvbnRhaW5lcnMgKSIgIT0gIiIgXQogICAgICAgIHRoZW4KICAgICAgICAgICBybSAtZiAiL3Zhci9saWIvY29udGFpbmVycyIKICAgICAgICAgICBta2RpciAtcCAiL3Zhci9saWIvY29udGFpbmVycyIKICAgICAgICBlbHNlCiAgICAgICAgICAgW1sgISAtZCAiL3Zhci9saWIvY29udGFpbmVycyIgXV0gJiYgbWtkaXIgLXAgIi92YXIvbGliL2NvbnRhaW5lcnMiCiAgICAgICAgZmkKICAgICAgICBpZiBbICIkKHJlYWRsaW5rIC9ydW4vY29udGFpbmVycykiICE9ICIiIF0KICAgICAgICB0aGVuCiAgICAgICAgICAgcm0gLWYgIi9ydW4vY29udGFpbmVycyIKICAgICAgICAgICBta2RpciAtcCAiL3J1bi9jb250YWluZXJzIgogICAgICAgIGVsc2UKICAgICAgICAgICBbWyAhIC1kICIvcnVuL2NvbnRhaW5lcnMiIF1dICYmIG1rZGlyIC1wICIvcnVuL2NvbnRhaW5lcnMiCiAgICAgICAgZmkKCiAgICAgIGZpCiAgICAgIGVjaG8gIlJlc3RhcnRpbmcgcnVudGltZSBjb250YWluZXIgY3Jpby4uLiIKICAgICAgc3lzdGVtY3RsIGVuYWJsZSBjcmlvCiAgICAgIHN5c3RlbWN0bCBzdGFydCBjcmlvCiAgICAgIGlzX3NlcnZpY2VfYWN0aXZlICJjcmlvIgogICBlbHNlCiAgICAgIHN5c3RlbWN0bCBzdG9wIGNvbnRhaW5lcmQKICAgICAgcmVtb3ZlX2xpbmtkaXJzICIvdmFyL2xpYi9jb250YWluZXJkIgogICAgICByZW1vdmVfbGlua2RpcnMgIi9ydW4vY29udGFpbmVyZCIKICAgICAgaWYgWyAiJENPTlRBSU5FUlNUT1JBR0UiICE9ICIvdmFyL2xpYi9jb250YWluZXJkIiBdCiAgICAgIHRoZW4KICAgICAgICAgZWNobyAiUmVsb2NhdGluZyAvdmFyL2xpYi9jb250YWluZXJkIHRvICRDT05UQUlORVJTVE9SQUdFIC4uLi4iCiAgICAgICAgIFtbIC1kIC92YXIvbGliL2NvbnRhaW5lcmQgXV0gJiYgcm0gLXJmIC92YXIvbGliL2NvbnRhaW5lcmQKICAgICAgICAgbWtkaXIgLXAgJENPTlRBSU5FUlNUT1JBR0UKICAgICAgICAgW1sgJD8gLW5lIDAgXV0gJiYgZWNobyAiRmFpbGVkIHRvIGNyZWF0ZSAkQ09OVEFJTkVSU1RPUkFHRSwgZXhpdGluZy4uLiIgJiYgZXhpdCAxCiAgICAgICAgIGxuIC1zICRDT05UQUlORVJTVE9SQUdFIC92YXIvbGliL2NvbnRhaW5lcmQKCiAgICAgICAgIGlmIFsgLWQgJFJVTkNPTlRBSU5FUlMgXQogICAgICAgICB0aGVuCiAgICAgICAgICAgIFJVTkNPTlRBSU5FUlNVQj0kKGJhc2VuYW1lICR7UlVOQ09OVEFJTkVSU30pCiAgICAgICAgICAgIGVjaG8gIlJlbG9jYXRpbmcgL3J1bi9jb250YWluZXJkIHRvICRDT05UQUlORVJTVE9SQUdFLy4uL3J1biR7UlVOQ09OVEFJTkVSU1VCfSAuLi4uIgogICAgICAgICAgICBybSAtcmYgJFJVTkNPTlRBSU5FUlMKICAgICAgICAgICAgbWtkaXIgLXAgJENPTlRBSU5FUlNUT1JBR0UvLi4vcnVuJHtSVU5DT05UQUlORVJTVUJ9CiAgICAgICAgICAgIFtbICQ/IC1uZSAwIF1dICYmIGVjaG8gIkZhaWxlZCB0byBjcmVhdGUgJENPTlRBSU5FUlNUT1JBR0UvLi4vcnVuJHtSVU5DT05UQUlORVJTVUJ9LCBza2lwcGluZy4uLiIKICAgICAgICAgICAgbG4gLXMgIiRDT05UQUlORVJTVE9SQUdFLy4uL3J1biR7UlVOQ09OVEFJTkVSU1VCfSIgIiRSVU5DT05UQUlORVJTIgogICAgICAgIGZpCgogICAgICBlbHNlCiAgICAgICAgIGlmIFsgIiQocmVhZGxpbmsgL3Zhci9saWIvY29udGFpbmVyZCkiICE9ICIiIF0KICAgICAgICAgdGhlbgogICAgICAgICAgICBybSAtZiAiL3Zhci9saWIvY29udGFpbmVyZCIKICAgICAgICAgICAgbWtkaXIgLXAgIi92YXIvbGliL2NvbnRhaW5lcmQiCiAgICAgICAgIGVsc2UKICAgICAgICAgICAgW1sgISAtZCAiL3Zhci9saWIvY29udGFpbmVyZCIgXV0gJiYgbWtkaXIgLXAgIi92YXIvbGliL2NvbnRhaW5lcmQiCiAgICAgICAgIGZpCgogICAgICAgICBpZiBbICIkKHJlYWRsaW5rIC9ydW4vY29udGFpbmVyZCkiICE9ICIiIF0KICAgICAgICAgdGhlbgogICAgICAgICAgICBybSAtZiAiL3J1bi9jb250YWluZXJkIgogICAgICAgICAgICBta2RpciAtcCAiL3J1bi9jb250YWluZXJkIgogICAgICAgICBlbHNlCiAgICAgICAgICAgIFtbICEgLWQgIi9ydW4vY29udGFpbmVyZCIgXV0gJiYgbWtkaXIgLXAgIi9ydW4vY29udGFpbmVyZCIKICAgICAgICAgZmkKICAgICAgZmkKICAgICAgZWNobyAiUmVzdGFydGluZyBydW50aW1lIGNvbnRhaW5lciBjb250YWluZXJkLi4uIgogICAgICBzeXN0ZW1jdGwgZW5hYmxlIGNvbnRhaW5lcmQKICAgICAgc3lzdGVtY3RsIHJlc3RhcnQgY29udGFpbmVyZAogICAgICBpc19zZXJ2aWNlX2FjdGl2ZSAiY29udGFpbmVyZCIKICAgZmkKICAgc3lzdGVtY3RsIHJlc3RhcnQga3ViZWxldAoKICAgZWNobyAiV2FpdGluZyBmb3IgY29udGFpbmVyIHJ1bnRpbWUgdG8gc3RhYmlsaXplIHRoZSBwcm9jZXNzLi4uLi4iCiAgIEtVQkVBRE1ERUJVRz0iIgogICBbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBLVUJFQURNREVCVUc9Ii0tdj01IgogICBzeXN0ZW1jdGwgc3RhdHVzIGt1YmVsZXQKICAgaWYgWyAiJENSSVVTRUQiID0gImNvbnRhaW5lcmQiIF0KICAgdGhlbgogICAgICBzeXN0ZW1jdGwgcmVzdGFydCBjb250YWluZXJkCiAgICAgIHN5c3RlbWN0bCBzdGF0dXMgY29udGFpbmVyZAogICBlbHNlCiAgICAgIHN5c3RlbWN0bCByZXN0YXJ0IGNyaW8KICAgICAgc3lzdGVtY3RsIHN0YXR1cyBjcmlvCiAgIGZpCiAgIHNsZWVwIDMwCiAgIGlmIFsgIiQoZWNobyAkTU9ERSB8IGdyZXAgd29ya2VyIHwgY3V0IC1mMiAtZCctJykiID0gIndvcmtlciIgXQogICB0aGVuCiAgICAgIGVjaG8gIkpvaW5pbmcgY2x1c3Rlci4uLi4iCiAgICAgIGVjaG8gIkV4ZWN1dGluZyBjb21tYW5kICRLVUJFQURNX0pPSU5fQ01EICRLVUJFQURNQVJHICRLVUJFQURNREVCVUcuLi4uLi4uLi4uLi4uLi4uLi4uLiIKICAgICAgc2xlZXAgNQogICAgICAkS1VCRUFETV9KT0lOX0NNRCAkS1VCRUFETUFSRyAkS1VCRUFETURFQlVHCiAgICAgIFtbICEgLWQgL2hvbWUvJFRIRVVTRVIvLmt1YmUgXV0gJiYgbWtkaXIgLXAgL2hvbWUvJFRIRVVTRVIvLmt1YmUKICAgICAgTUFTVEVSTk9ERT1gZWNobyAkS1VCRUFETV9KT0lOX0NNRCB8IGF3ayAne3ByaW50ICQzfScgfCBjdXQgLWYxIC1kJzonYAogICAgICBzY3AgJHtNQVNURVJOT0RFfTovZXRjL2t1YmVybmV0ZXMvYWRtaW4uY29uZiAvaG9tZS8ke1RIRVVTRVJ9Ly5rdWJlL2NvbmZpZwogICAgICBbWyAtZCAvZXRjL2t1YmVybmV0ZXMgXV0gJiYgW1sgLWYgL2hvbWUvJFRIRVVTRVIvLmt1YmUvY29uZmlnIF1dICYmIGNwIC9ob21lLyR7VEhFVVNFUn0vLmt1YmUvY29uZmlnIC9ldGMva3ViZXJuZXRlcy9hZG1pbi5jb25mCiAgICAgIGNob3duIC1SaCAkKGdyZXAgIl4ke1RIRVVTRVJ9OiIgL2V0Yy9wYXNzd2QgfCBjdXQgLWYzLTQgLWQiOiIpIC9ob21lLyR7VEhFVVNFUn0KICAgZWxpZiBbICIkKGVjaG8gJE1PREUgfCBncmVwIG1hc3RlciB8IGN1dCAtZjIgLWQnLScpIiA9ICJtYXN0ZXIiIC1vICIkKGVjaG8gJE1PREUgfCBncmVwIHNpbmdsZSB8IGN1dCAtZjIgLWQnLScpIiA9ICJzaW5nbGUiIF0KICAgdGhlbgogICAgICBlY2hvICJJbml0aWFsaXppbmcgbWFzdGVyL3NpbmdsZSBub2RlLi4uLiIKICAgICAgZWNobyAiRXhlY3V0aW5nIGt1YmVhZG0gaW5pdCAkS1VCRVBBUkFNSU5JVCAkS1VCRUFETUFSRyAkSzhTVkVSUEFSQU0gJEtVQkVBRE1ERUJVRyIKICAgICAgW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgc2V0IC14CiAgICAgIGt1YmVhZG0gaW5pdCAke0tVQkVQQVJBTUlOSVR9ICR7S1VCRUFETUFSR30gJHtLOFNWRVJQQVJBTX0gJHtLVUJFQURNREVCVUd9CiAgICAgIFtbICEgLWQgL2hvbWUvJFRIRVVTRVIvLmt1YmUgXV0gJiYgbWtkaXIgLXAgL2hvbWUvJFRIRVVTRVIvLmt1YmUKCiAgICAgIGNwIC1mIC9ldGMva3ViZXJuZXRlcy9hZG1pbi5jb25mIC9ob21lLyRUSEVVU0VSLy5rdWJlL2NvbmZpZwogICAgICBjaG93biAtUmggJChncmVwICJeJHtUSEVVU0VSfToiIC9ldGMvcGFzc3dkIHwgY3V0IC1mMy00IC1kIjoiKSAvaG9tZS8ke1RIRVVTRVJ9CiAgICAgIGluc3RhbGxfbmV0d29yawogICAgICBzZXQgK3gKICAgZWxzZQogICAgICBlY2hvICJSZXN1bWluZy4uLi4uLi4uLi4uLi4uLi4uLi4uIgogICBmaQplbHNlCiAgIGVjaG8gIlVzaW5nIGN1cnJlbnQgY29uZmlndXJhdGlvbi4uLi4uLi4uLi4iCmZpCgojIFRvIGVuYWJsZSBhIHNpbmdsZSBub2RlIGNsdXN0ZXIgcmVtb3ZlIHRoZSB0YWludCB0aGF0IGxpbWl0cyB0aGUgZmlyc3Qgbm9kZSB0byBtYXN0ZXIgb25seSBzZXJ2aWNlLgojCnNldCAreAplY2hvIFNFVFVQSzhTID4+ICRQUk9HUkVTU19GSUxFCmVjaG8gImV4cG9ydCBTRVRVUEs4Uz0xIiA+PiAkRU5WRklMRQp9CgoKaXNfY2x1c3Rlcl9yZWFkeSgpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAojIFZlcmlmeSB0aGF0IHRoZSBjbHVzdGVyIGlzIHJlYWR5IHRvIGJlIHVzZWQuCiMKc3UgLSAkVEhFVVNFUiAtYyAiClRJTUVPVVQ9JHtUSU1FT1VUfQplY2hvIFwiVmVyaWZ5aW5nIHRoYXQgdGhlIGNsdXN0ZXIgaXMgcmVhZHkgZm9yIHVzZS4uLlwiCndoaWxlIHRydWUgOyBkbwogICAgaWYgWyBcJFRJTUVPVVQgLWxlIDAgXQogICAgdGhlbgogICAgICAgIGVjaG8gXCJDbHVzdGVyIG5vZGUgZmFpbGVkIHRvIHJlYWNoIHRoZSAnUmVhZHknIHN0YXRlLiBLdWJlYWRtIHNldHVwIGZhaWxlZC5cIgogICAgICAgIGV4aXQgMQogICAgZmkKCiAgICBTVEFUPVxga3ViZWN0bCBnZXQgbm9kZXMgLS1uby1oZWFkZXJzPXRydWUgfCBlZ3JlcCBcIiQoaG9zdG5hbWUgLXMpIHwkKGhvc3RuYW1lIC1mKSBcIiB8IGF3ayAne3ByaW50IFwkMn0nXGAKCiAgICBpZiBbIFwiXCRTVEFUXCIgPSBcIlJlYWR5XCIgXTsgdGhlbgogICAgICAgIGJyZWFrCiAgICBmaQoKICAgIHNsZWVwICRSRVRSWV9JTlRFUlZBTAoKICAgIFRJTUVPVVQ9XCQoKFwkVElNRU9VVC0kUkVUUllfSU5URVJWQUwpKQoKICAgIGVjaG8gXCIjIyAkKGhvc3RuYW1lIC1zKSAjIyBDbHVzdGVyIG5vdCByZWFkeS4gUmV0cnlpbmcuLi5cIgpkb25lCiIKfQoKaW5zdGFsbF9rOHNfZGFzaGJvYXJkKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CgpbWyAiJChncmVwIEs4U0RBU0hCT0FSRCAkUFJPR1JFU1NfRklMRSkiID0gIks4U0RBU0hCT0FSRCIgXV0gJiYgZWNobyAtZSAiPj4+Pj4+Pj4+PiBLdWJlcm5ldGVzIGRhc2hib2FyZCBoYXMgYmVlbiBpbnN0YWxsZWQhLi4gc2tpcHBpbmcuLi5cbiIgJiYgcmV0dXJuCgojIEluc3RhbGwgdGhlIGRhc2hib2FyZCBmb3IgS3ViZXJuZXRlcy4KIwpzdSAtICRUSEVVU0VSIC1jICIKa3ViZWN0bCBhcHBseSAtZiAkREFTSEJPQVJECiNrdWJlY3RsIGNyZWF0ZSBjbHVzdGVycm9sZWJpbmRpbmcga3ViZXJuZXRlcy1kYXNoYm9hcmQgLS1jbHVzdGVycm9sZT1jbHVzdGVyLWFkbWluIC0tc2VydmljZWFjY291bnQ9a3ViZS1zeXN0ZW06a3ViZXJuZXRlcy1kYXNoYm9hcmQKZWNobyBcIkt1YmVybmV0ZXMgbWFzdGVyIHNldHVwIGRvbmUuXCIKIgplY2hvIEs4U0RBU0hCT0FSRCA+PiAkUFJPR1JFU1NfRklMRQp9CgpraWxsX2t1YmVsZXRfYW5kX2s4cygpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAogICBlY2hvICJDaGVja2luZyB3aGV0aGVyIGt1YmVsZXQgaXMgcnVubmluZy4uLiIKICAgW1sgYHBzIC1lZiB8IGdyZXAgImJpbi9rdWJlbGV0IiB8IGdyZXAgLXYgZ3JlcCB8IHdjIC1sYCAtbmUgMCBdXSAmJiBlY2hvICJTdG9wcGluZyBrdWJlbGV0Li4uIiAmJiBzeXN0ZW1jdGwgc3RvcCBrdWJlbGV0CiAgIE1ZUElEPSQkCiAgIGZvciBsaXN0cHJvYyBpbiBgcHMgLWVmIHwgZWdyZXAgImt1YmVsZXR8Y3JpbyIgfCBncmVwIC12ICIkTVlQSUQgIiB8IGF3ayAne3ByaW50ICQyfSdgCiAgIGRvCiAgICAgIGtpbGwgLTkgJGxpc3Rwcm9jIDI+L2Rldi9udWxsbCAxPi9kZXYvbnVsbAogICBkb25lCn0KCiN0aGlzIGlzIGhvdyB0byB1c2UgdGhpcyBzY3JpcHQKdXNhZ2VfazhzKCkKewogICBlY2hvIC1lICJcblVzYWdlOiBcbiAgICAkMCAtbSA8bW9kZT4gLXUgPGs4c191c2VyPiAtbCA8bG9jYWxfc3RvcmFnZV9wYXRoPiAtayA8a3ViZWxldF9zdG9yYWdlPiAtYyA8Y29udGFpbmVyX3N0b3JhZ2U+IC1zIDxzdG9yYWdlX2NsYXNzPiAtbiA8bmV0d29yay1wbHVnaW4+IgogICBlY2hvIC1lICJcbiAgICAtbSBtb2RlIFtyZXNldC1hbGx8ZGVzdHJveS1hbGx8cmVzZXQtc2luZ2xlfHJlc2V0LW1hc3RlcnxyZXNldC13b3JrZXJ8c2luZ2xlfCcnKGRlZmF1bHQpXVxuICAgIC11IGs4cy11c2VyIFthbnktbmFtZXxrOHMoZGVmYXVsdCldIgogICBlY2hvIC1lICJcbiAgICAtbCBsb2NhbC1zdG9yYWdlIFthbnktbW91bnRwb2ludHwnJyhkZWZhdWx0KV0iCiAgIGVjaG8gLWUgIlxuICAgIC1rIGt1YmVsZXQtc3RvcmFnZSBbYW55LW1vdW50cG9pbnR8L3Zhci9saWIva3ViZWxldChkZWZhdWx0KV0iCiAgIGVjaG8gLWUgIlxuICAgIC1jIGNvbnRhaW5lci1zdG9yYWdlIFthbnktbW91bnRwb2ludHwvdmFyL2xpYi9jb250YWluZXJkKGRlZmF1bHQgZm9yIGNvbnRhaW5lcmQpIC92YXIvbGliL2NvbnRhaW5lcnMoZGVmYXVsdCBmb3IgY3JpbyldIgogICBlY2hvIC1lICJcbiAgICAtciBjcmkgW2NyaW98Y29udGFpbmVyZChkZWZhdWx0KV0iCiAgIGVjaG8gLWUgIlxuICAgIC1zIHN0b3JhZ2VjbGFzcyBbYW55LXN0b3JhZ2VjbGFzc3xsb2NhbC1zdG9yYWdlXSIKICAgZWNobyAtZSAiXG4gICAgLW4gbmV0d29yayBbZiBmbGFubmVsfGMgY2FsaWNvKGRlZmF1bHQpXSIKICAgZWNobyAtZSAiICAgIEUuZzogJDAgLW0gcmVzZXQtc2luZ2xlIC11IGt1YmUgLWwgL29wdC9sb2NhbC1zdG9yYWdlIC1rIC9vcHQva3ViZWxldCAtbiBmIgogICBlY2hvIC1lICIgICAgICAgICAkMCAtbSByZXNldC1tYXN0ZXIgLXUga3ViZSAtbCAvb3B0L2xvY2FsLXN0b3JhZ2UgLXMgY3NpLXJiZC1jZXBoICN1c2luZyBzdG9yYWdlY2xhc3MgY3NpLXJiZC1jZXBoIGFuZCBjYWxpY28gbmV0d29yayhkZWZhdWx0KSIKICAgZWNobyAtZSAiICAgICAgICAgJDAgLW0gcmVzZXQtbWFzdGVyIC11IGt1c2VyICN0aGUgcmVzdCBwYXJhbWV0ZXJzIHdpbGwgYmUgdXNpbmcgZGVmYXVsdCB2YWx1ZXNcbiIKICAgZXhpdCAxCn0KCmdldF9wYXJhbXMoKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKICAgbG9jYWwgT1BUSU5ECiAgIHdoaWxlIGdldG9wdHMgIm06dTpsOnM6azpjOnI6bjpvOmRoIiBQQVJBTQogICBkbwogICAgICBjYXNlICIkUEFSQU0iIGluCiAgICAgIG0pCiAgICAgICAgICAjbW9kZQogICAgICAgICAgTU9ERT0ke09QVEFSR30KICAgICAgICAgIDs7CiAgICAgIHUpCiAgICAgICAgICAjS3ViZSB1c2VyCiAgICAgICAgICBUSEVVU0VSPSR7T1BUQVJHfQogICAgICAgICAgOzsKICAgICAgbCkKICAgICAgICAgICNsb2NhbCBzdG9yYWdlCiAgICAgICAgICBMT0NBTFNUT1JBR0U9JHtPUFRBUkd9CiAgICAgICAgICBMT0NBTFNUT1JBR0U9JExPQ0FMX1NUT1JBR0UKICAgICAgICAgIDs7CiAgICAgIHMpCiAgICAgICAgICAjc3RvcmFnZSBjbGFzcwogICAgICAgICAgU1RPUkFHRV9DTEFTUz0ke09QVEFSR30KICAgICAgICAgIDs7CiAgICAgIHIpCiAgICAgICAgICAjY29udGFpbmVyIHJ1bnRpbWUKICAgICAgICAgIENSSVVTRUQ9JHtPUFRBUkd9CiAgICAgICAgICA7OwoKICAgICAgaykKICAgICAgICAgICNrdWJlbGV0IHN0b3JhZ2UKICAgICAgICAgIEtVQkVTVE9SQUdFPSR7T1BUQVJHfQogICAgICAgICAgOzsKICAgICAgYykKICAgICAgICAgICNjb250YWluZXJzIHN0b3JhZ2UKICAgICAgICAgIENPTlRBSU5FUl9TVE9SQUdFPSR7T1BUQVJHfQogICAgICAgICAgQ09OVEFJTkVSU1RPUkFHRT0kQ09OVEFJTkVSX1NUT1JBR0UKICAgICAgICAgIDs7CiAgICAgIG4pCiAgICAgICAgICAjbmV0d29yayBvcmNoZXN0cmF0aW9uCiAgICAgICAgICBDTklQQVJBTT0ke09QVEFSR30KICAgICAgICAgIDs7CiAgICAgIGQpCiAgICAgICAgICAjZnVsbCBkZWJ1ZwogICAgICAgICAgREVCVUc9MQogICAgICAgICAgOzsKICAgICAgaCkKICAgICAgICAgICNkaXNwbGF5IHRoaXMgdXNhZ2UKICAgICAgICAgIHVzYWdlX2s4cwogICAgICAgICAgOzsKICAgICAgPykKICAgICAgICAgIGVjaG8gLWUgIlxuRXJyb3I6ICBVbmtub3duIHBhcmFtZXRlcihzKS4uLlxuIgogICAgICAgICAgdXNhZ2VfazhzCiAgICAgIGVzYWMKICAgIGRvbmUKCiAgICBzaGlmdCAkKChPUFRJTkQtMSkpCgogICAgY2FzZSAiJENOSVBBUkFNIiBpbgogICAgJ2YnKQogICAgICAgIENOSVBMVUdJTj0iJEZMQU5ORUwiCiAgICAgICAgTkVUUExVR0lOPSJGbGFubmVsIgogICAgICAgIDs7CiAgICAnYycpCiAgICAgICAgQ05JUExVR0lOPSIkQ0FMSUNPIgogICAgICAgIE5FVFBMVUdJTj0iQ2FsaWNvIgogICAgICAgIGV4cG9ydCBLVUJFUEFSQU1JTklUPSIkS1VCRVBBUkFNSU5JVCAtLXNlcnZpY2UtY2lkcj0xMC4yNDUuMC4wLzE2IgogICAgICAgIDs7CiAgICAnY2knKQogICAgICAgIENOSVBMVUdJTj0iJENJTElVTSIKICAgICAgICBORVRQTFVHSU49IkNpbGl1bSIKICAgICAgICA7OwogICAgJ3cnKQogICAgICAgIENOSVBMVUdJTj0iV0VBVkVORVQiCiAgICAgICAgW1sgISAtZCAvdXNyL2xvY2FsL2JpbiBdXSAmJiBta2RpciAtcCAvdXNyL2xvY2FsL2JpbgogICAgICAgIFtbICEgLWYgL3Vzci9sb2NhbC9iaW4vd2VhdmUgXV0gJiYgIGN1cmwgLUwgZ2l0LmlvL3dlYXZlIC1vIC91c3IvbG9jYWwvYmluL3dlYXZlICYmIGNobW9kIHVnbytyeCAvdXNyL2xvY2FsL2Jpbi93ZWF2ZQogICAgICAgIE5FVFBMVUdJTj0iV2VhdmUiCiAgICAgICAgZXhwb3J0IEtVQkVQQVJBTUlOSVQ9IiIKICAgICAgICA7OwogICAgKikKICAgICAgICBDTklQTFVHSU49IiRDQUxJQ08iCiAgICAgICAgTkVUUExVR0lOPSJDYWxpY28iCiAgICAgICAgZXhwb3J0IEtVQkVQQVJBTUlOSVQ9IiRLVUJFUEFSQU1JTklUIC0tc2VydmljZS1jaWRyPTEwLjI0NS4wLjAvMTYiCiAgICBlc2FjCgoKICAgIGlmIFsgIiRDUklVU0VEIiA9ICJjcmlvIiBdCiAgICB0aGVuCiAgICAgICBleHBvcnQgQ09OVEFJTkVSU1RPUkFHRT0iJHtDT05UQUlORVJfU1RPUkFHRTotL3Zhci9saWIvY29udGFpbmVyc30iCiAgICAgICBleHBvcnQgUlVOQ09OVEFJTkVSUz0iL3J1bi9jb250YWluZXJzIgogICAgZWxpZiBbICIkQ1JJVVNFRCIgPSAiY29udGFpbmVyZCIgXQogICAgdGhlbgogICAgICAgZXhwb3J0IENPTlRBSU5FUlNUT1JBR0U9IiR7Q09OVEFJTkVSX1NUT1JBR0U6LS92YXIvbGliL2NvbnRhaW5lcmR9IgogICAgICAgZXhwb3J0IFJVTkNPTlRBSU5FUlM9Ii9ydW4vY29udGFpbmVyZCIKICAgIGVsc2UKICAgICAgIGVjaG8gIlRoaXMgc2NyaXB0IG9ubHkgY2F0ZXIgQ29udGFpbmVyIHJ1bnRpbWUgZWl0aGVyIGNyaW8gb3IgY29udGFpbmVyZCIKICAgICAgIHVzYWdlX2s4cwogICAgICAgZXhpdCAxCiAgICBmaQoKc2V0ICt4Cgp9CgpjaGVja19tb3VudHBvaW50KCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CmxvY2FsIFNUT1JBR0U9IiQxIgogICAgICAgIFtbICIkU1RPUkFHRSIgPSAiIiBdXSAmJiByZXR1cm4gMAoJaWYgWyAhIC1kICRTVE9SQUdFIF0KICAgICAgICB0aGVuCiAgICAgICAgICAgIFNUT1JBR0VQQVJFTlQ9JChkaXJuYW1lICRTVE9SQUdFKQogICAgICAgICAgICBlY2hvICJUaGUgbW91bnRwb2ludCAkU1RPUkFHRSBpcyBub3QgYXZhaWxhYmxlLCBob3dldmVyIHRoZSBwYXJlbnQgZGlyZWN0b3J5IGlzIG1vdW50ZWQgdW5kZXIgJFNUT1JBR0VQQVJFTlQiCiAgICAgICAgICAgIFNUT1JBR0VQQVJFTlQ9JChkZiAkU1RPUkFHRVBBUkVOVCB8IGF3ayAne3ByaW50ICRORn0nIHwgdGFpbCAtMSkKICAgICAgICAgICAgaWYgWyAiJFNUT1JBR0VQQVJFTlQiID0gIi8iIF0KICAgICAgICAgICAgdGhlbgogICAgICAgICAgICAgICBlY2hvIC1lICJcblRoZSBtb3VudCAkU1RPUkFHRSB3aWxsIGJlIGNyZWF0ZWQgdW5kZXIgcm9vdCAnLycgZmlsZXN5c3RlbSwgcGxlYXNlIG1vdW50IGl0IG9uIGEgZGlmZmVyZW50IGZpbGVzeXN0ZW1cbiIgJiYgZXhpdCAxCiAgICAgICAgICAgIGVsc2UKCSAgICAgICBERlNJWkU9YGRmIC1tICRTVE9SQUdFUEFSRU5UIHwgYXdrICd7cHJpbnQgJDR9JyB8IHRhaWwgLTFgCiAgICAgICAgICAgICAgIENVUlJTSVpFPTAKICAgICAgICAgICAgICAgTU9VTlRQT0lOVD1gZGYgJFNUT1JBR0VQQVJFTlQgfCBhd2sgJ3twcmludCAkTkZ9JyB8IHRhaWwgLTFgCiAgICAgICAgICAgIGZpCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiBbICIkKGRmICRTVE9SQUdFIHwgYXdrICd7cHJpbnQgJE5GfScpIiA9ICIvIiBdCiAgICAgICAgICAgIHRoZW4KICAgICAgICAgICAgICAgZWNobyAtZSAiXG5UaGUgbW91bnQgJFNUT1JBR0Ugd2lsbCBiZSBjcmVhdGVkIHVuZGVyIHJvb3QgJy8nIGZpbGVzeXN0ZW0sIHBsZWFzZSBtb3VudCBpdCBvbiBhIGRpZmZlcmVudCBmaWxlc3lzdGVtXG4iICYmIGV4aXQgMQogICAgICAgICAgICBlbHNlCgkgICAgICAgQ1VSUlNJWkU9YGR1IC1zbSAkU1RPUkFHRSB8IGF3ayAne3ByaW50ICQxfSdgCgkgICAgICAgW1sgJENVUlJTSVpFIC1ndCAwIF1dICYmIENVUlJTSVpFPSQoKENVUlJTSVpFLzEwMjQpKQoJICAgICAgIERGU0laRT1gZGYgLW0gJFNUT1JBR0UgfCBhd2sgJ3twcmludCAkNH0nIHwgdGFpbCAtMWAKICAgICAgICAgICAgICAgTU9VTlRQT0lOVD1gZGYgJFNUT1JBR0UgfCBhd2sgJ3twcmludCAkTkZ9JyB8IHRhaWwgLTFgCiAgICAgICAgICAgIGZpCiAgICAgICAgZmkKfQoKY2hlY2tfZGlza3NwYWNlKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIGlmIFsgIiRNT0RFIiAhPSAiIiAtYSAiJE1PREUiICE9ICJzaW5nbGUiIF0KICAgdGhlbgogICAgICBlY2hvICJDaGVja2luZyBMb2NhbCBzdG9yYWdlIgogICAgICBjaGVja19tb3VudHBvaW50ICIkTE9DQUxTVE9SQUdFIgogICAgICBMQ1VSUlNJWkU9JENVUlJTSVpFCiAgICAgIExGUkVFU0laRT0kKChERlNJWkUvMTAyNCkpCiAgICAgIExNT1VOVFBPSU5UPSRNT1VOVFBPSU5UCgogICBmaQp9CgpyZW1vdmVfb2ZmZW5kaW5nX2tleSgpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAogICBsb2NhbCBJUEFERFI9IiQxIgogICBPRkZFTkRJTkdMSU5FPSQoc3NoLWNvcHktaWQgJElQQUREUiAyPiYxIHwgZ3JlcCAiRVJST1I6IE9mZmVuZGluZyBFQ0RTQSBrZXkgaW4iKQogICBpZiBbICIkT0ZGRU5ESU5HTElORSIgIT0gIiIgXQogICB0aGVuCiAgICAgIFRIRUxJTkU9JChlY2hvICRPRkZFTkRJTkdMSU5FIHwgYXdrICd7cHJpbnQgJE5GfScgfCB0ciAtZCAnXHInKQogICAgICBPTElORT0kKGVjaG8gJFRIRUxJTkUgfCBjdXQgLWYxIC1kOikKICAgICAgT0xJTkVOTz0kKGVjaG8gJFRIRUxJTkUgfCBjdXQgLWYyIC1kOikKICAgICAgaWYgWyAkT0xJTkVOTyAtZ3QgMCBdCiAgICAgIHRoZW4KICAgICAgICAgc2VkIC1pICIke09MSU5FTk99ZCIgJE9MSU5FCiAgICAgIGZpCiAgIGZpCn0gCiAgICAgIAoKY29weV9wdWJsaWNfa2V5KCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIGxvY2FsIElQQUREUj0iJDEiCiAgIGVjaG8gIlRyeWluZyB0byBjb3B5IHB1YmxpYyBrZXkgZnJvbSAuc3NoIGRpcmVjdG9yeS4uLiIKICAgZWNobyAiVHJ5aW5nIHRvIGNyZWF0ZSB0cnVzdGVkIGNvbm5lY3Rpb24gZnJvbSB0aGlzIGhvc3QgJChob3N0bmFtZSAtZikgdG8gJElQQUREUiIKICAgaWYgWyAtZiB+Ly5zc2gvaWRfcnNhLnB1YiBdCiAgIHRoZW4KICAgICAgc3NoLWNvcHktaWQgJElQQUREUgogICAgICB3aGlsZSBbICQ/IC1uZSAwIF0KICAgICAgZG8KICAgICAgICAgcmVtb3ZlX29mZmVuZGluZ19rZXkgIiRJUEFERFIiICAgICAgICAgCiAgICAgICAgIGVjaG8gIlxuSWYgeW91IGRvbnQga25vdyB0aGUgcm9vdCBwYXNzd29yZCBwcmVzcyBDdHJsK2MgdGhlbiBwbGVhc2UgYXNrIHNvbWVvbmUgd2hvIGtub3dzICEhLi4uXG4iCiAgICAgICAgIHNzaC1jb3B5LWlkICRJUEFERFIKICAgICAgICAgc2xlZXAgMgogICAgICBkb25lCiAgIGVsc2UKICAgICAgeWVzICd5JyB8IHNzaC1rZXlnZW4gLXQgcnNhIC1OICcnIC1mIH4vLnNzaC9pZF9yc2EKICAgICAgc3NoLWNvcHktaWQgJElQQUREUgogICAgICB3aGlsZSBbICQ/IC1uZSAwIF0KICAgICAgZG8KICAgICAgICAgcmVtb3ZlX29mZmVuZGluZ19rZXkgIiRJUEFERFIiCiAgICAgICAgIGVjaG8gLWUgIlxuSWYgeW91IGRvbnQga25vdyB0aGUgcm9vdCBwYXNzd29yZCBwcmVzcyBDdHJsK2MgdGhlbiBwbGVhc2UgYXNrIHNvbWVvbmUgd2hvIGtub3dzICEhLi4uXG4iCiAgICAgICAgIHNzaC1jb3B5LWlkICRJUEFERFIKICAgICAgICAgc2xlZXAgMgogICAgICBkb25lCiAgIGZpCn0KCgpyZXNldF9vbmx5KCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIHN1IC0gJFRIRVVTRVIgLWMgImt1YmVjdGwgZ2V0IG5vZGVzIDI+L2Rldi9udWxsIDE+L2Rldi9udWxsIgogICBpZiBbICQ/IC1lcSAwIF0KICAgdGhlbgogICAgICBIT1NUTkFNRT1gaG9zdG5hbWVgCiAgICAgIEhPU1QyREVMRVRFPWBzdSAtICRUSEVVU0VSIC1jICJrdWJlY3RsIGdldCBub2RlcyAtLW5vLWhlYWRlcnM9dHJ1ZSB8IGdyZXAgLXYgbWFzdGVyIHwgZ3JlcCAkSE9TVE5BTUUgfGF3ayAne3ByaW50IFwkMX0nImAKICAgICAgaWYgWyAiJEhPU1QyREVMRVRFIiAhPSAiIiBdCiAgICAgIHRoZW4KICAgICAgICAgIHN1IC0gJFRIRVVTRVIgLWMgImt1YmVjdGwgZHJhaW4gJEhPU1ROQU1FIC0tZGVsZXRlLWVtcHR5ZGlyLWRhdGEgLS1mb3JjZSAtLWlnbm9yZS1kYWVtb25zZXRzIgogICAgICAgICAgc3UgLSAkVEhFVVNFUiAtYyAia3ViZWN0bCBkZWxldGUgbm9kZSAkSE9TVE5BTUUiCiAgICAgIGVsc2UKICAgICAgICAgIGZvciBob3N0MmRlbCBpbiBgc3UgLSAkVEhFVVNFUiAtYyAia3ViZWN0bCBnZXQgbm9kZXMgLS1uby1oZWFkZXJzPXRydWUgfCBncmVwIC12ICRIT1NUTkFNRSB8IGF3ayAne3ByaW50IFwkMX0nImAKICAgICAgICAgIGRvCiAgICAgICAgICAgICAgc3UgLSAkVEhFVVNFUiAtYyAia3ViZWN0bCBkcmFpbiAkSE9TVE5BTUUgLS1kZWxldGUtZW1wdHlkaXItZGF0YSAtLWZvcmNlIC0taWdub3JlLWRhZW1vbnNldHMiCiAgICAgICAgICAgICAgc3UgLSAkVEhFVVNFUiAtYyAia3ViZWN0bCBkZWxldGUgbm9kZSAkSE9TVE5BTUUiCiAgICAgICAgICBkb25lCiAgICAgIGZpCiAgIGZpCiAgIGlmIFsgYHBzIC1lZiB8IGdyZXAgImJpbi9rdWJlbGV0IiB8IGdyZXAgLXYgZ3JlcCB8IHdjIC1sYCAtZ3QgMCBdCiAgIHRoZW4KICAgICAgIEtVQkVQSUQ9YHBzIC1lbyBwaWQsY21kIHwgZ3JlcCAiYmluL2t1YmVsZXQiIHwgZ3JlcCAtdiBncmVwIHwgYXdrICd7cHJpbnQgJDF9J2AKICAgICAgIFtbICIkS1VCRVBJRCIgIT0gIiIgXV0gJiYgZWNobyAiS2lsbGluZyBrdWJlbGV0Li4uIiAmJiBzeXN0ZW1jdGwgc3RvcCBrdWJlbGV0ICYmIGtpbGwgLTkgJEtVQkVQSUQgMj4vZGV2L251bGwgMT4vZGV2L251bGwKICAgZmkKICAgcmVzZXRfa3ViZWFkbQogICBkZWxldGVfZXBoZW1lcmFsX2Rpc2tzICRLVUJFU1RPUkFHRQogICBkZWxldGVfZXBoZW1lcmFsX2Rpc2tzICRDT05UQUlORVJTVE9SQUdFCiAgIGRlbGV0ZV9lcGhlbWVyYWxfZGlza3MgJExPQ0FMU1RPUkFHRQoKc2V0ICt4Cn0KCmRlbGV0ZV9lcGhlbWVyYWxfZGlza3MoKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKICAgbG9jYWwgVEhFRElTSz0iJDEiCiAgIFtbICIkVEhFRElTSyIgPSAiIiBdXSAmJiByZXR1cm4KICAgaWYgWyAtZCAiJFRIRURJU0siIF0KICAgdGhlbgogICAgICAgIGZvciBNVFBPSU5UIGluIGBtb3VudCAgfCBncmVwICIke1RIRURJU0t9IiB8IGF3ayAne3ByaW50ICQzfSdgCiAgICAgICAgZG8KICAgICAgICAgICAgZWNobyAiVW5tb3VudGluZyAkVEhFRElTSyBiaW5kIHZvbHVtZSAkTVRQT0lOVCIKICAgICAgICAgICAgdW1vdW50ICRNVFBPSU5UIDI+L2Rldi9udWxsIDE+L2Rldi9udWxsCiAgICAgICAgZG9uZQogICAgICAgIFtbICIke1RIRURJU0t9IiAhPSAiIiBdXSAmJiBybSAtcmYgJHtUSEVESVNLfS8qCiAgIGVsaWYgWyAiJChyZWFkbGluayAiJFRIRURJU0siICkiICE9ICIkVEhFRElTSyIgLWEgIiQocmVhZGxpbmsgIiRUSEVESVNLIiApIiAhPSAiIiBdCiAgIHRoZW4KICAgICAgICBESVJQQVRURVJOPSIkKHJlYWRsaW5rICIkVEhFRElTSyIgfCBzZWQgJ3N8L3xcXFwvfGcnKSIKICAgICAgICBmb3IgTVRQT0lOVCBpbiBgbW91bnQgIHwgZ3JlcCAiJERJUlBBVFRFUk4iIHwgYXdrICd7cHJpbnQgJDN9J2AKICAgICAgICBkbwogICAgICAgICAgICBlY2hvICJVbm1vdW50aW5nICRUSEVESVNLIG9uIGJpbmQgdm9sdW1lICRNVFBPSU5UIgogICAgICAgICAgICB1bW91bnQgJE1UUE9JTlQgMj4vZGV2L251bGwgMT4vZGV2L251bGwKICAgICAgICBkb25lCiAgICAgICAgW1sgIiR7VEhFRElTS30iICE9ICIiIF1dICYmIHJtIC1yZiAke1RIRURJU0t9LyoKICAgZmkKCnNldCAreAoKfQoKCnJ1bl9zZXR1cCgpCnsKW1sgIiRERUJVRyIgPSAiMSIgXV0gJiYgZWNobyAtZSAiXG5cblxuXG4iICYmIHNldCAteAogIE1PREU9IiQxIgogIHsKCiAgIGlmIFsgIiRNT0RFIiA9ICJyZXNldC1hbGwiIF0KICAgdGhlbgogICAgICBlY2hvICJSZXNldHRpbmcgYW55dGhpbmcgcmVsYXRlZCB0byBrdWJlcm5ldGVzLi4uLi4uLi4uLi4iCiAgICAgIHJlc2V0X29ubHkKICAgICAgZXhpdCAwCiAgIGVsaWYgWyAiJE1PREUiID0gImRlc3Ryb3ktYWxsIiBdCiAgIHRoZW4KICAgICAgZWNobyAiRGVzdHJveWluZyBhbmQgUmVtb3ZpbmcgYW55dGhpbmcgcmVsYXRlZCB0byBrdWJlcm5ldGVzLi4uLi4uLi4uLi4iCiAgICAgIGRlc3Ryb3lfZXZlcnl0aGluZwogICAgICBlY2hvICJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJCIgogICAgICBleGl0IDAKICAgZmkKICAgCiAgIFtbICIkKGVjaG8gJE1PREUgfCBncmVwIHJlc2V0IHwgY3V0IC1mMSAtZCctJykiID0gInJlc2V0IiBdXSAmJiBSRVNFVD0xCgogICBpZiBbICIkKGVjaG8gJE1PREUgfCBncmVwIHdvcmtlciB8IGN1dCAtZjIgLWQnLScpIiA9ICJ3b3JrZXIiIF0KICAgdGhlbgogICAgICBUSEVOT0RFPSJXT1JLRVIiCiAgIGVsaWYgWyAiJChlY2hvICRNT0RFIHwgZ3JlcCBtYXN0ZXIgfCBjdXQgLWYyIC1kJy0nKSIgPSAibWFzdGVyIiBdCiAgIHRoZW4KICAgICAgVEhFTk9ERT0iTUFTVEVSIgogICAgICBUSEVNRVNTQUdFPSJcbkJvb3RzdHJhcGluZyBhIEt1YmVybmV0ZXMgY2x1c3Rlci4uLi4uLi4uLi4uLi4uIgogICBlbGlmIFsgIiRNT0RFIiA9ICJzaW5nbGUiIF0KICAgdGhlbgogICAgICBUSEVOT0RFPSJTSU5HTEUiCiAgICAgIFRIRU1FU1NBR0U9IlxuUmVzdW1pbmcgS3ViZXJuZXRlcyBzaW5nbGUgY2x1c3RlciBpbnN0YWxsYXRpb24uLiIKICAgICAgTE9DQUxTVE9SQUdFPWBkaXJuYW1lICQobW91bnQgIHwgZ3JlcCAibG9jYWwtc3RvcmFnZVwvdm9sIiB8IGF3ayAne3ByaW50ICQzfScgfCBoZWFkIC0xKSAyPi9kZXYvbnVsbGAKICAgICAgaWYgWyAiJExPQ0FMU1RPUkFHRSIgIT0gIiIgXQogICAgICB0aGVuCiAgICAgICAgICBTVE9SQUdFX0NMQVNTPSJsb2NhbC1zdG9yYWdlIgogICAgICBlbHNlCiAgICAgICAgICBTVE9SQUdFX0NMQVNTPWBzdSAtICRUSEVVU0VSIC1jICJrdWJlY3RsIGdldCBzYyAtQSAtbz1qc29ucGF0aD0ney5pdGVtc1swXS5tZXRhZGF0YS5uYW1lfScgMj4vZGV2L251bGwiIDI+L2Rldi9udWxsYAogICAgICBmaQogICBlbGlmIFsgIiRNT0RFIiA9ICJyZXNldC1zaW5nbGUiIF0KICAgdGhlbgogICAgICBUSEVOT0RFPSJTSU5HTEUiCiAgICAgIFRIRU1FU1NBR0U9IlxuSW5zdGFsbGluZyBLdWJlcm5ldGVzIG9uIGEgc2luZ2xlIGNsdXN0ZXIuLiIKICAgZWxzZQogICAgICBpZiBbIC1kIC4uLyRLOFNERVBMT1lfRElSIF0KICAgICAgdGhlbgoJIGlmIFsgJChjYXQgJFBST0dSRVNTX0ZJTEUgfCB3YyAtbCkgLWVxIDAgXQogICAgICAgICB0aGVuCgkgICAgIGVjaG8gLWUgIlxuXG5pdCBzZWVtcyBwcm9ncmVzcyBmaWxlIGhhcyBubyBlbnRyeS4uIHBsZWFzZSBydW4gc2V0dXAtazhzLnNoIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzLi4uLiIKCSAgICAgdXNhZ2VfazhzCgkgICAgIGV4aXQgMAoJIGZpCiAgICAgIGVsc2UKCSBlY2hvIC1lICJcblxuaXQgc2VlbXMgeW91IGhhdmUgbmV2ZXIgaW5zdGFsbGVkIEt1YmVybmV0ZXMgdXNpbmcgdGhpcyBzY3JpcHQgYmVmb3JlLi4gcGxlYXNlIHJ1biBzZXR1cC1rOHMuc2ggd2l0aCB0aGUgdGhlIGZvbGxpbmcgcGFyYW1ldGVycyA6IgoJIHVzYWdlX2s4cwoJIGV4aXQgMAogICAgICBmaQogICAgICBUSEVOT0RFPSJNQVNURVIvV09SS0VSIgogICBmaQoKCiAgIGlmIFsgIiRSRVNFVCIgPSAiMSIgXQogICB0aGVuCiAgICAgIGlmIFsgIiRMT0NBTF9TVE9SQUdFIiAhPSAiIiBdCiAgICAgIHRoZW4gCiAgICAgICAgICBpZiBbICIkU1RPUkFHRV9DTEFTUyIgIT0gIiIgXQogICAgICAgICAgdGhlbgogICAgICAgICAgICAgZWNobyAiUGFyYW1ldGVyIC1sIChsb2NhbCBzdG9yYWdlIGxvY2F0aW9uKSBpcyBtb3JlIHByZWNlZGVuY2UgdGhhbiBwYXJhbWV0ZXIgLXMgKHN0b3JhZ2UgY2xhc3MpIgogICAgICAgICAgICAgZWNobyAiU2V0dGluZyBzdG9yYWdlIGNsYXNzIHRvIGxvY2FsLXN0b3JhZ2UiCiAgICAgICAgICBmaQogICAgICAgICAgU1RPUkFHRV9DTEFTUz0ibG9jYWwtc3RvcmFnZSIKICAgICAgZWxzZQoJICBpZiBbICIkU1RPUkFHRV9DTEFTUyIgIT0gIiIgXQogICAgICAgICAgdGhlbgogICAgICAgICAgICAgZWNobyAtZSAiXG5TZXR0aW5nIHN0b3JhZ2UgY2xhc3MgdG8gJFNUT1JBR0VfQ0xBU1MgIgogICAgICAgICAgICAgZWNobyAtZSAiUGxlYXNlIE5PVEUsIGlmIGl0IGlzIG9uIGEgc2luZ2xlIGNsdXN0ZXIgdGhlbiB5b3UgaGF2ZSB0byBtYWtlIHN1cmUgdGhpcyBzdG9yYWdlIGNsYXNzIFwiJFNUT1JBR0VfQ0xBU1NcIiBpcyBhdmFpbGFibGUsIG90aGVyd2lzZSB0aGUgS3ViZXJuZXRlcyB3aWxsIGZhaWwhISIKICAgICAgICAgICAgIGVjaG8gLWUgIiAgICAgICAgICAgICBpZiBpdCBpcyBvbiBhIG1hc3RlciwgeW91IG11c3QgZW5zdXJlIHRoaXMgc3RvcmFnZSBjbGFzcyBcIiRTVE9SQUdFX0NMQVNTXCIgaXMgYXZhaWxhYmxlIGJlZm9yZSB3b3JrZXIgbm9kZSBpcyBqb2luZWQgdG8gdGhpcyBjbHVzdGVyISFcblxuIgoJICBmaQogICAgICBmaSAKICAgZWxzZQogICAgICBpZiBbICIkU1RPUkFHRV9DTEFTUyIgPSAiIiAtYSAiJExPQ0FMU1RPUkFHRSIgIT0gIiIgXQogICAgICB0aGVuCiAgICAgICAgIGVjaG8gLWUgIlxuVHJ5aW5nIHRvIGdhdGhlciBzdG9yYWdlIGNsYXNzIGZyb20ga3ViZXJuZXRlcyBjbHVzdGVyLi4uIgogICAgICAgICBTVE9SQUdFX0NMQVNTPWBrdWJlY3RsIC0ta3ViZWNvbmZpZz0vZXRjL2t1YmVybmV0ZXMvYWRtaW4uY29uZiBnZXQgcHYgLW8gY3VzdG9tLWNvbHVtbnM9U1RPUkFHRUNMQVNTOi5zcGVjLnN0b3JhZ2VDbGFzc05hbWUgMj4vZGV2L251bGx8IGdyZXAgLXYgIlNUT1JBR0VDTEFTUyIgfCBoZWFkIC0xYAogICAgICAgICBpZiBbICQ/IC1uZSAwIF0KICAgICAgICAgdGhlbiAKICAgCSAgICBlY2hvICJObyBzdG9yYWdlIGNsYXNzIGlzIGRlZmluZWQuLi4udGhlcmVmb3JlICRMT0NBTFNUT1JBR0UgaXMgdXNlZCEuLi5lbmZvcmNpbmcgc3RvcmFnZSBjbGFzcz1sb2NhbC1zdG9yYWdlIiAKICAgCSAgICBTVE9SQUdFX0NMQVNTPSJsb2NhbC1zdG9yYWdlIgogICAgICAgICBlbHNlCiAgICAgICAgICAgIExPQ0FMU1RPUkFHRT1ga3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgZ2V0IHB2IC1vIGN1c3RvbS1jb2x1bW5zPUxPQ0FMU1RHOi5zcGVjLmxvY2FsLnBhdGggMj4vZGV2L251bGwgfCBncmVwIC12ICJMT0NBTFNURyIgfCBoZWFkIC0xYAogICAgICAgICAgICBpZiBbICIkTE9DQUxTVE9SQUdFIiA9ICIiIF0KICAgICAgICAgICAgdGhlbgogICAgICAgICAgICAgICBMT0NBTFNUT1JBR0U9IiRMT0NBTF9TVE9SQUdFIgogICAgICAgICAgICAgICBTVE9SQUdFX0NMQVNTPSJsb2NhbC1zdG9yYWdlIgogICAgICAgICAgICBlbHNlCiAgIAkgICAgICAgTE9DQUxTVE9SQUdFPWBkaXJuYW1lICRMT0NBTFNUT1JBR0VgCiAgICAgICAgICAgIGZpCiAgICAgICAgIGZpCiAgICAgIGVsaWYgWyAiJExPQ0FMX1NUT1JBR0UiICE9ICIiIC1hICIkU1RPUkFHRV9DTEFTUyIgIT0gIiIgXQogICAgICB0aGVuCiAgICAgICAgIGVjaG8gIi1sIHBhcmFtZXRlciBpcyBpZ25vcmVkIGFzIHN0b3JhZ2UgY2xhc3MgaGFzIGJlZW4gc3BlY2lmaWVkISEiCiAgICAgICAgIGVjaG8gIlVzaW5nIGt1YmVybmV0ZXMgc3RvcmFnZSBjbGFzcyAkU1RPUkFHRV9DTEFTUyIKICAgICAgICAgTE9DQUxTVE9SQUdFPSJOb25lIgogICAgICBlbHNlCiAgICAgICAgIGVjaG8gIlVzaW5nIGxvY2FsIHN0b3JhZ2UgcHJldmlvdXMgc2V0dGluZy4uLi4uIgogICAgICBmaQogICBmaSAKCiAgIGlmIFsgYGVjaG8gJFNUT1JBR0VfQ0xBU1MgfCBncmVwIGxvY2FsIHwgd2MgLWxgIC1uZSAwIF0KICAgdGhlbgogICAgICBjaGVja19kaXNrc3BhY2UKICAgZmkKCiAgIGdldF9kaXN0cm9fdmVyc2lvbgoKICAgaWYgWyAiJChlY2hvICRNT0RFIHwgZ3JlcCByZXNldCB8IGN1dCAtZjEgLWQnLScpIiA9ICJyZXNldCIgLW8gIiRNT0RFIiA9ICJhZGQtd29ya2VyIiBdCiAgIHRoZW4KICAgICAgPiAkUFJPR1JFU1NfRklMRSAKICAgICAgPiAkTE9HX0ZJTEUKICAgICAgZWNobyAtZSAiXG5cblJlc2V0dGluZyBhbGwgY29uZmlndXJhdGlvbi4uLi4gUmVpbnN0YWxsIGV2ZXJ5dGhpbmcgZnJvbSBzY3JhdGNoIS4uLlxuIgogICAgICBlY2hvIC1lICJTaHV0ZG93biBrdWJlbGV0IGFuZCBrdWJlcm5ldGVzLi4uLi4gIgogICAgICBraWxsX2t1YmVsZXRfYW5kX2s4cwogICAgICBbWyAtZiAkRU5WRklMRSBdXSAmJiBzZWQgLWkgIi9leHBvcnQgU0VUVVBLOFMuKlx8ZXhwb3J0IFBSRVJFUVMuKi9kIiAkRU5WRklMRQogICAgICB1bnNldCBTRVRVUEs4UyBQUkVSRVFTCiAgICAgIAogICBmaQoKICAgZXhwb3J0IEtVQkVBRE1BUkc9IiIKICAgVVNFUkZST01GSUxFPWBzZWQgLW4gJ3MvXlVTRVI9XChbYS16QS1aMC05XVwrXCkvXDEvcCcgJFBST0dSRVNTX0ZJTEVgCiAgIGlmIFsgIiRVU0VSRlJPTUZJTEUiICE9ICIkVEhFVVNFUiIgLWEgIiRVU0VSRlJPTUZJTEUiICE9ICIiIF0KICAgdGhlbgogICAgICBbWyAtZCAvaG9tZS8kVVNFUkZST01GSUxFIF1dICYmIFRIRVVTRVI9IiRVU0VSRlJPTUZJTEUiCiAgIGZpCgogICBlY2hvIC1lICJZb3UgYXJlIHJ1bm5pbmcgTGludXggZGlzdHJvIDogJERJU1RSTyAkQUxMVkVSIC4uLi4uIgogICBlY2hvIC1lICJcbn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4iCiAgIGVjaG8gLWUgIiRUSEVNRVNTQUdFIgogICBlY2hvIC1lICJcblJ1bm5pbmcga3ViZXJuZXRlcyBvbiBhICRUSEVOT0RFIG5vZGUiCiAgIGVjaG8gLWUgIlxuS3ViZSBSZWd1bGFyIHVzZXIgICA6ICRUSEVVU0VSICIKICAgZWNobyAtZSAiXG5LdWJlcm5ldGVzIHN0b3JhZ2UgIDogJEtVQkVTVE9SQUdFICIKICAgZWNobyAtZSAiXG5Db250YWluZXIgc3RvcmFnZSAgIDogJENPTlRBSU5FUlNUT1JBR0UgIgogICBlY2hvIC1lICJcbkNvbnRhaW5lciBSdW50aW1lICAgOiAkQ1JJVVNFRCAiCiAgIGVjaG8gLWUgIlxuVXNpbmcgc3RvcmFnZSBjbGFzcyA6ICRTVE9SQUdFX0NMQVNTICIKICAgW1sgIiRNT0RFIiA9ICJyZXNldC13b3JrZXIiIHx8ICIkTU9ERSIgPSAiYWRkLXdvcmtlciIgXV0gJiYgTkVUUExVR0lOPSJmb2xsb3cgTWFzdGVyIG5vZGUiCiAgIGVjaG8gLWUgIlxuTmV0d29yayBwbHVnaW4gICAgICA6ICRORVRQTFVHSU4gIgogICBbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBERUJVR01PREU9InllcyIgfHwgREVCVUdNT0RFPSJubyIKICAgZWNobyAtZSAiXG5EZWJ1ZyBNb2RlICAgICAgICAgIDogJERFQlVHTU9ERSAiCiAgIGVjaG8gLWUgIlxufn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuXG4iCgogICBbWyAiJFBSRVJFUVMiID0gIiIgXV0gJiYgaW5zdGFsbF9wcmVyZXFzCiAgIG1vZGlmeV9zc2xfY29uZmlnCiAgIFtbICIkU0VUVVBLOFMiID0gIiIgXV0gJiYgIHNldHVwX2s4cwogICBbWyAiJE1PREUiID0gInNpbmdsZSIgIHx8ICIkTU9ERSIgPSAicmVzZXQtc2luZ2xlIiBdXSAmJiB1bnRhaW50X21hc3Rlcl9ub2RlCgogICBFUlJPUj1gc3UgLSAkVEhFVVNFUiAtYyAia3ViZWN0bCBnZXQgbm9kZXMgfCBncmVwIFwiLiplcnJvci4qXCIiIDI+JjFgCiAgIHdoaWxlIFsgIiRFUlJPUiIgIT0gIiIgXQogICBkbwogICAgICBbWyAiJEVSUk9SIiA9fiAuKmNvbW1hbmRbWzpzcGFjZTpdXW5vdFtbOnNwYWNlOl1dLiogXV0gJiYgZWNobyAiQ29ycnVwdGVkIGluc3RhbGxhdGlvbiwgZXhpdGluZy4uLiIgJiYgZXhpdCAxCiAgICAgIGVjaG8gIkVycm9yICRFUlJPUiAsIHRoZSBrdWJlbGV0IG1heSBub3QgYmUgcnVubmluZywgb3Iga3ViZXJuZXRlcyBpcyBicm9rZW4uLmV4aXRpbmcuLi4uIiAKICAgICAgZWNobyAiSG93ZXZlciwgaXQgbWF5IGJlIHRoZSBwcm9ibGVtIHdpdGggdGhlIGNvbmZpZyBmaWxlIGlzIG5vdCBjb3BpZWQuLiIKICAgICAgaWYgWyAiJChlY2hvICRNT0RFIHwgZ3JlcCB3b3JrZXIgfCBjdXQgLWYyIC1kJy0nKSIgPSAid29ya2VyIiBdCiAgICAgIHRoZW4KICAgICAgICAgW1sgLWYgL2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgXV0gJiYgY3AgL2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgL2hvbWUvJFRIRVVTRVIvLmt1YmUvY29uZmlnCiAgICAgIGZpCiAgICAgIEVSUk9SPWBzdSAtICRUSEVVU0VSIC1jICJrdWJlY3RsIGdldCBub2RlcyB8IGdyZXAgXCIuKmVycm9yLipcIiIgMj4mMWAKICAgICAgc2xlZXAgMgogICBkb25lCgogICBpc19jbHVzdGVyX3JlYWR5CiAgIFtbICIkTU9ERSIgPSAic2luZ2xlIiAgfHwgIiRNT0RFIiA9ICJyZXNldC1zaW5nbGUiIF1dICYmIHVudGFpbnRfbWFzdGVyX25vZGUKICAgW1sgIiRNT0RFIiA9ICJyZXNldC1tYXN0ZXIiIF1dICYmIGVjaG8gIkluc3RhbGxpbmcgazhzIGRhc2hib2FyZC4uLi4iICYmIGluc3RhbGxfazhzX2Rhc2hib2FyZAoKCiAgIGlmIFsgYGVjaG8gJFNUT1JBR0VfQ0xBU1MgfCBncmVwIGxvY2FsIHwgd2MgLWxgIC1uZSAwIF0KICAgdGhlbgogICAgICBzZXR1cF9sb2NhbF9kaXNrCiAgIGZpCgogICBpZiBbICIkTU9ERSIgPSAicmVzZXQtd29ya2VyIiBdCiAgIHRoZW4gCiAgICAgIGVjaG8gIlNldHRpbmcgdGhpcyBzZXJ2ZXIgYXMgYSB3b3JrZXIgbm9kZS4uIiAKICAgZWxpZiBbICIkTU9ERSIgPSAicmVzZXQtc2luZ2xlIiBdCiAgIHRoZW4KICAgICAgW1sgIiRMT0NBTFNUT1JBR0UiID0gIiRMT0NBTF9TVE9SQUdFIiBdXSAmJiBzZXR1cF9sb2NhbF9kaXNrCiAgIGVsaWYgWyAiJE1PREUiID0gImFkZC13b3JrZXIiIF0KICAgdGhlbgogICAgICBlY2hvICJBZGRpbmcgd29ya2VyIG5vZGUgb25seS4uLiBleGl0aW5nLi4uLiIKICAgICAgZXhpdCAwCiAgIGVsc2UKICAgICAgUk9MRT1gc3UgLSAkVEhFVVNFUiAtYyAia3ViZWN0bCBnZXQgbm9kZXMgLS1uby1oZWFkZXJzPXRydWUgfCBncmVwICQoaG9zdG5hbWUgLXMpIHwgYXdrICd7cHJpbnQgXFwkM30nImAKICAgICAgaWYgWyAiJE1PREUiID0gInNpbmdsZSIgXQogICAgICB0aGVuCiAgICAgICAgIGVjaG8gIlVzaW5nIHN0b3JhZ2UgY2xhc3MgJFNUT1JBR0VfQ0xBU1MiCgkgaWYgWyAiJFNUT1JBR0VfQ0xBU1MiID0gImxvY2FsLXN0b3JhZ2UiIF0KCSB0aGVuCiAgICAgICAgICAgIGVjaG8gIk1vdW50aW5nIGxvY2FsLXN0b3JhZ2UgJHtMT0NBTFNUT1JBR0V9Li4uIgogICAgICAgICAgICBmb3IgaSBpbiAkKHNlcSAxICRQVl9DT1VOVCk7IGRvCiAgICAgICAgICAgICAgICB2b2w9InZvbCRpIgogICAgICAgICAgICAgICAgW1sgISAtZCAke0xPQ0FMU1RPUkFHRX0vJHZvbCBdXSAmJiBta2RpciAtcCAke0xPQ0FMU1RPUkFHRX0vJHZvbAogICAgICAgICAgICAgICAgaWYgWyAiJChkZiAke0xPQ0FMU1RPUkFHRX0vJHZvbCB8IGF3ayAne3ByaW50ICRORn0nIHwgc2VkIDFkKSIgPSAiJHtMT0NBTFNUT1JBR0V9LyR2b2wiIF0KCSAgICAgICAgdGhlbgoJCSAgIHJtIC1yZiAke0xPQ0FMU1RPUkFHRX0vJHZvbC8qCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICBtb3VudCAtLWJpbmQgJHtMT0NBTFNUT1JBR0V9LyR2b2wgJHtMT0NBTFNUT1JBR0V9LyR2b2wKCSAgICAgICAgZmkKICAgICAgICAgICAgZG9uZQoJIGZpCiAgICAgIGVsc2UKICAgICAgICAgaWYgWyAiJFJPTEUiID0gIm1hc3RlciIgXQogICAgICAgICB0aGVuCiAgICAgICAgICAgIGVjaG8gIlRoaXMgc2VydmVyICQoaG9zdG5hbWUgLXMpIGlzICRST0xFIG5vZGUiCiAgICAgICAgICAgIGVjaG8gIkV4aXRpbmcuLi4iCiAgICAgICAgICAgIGV4aXQgMQogICAgICAgICBmaQogICAgICBmaQogICBmaQogfSB8IHRlZSAkTE9HX0ZJTEUKfQoKY3JlYXRlX3VzZXJfcHVia2V5KCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIFJFR1VTRVI9IiQxIgogICBlY2hvICJDcmVhdGluZyBwdWJsaWMga2V5IGZvciB1c2VyICRSRUdVU0VSIgogICBpZiBbICIkUkVHVVNFUiIgIT0gIiIgXQogICB0aGVuCiAgICAgIHN1IC0gJFJFR1VTRVIgLWMgIltbICEgLWYgfi8uc3NoL2lkX3JzYS5wdWIgXV0gJiYgZWNobyAtbiBcIiBDUkVBVElORyBpZF9yc2EucHViIGZvciB1c2VyICRSRUdVU0VSIC4uLlwiICYmIHNzaC1rZXlnZW4gLWYgfi8uc3NoL2lkX3JzYSAtUCBcIlwiICYmIFtbIFwkPyAtbmUgMCBdXSAmJiBlY2hvIC1lIFwiXG5GYWlsZWQgdG8gY3JlYXRlIHB1YmxpYyBrZXkgZm9yIHVzZXIgJFJFR1VTRVIgLi4uIFwiIgogICBmaQp9CgpjcmVhdGVfdHJ1c3RlZF9zc2goKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKICAgW1sgISAtZiB+Ly5zc2gvaWRfcnNhLnB1YiBdXSAmJiBlY2hvIC1uICIgQ1JFQVRJTkcuLi4iICYmIHNzaC1rZXlnZW4gLWYgfi8uc3NoL2lkX3JzYSAtUCAiIiAmJiBbWyAkPyAtbmUgMCBdXSAmJiBlY2hvIC1lICJcbkZhaWxlZCB0byBjcmVhdGUgcHVibGljIGtleSBmb3IgdXNlciAkVVNFUiAuLi5leGl0aW5nLi4iICYmIGV4aXQgMQoKICAgaWYgWyAiJFVTRVJOQU1FIiA9ICIiIF0KICAgdGhlbgogICAgICBlbnRlcl9pbnB1dCAiRW50ZXIgVXNlcm5hbWUgdG8gY29ubmVjdCB0byBhbGwgd29ya2VyIG5vZGVzPyIKICAgICAgVVNFUk5BTUU9IiRBTlMiCiAgICAgIGVjaG8gImV4cG9ydCBVU0VSTkFNRT1cIiRVU0VSTkFNRVwiIiA+PiAkRU5WRklMRQogICBlbHNlCiAgICAgIGlmIFsgIiROT1BST01QVCIgPSAiIiBdCiAgICAgIHRoZW4KICAgICAgICAgIGVudGVyX2lucHV0ICJFbnRlciBVc2VybmFtZSB0byBjb25uZWN0IHRvIGFsbCB3b3JrZXIgbm9kZXM/IGRlZmF1bHQ6ICRVU0VSTkFNRSA/IgogICAgICAgICAgW1sgIiRBTlMiICE9ICIiIF1dICYmIFVTRVJOQU1FPSIkQU5TIgogICAgICBmaQogICBmaQoKICAgaWYgWyAiJFBBU1NXT1JEIiA9ICIiIF0KICAgdGhlbgogICAgICBlbnRlcl9pbnB1dCAiRW50ZXIgcGFzc3dvcmQgdG8gY29ubmVjdCB0byBhbGwgd29ya2VyIG5vZGVzID8iIDEKICAgICAgUEFTU1dPUkQ9IiRBTlMiCiAgICAgIFBBU1NFTkNSWVBURUQ9JChlY2hvICRQQVNTV09SRCB8IGJhc2U2NCkKICAgICAgZWNobyAiZXhwb3J0IFBBU1NXT1JEPVwiJFBBU1NFTkNSWVBURURcIiIgPj4gJEVOVkZJTEUKICAgZWxzZQogICAgICBQQVNTV09SRD0kKGVjaG8gJFBBU1NXT1JEIHwgYmFzZTY0IC1kKQogICBmaQogICBzc2hwYXNzIDI+L2Rldi9udWxsIDE+L2Rldi9udWxsCiAgIFtbICQ/IC1uZSAwIF1dICYmIGluc3RhbGxfcGtnIHNzaHBhc3MKCiAgIGZvciBXS05PREUgaW4gIiR7SzhTTk9ERVNbQF19IgogICBkbwogICAgICBlY2hvICJDb3B5aW5nIHB1YmxpYyBrZXkgZnJvbSAkKGhvc3RuYW1lKSB0byAkV0tOT0RFIC4uLiIKICAgICAgc3NocGFzcyAtcCAiJFBBU1NXT1JEIiBzc2gtY29weS1pZCAtbyAiU3RyaWN0SG9zdEtleUNoZWNraW5nIG5vIiAkVVNFUk5BTUVAJHtXS05PREV9CiAgICAgIFtbICQ/IC1uZSAwIF1dICYmIGVjaG8gInBhc3N3b3JkIHlvdSB0eXBlZCBtdXN0IGJlIHdyb25nISEsIHBsZWFzZSBzZXQgdGhlIGNvcnJlY3QgcGFzc3dvcmQgYW5kIHRyeSBhZ2Fpbi4uIHJlbW92aW5nIHBzc3dvcmQgZnJvbSB0aGUgZmlsZS4uIHBsZXNlIHJlLXJ1bi4uLiIgJiYgW1sgLWYgJEVOVkZJTEUgXV0gJiYgc2VkIC1pICIvXmV4cG9ydCBQQVNTV09SRC4qL2QiICRFTlZGSUxFICYmIGV4aXQgMQogICAgICBzc2ggIC1vICJTdHJpY3RIb3N0S2V5Q2hlY2tpbmcgbm8iICRVU0VSTkFNRUAke1dLTk9ERX0gIgpST09USE9NRT1cJChjYXQgL2V0Yy9wYXNzd2QgfCBncmVwIHJvb3QgfCBjdXQgLWY2IC1kOikKc3VkbyBjcCB+Ly5zc2gvYXV0aG9yaXplZF9rZXlzIFwkUk9PVEhPTUUvLnNzaAoiCiAgIGRvbmUKfQoKCmNoZWNrX3dvcmtlcl9jb25uKCkKewpbWyAiJERFQlVHIiA9ICIxIiBdXSAmJiBlY2hvIC1lICJcblxuXG5cbiIgJiYgc2V0IC14CiAgIGZvciBXS05PREUgaW4gIiR7SzhTTk9ERVNbQF19IgogICBkbwogICAgICBzc2ggIC1vICJTdHJpY3RIb3N0S2V5Q2hlY2tpbmcgbm8iIHJvb3RAJHtXS05PREV9ICJlY2hvIHN1Y2Nlc3NmdWxseSBlc3RhYmxpc2hpbmcgcGFzc3dvcmRsZXNzIGNvbm5lY3Rpb24gdG8gcm9vdEBcJChob3N0bmFtZSkiCiAgICAgIFtbICQ/IC1uZSAwIF1dICYmIGVjaG8gIkZhaWxlZCB0byBjb25uZWN0IHRvICR7V0tOT0RFfSB1c2luZyByb290Li4uIgogICBkb25lCn0KCnJ1bl9zZXR1cF9vbl93b3JrZXIoKQp7CltbICIkREVCVUciID0gIjEiIF1dICYmIGVjaG8gLWUgIlxuXG5cblxuIiAmJiBzZXQgLXgKICAgV09SS0VSU1RBVD0vdG1wLyR7V0tOT0RFfS1zdGF0dXMubG9nCiAgID4gJFdPUktFUlNUQVQKICAgc3NoIC1vICJTdHJpY3RIb3N0S2V5Q2hlY2tpbmcgbm8iIHJvb3RAJHtXS05PREV9ICIKZXhwb3J0IFRIRU5PREU9JFRIRU5PREUKZXhwb3J0IFRIRVVTRVI9JFRIRVVTRVIKZXhwb3J0IEtVQkVTVE9SQUdFPSRLVUJFU1RPUkFHRQpleHBvcnQgQ09OVEFJTkVSU1RPUkFHRT0kQ09OVEFJTkVSU1RPUkFHRQpleHBvcnQgU1RPUkFHRV9DTEFTUz0kU1RPUkFHRV9DTEFTUwpleHBvcnQgTU9ERT1cJChlY2hvICRNT0RFIHwgc2VkICdzL21hc3Rlci93b3JrZXIvZycpCmV4cG9ydCBDUklPX1ZFUlNJT049JENSSU9fVkVSU0lPTgpleHBvcnQgREVGQVVMVF9TVE9SQUdFPSRERUZBVUxUX1NUT1JBR0UKZXhwb3J0IERJU1RSTz0kRElTVFJPCmV4cG9ydCBWRVJTSU9OX0lEPSRWRVJTSU9OX0lECmV4cG9ydCBGVUxMX1ZFUlNJT05fSUQ9JEZVTExfVkVSU0lPTl9JRApleHBvcnQgQ1JJT19WRVJTSU9OPSRDUklPX1ZFUlNJT04KZXhwb3J0IENSSVVTRUQ9JENSSVVTRUQKZXhwb3J0IFRJTUVPVVQ9NjAwCmV4cG9ydCBERUJVRz0kREVCVUcKZXhwb3J0IFJFVFJZX0lOVEVSVkFMPTUKZXhwb3J0IEVOVkZJTEU9JEVOVkZJTEUKZXhwb3J0IFJVTkNPTlRBSU5FUlM9JFJVTkNPTlRBSU5FUlMKZXhwb3J0IFJFQk9PVD0wCmV4cG9ydCBLVUJFQURNX0pPSU5fQ01EPVwiJEtVQkVBRE1fSk9JTl9DTURcIgpbWyAtZiBcJEVOVkZJTEUgXV0gJiYgcm0gLWYgXCRFTlZGSUxFCiQodHlwZXNldCAtZiBydW5fc2V0dXApCiQodHlwZXNldCAtZiBnZXRfZGlzdHJvX3ZlcnNpb24pCiQodHlwZXNldCAtZiBzZXRfY3Jpb19jZ3JvdXBfbWFuYWdlcikKJCh0eXBlc2V0IC1mIGFkZF9jcmlvX25ldGNvbmZpZykKJCh0eXBlc2V0IC1mIHJlc2V0X2t1YmVhZG0pCiQodHlwZXNldCAtZiBjaGVja19jZ3JvdXBfdjIpCiQodHlwZXNldCAtZiByZW1vdmVfbW91bnRwb2ludHMpCiQodHlwZXNldCAtZiBkZXN0cm95X2V2ZXJ5dGhpbmcpCiQodHlwZXNldCAtZiBtb2RpZnlfc3NsX2NvbmZpZykKJCh0eXBlc2V0IC1mIGluc3RhbGxfcGtnX2NlbnRvcykKJCh0eXBlc2V0IC1mIGluc3RhbGxfcGtnX3N1c2UpCiQodHlwZXNldCAtZiBpbnN0YWxsX3BrZ191YnVudHUpCiQodHlwZXNldCAtZiByZW1vdmVfbGlua2RpcnMpCiQodHlwZXNldCAtZiByZW1vdmVfY3Jpb19kaXJzKQokKHR5cGVzZXQgLWYgcmVtb3ZlX2NvbnRhaW5lcmRfZGlycykKJCh0eXBlc2V0IC1mIGluc3RhbGxfcGtnX2RlYmlhbikKJCh0eXBlc2V0IC1mIGluc3RhbGxfcGtnX2FyY2hsaW51eCkKJCh0eXBlc2V0IC1mIGluc3RhbGxfcHJlcmVxcykKJCh0eXBlc2V0IC1mIGluc3RhbGxfY2FsaWNvX25mdGFibGVzKQokKHR5cGVzZXQgLWYgaW5zdGFsbF9uZXR3b3JrKQokKHR5cGVzZXQgLWYgZ2V0X2NyaV9wYXJhbSkKJCh0eXBlc2V0IC1mIHNldHVwX2s4cykKJCh0eXBlc2V0IC1mIHVudGFpbnRfbWFzdGVyX25vZGUpCiQodHlwZXNldCAtZiBzZXR1cF9sb2NhbF9kaXNrKQokKHR5cGVzZXQgLWYgaXNfc2VydmljZV9hY3RpdmUpCiQodHlwZXNldCAtZiBpc19jbHVzdGVyX3JlYWR5KQokKHR5cGVzZXQgLWYgaW5zdGFsbF9rOHNfZGFzaGJvYXJkKQokKHR5cGVzZXQgLWYga2lsbF9rdWJlbGV0X2FuZF9rOHMpCiQodHlwZXNldCAtZiB1c2FnZV9rOHMpCiQodHlwZXNldCAtZiBnZXRfcGFyYW1zKQokKHR5cGVzZXQgLWYgY2hlY2tfbW91bnRwb2ludCkKJCh0eXBlc2V0IC1mIGNoZWNrX2Rpc2tzcGFjZSkKJCh0eXBlc2V0IC1mIGNvcHlfcHVibGljX2tleSkKJCh0eXBlc2V0IC1mIGdldF9rdWJlYWRtX2pvaW5fY21kKQokKHR5cGVzZXQgLWYgcmVzZXRfb25seSkKJCh0eXBlc2V0IC1mIGRlbGV0ZV9lcGhlbWVyYWxfZGlza3MpCiQodHlwZXNldCAtZiBhZGRfZ3J1Yl9wYXJhbSkKZXhwb3J0IEs4U0RFUExPWV9ESVI9azhzZGVwbG95CmV4cG9ydCBMT0dfRklMRT1rOHNkZXBsb3kubG9nCmV4cG9ydCBQUk9HUkVTU19GSUxFPWs4c3Byb2dyZXNzLmxvZwpleHBvcnQgREVCSUFOX0ZST05URU5EPW5vbmludGVyYWN0aXZlCmV4cG9ydCBQVl9DT1VOVD0ke1BWQ09VTlQ6LTMwfQpta2RpciAtcCBcJEs4U0RFUExPWV9ESVIKY2QgXCRLOFNERVBMT1lfRElSLwp0b3VjaCBcJExPR19GSUxFCnRvdWNoIFwkUFJPR1JFU1NfRklMRQpjaGVja19jZ3JvdXBfdjIKaWYgWyBcJD8gLW5lIDAgXQp0aGVuCiAgIGV4aXQgMQplbHNlCiAgIGlmIFsgXCJcJFJFQk9PVFwiID0gXCIxXCIgXQogICB0aGVuCiAgICAgIGVjaG8gXCJyZWJvb3RpbmcgXCQoaG9zdG5hbWUpXCIKICAgICAgcmVib290CiAgIGVsc2UKICAgICAgcnVuX3NldHVwICRXT1JLRVJNT0RFCiAgICAgIGNob3duICRUSEVVU0VSOiRUSEVVU0VSIC9ob21lLyRUSEVVU0VSLy5zc2gvYXV0aG9yaXplZF9rZXlzCiAgIGZpCmZpCiIgfCB0ZWUgLWEgJFdPUktFUlNUQVQKfQoKTU9ERT0iIgpjaGVja19jZ3JvdXBfdjIKaWYgWyAkPyAtbmUgMCBdCnRoZW4KICAgZXhpdCAxCmVsc2UKICAgaWYgWyAiJFJFQk9PVCIgPSAiMSIgXQogICB0aGVuIAogICAgICBlY2hvICJSZWJvb3RpbmcgdGhpcyBzZXJ2ZXIgJChob3N0bmFtZSkgLi4uIgogICAgICBlY2hvICJQbGVhZXMgcmUtcnVuIHRoaXMgc2NyaXB0IGFmdGVyIHRoZSBzZXJ2ZXIgaXMgcmVib290ZWQuLi4iCiAgICAgIHJlYm9vdAogICBmaQpmaQpnZXRfcGFyYW1zICIkQCIKY2hlY2tfbWFzdGVyX3dvcmtlcgpjcmVhdGVfdHJ1c3RlZF9zc2gKY2hlY2tfd29ya2VyX2Nvbm4KaWYgWyAiJE1PREUiID0gInJlc2V0IiAtbyAiJE1PREUiID0gIiIgLW8gIiRNT0RFIiA9ICJyZXNldC1tYXN0ZXIiIF0KdGhlbgogICBNT0RFPSJyZXNldC1tYXN0ZXIiCiAgIFdPUktFUk1PREU9InJlc2V0LXdvcmtlciIKZWxzZQogICBXT1JLRVJNT0RFPSIkTU9ERSIKZmkKTUFTVEVSU1RBVFVTPSQoa3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgZ2V0IG5vZGVzIC1vIGpzb25wYXRoPSJ7Lml0ZW1zWz8oQC5tZXRhZGF0YS5uYW1lPT1cIiR7SzhTTUFTVEVSfVwiKV0uc3RhdHVzLmNvbmRpdGlvbnNbPyhALnJlYXNvbj09J0t1YmVsZXRSZWFkeScpXS50eXBlfSIgMj4vZGV2L251bGwpCltbICIkTUFTVEVSU1RBVFVTIiA9ICIiIF1dICYmIFtbIC1mICRFTlZGSUxFIF1dICYmIHNlZCAtaSAtZSAicy9eZXhwb3J0IFBSRVJFUVMuKlx8XmV4cG9ydCBTRVRVUEs4Uy4qLy9nIiAkRU5WRklMRQppZiBbICIkTU9ERSIgIT0gIiRXT1JLRVJNT0RFIiBdIAp0aGVuCiAgIGVjaG8gIlJ1bm5pbmcga3ViZXJuZXRlcyBzZXR1cCBvbiBNYXN0ZXIgTm9kZS4uLiIKICAgcnVuX3NldHVwICR7TU9ERX0gCiAgIGV4cG9ydCBLVUJFQURNX0pPSU5fQ01EPSIkKGNhdCBrOHNkZXBsb3kubG9nIHwgc3RyaW5ncyB8IGVncmVwICdrdWJlYWRtIGpvaW4gfC0tZGlzY292ZXJ5LXRva2VuJykiCiAgIGNyZWF0ZV91c2VyX3B1YmtleSAkVEhFVVNFUgpmaQoKCmZvciBXS05PREUgaW4gIiR7SzhTTk9ERVNbQF19IgpkbwoKICAgV09SS0VSU1RBVFVTPSQoa3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgZ2V0IG5vZGVzIC1vIGpzb25wYXRoPSJ7Lml0ZW1zWz8oQC5tZXRhZGF0YS5uYW1lPT1cIiR7V0tOT0RFfVwiKV0uc3RhdHVzLmNvbmRpdGlvbnNbPyhALnJlYXNvbj09J0t1YmVsZXRSZWFkeScpXS50eXBlfSIgMj4vZGV2L251bGwpCiAgIFtbICIkV09SS0VSU1RBVFVTIiAhPSAiIiBdXSAmJiBjb250aW51ZQogICBpZiBbICIkTU9ERSIgIT0gIiRXT0tFUk1PREUiIF0KICAgdGhlbgogICAgICAKICAgICAgaWYgW1sgISAkTU9ERSA9fiByZXNldC1hbGx8ZGVzdHJveS1hbGwgXV0KICAgICAgdGhlbgogICAgICAgICBzc2ggLW8gIlN0cmljdEhvc3RLZXlDaGVja2luZyBubyIgcm9vdEAke1dLTk9ERX0gIltbICEgLWQgL2hvbWUvJFRIRVVTRVIvLmt1YmUgXV0gJiYgbWtkaXIgLXAgL2hvbWUvJFRIRVVTRVIvLmt1YmU7IFtbICEgLWQgL2hvbWUvJFRIRVVTRVIvLnNzaCBdXSAmJiBta2RpciAtcCAvaG9tZS8kVEhFVVNFUi8uc3NoICYmIHRvdWNoIC9ob21lLyRUSEVVU0VSLy5zc2gvYXV0aG9yaXplZF9rZXlzICYmIGNobW9kIGdvLXJ3eCAvaG9tZS8kVEhFVVNFUi8uc3NoL2F1dGhvcml6ZWRfa2V5cyIgIAogICAgICAgICBlY2hvICJDb3B5aW5nIGFkbWluLmNvbmYgZnJvbSAkSzhTTUFTVEVSIHRvICR7V0tOT0RFfSIKICAgICAgICAgc2NwIC1vICJTdHJpY3RIb3N0S2V5Q2hlY2tpbmcgbm8iIC9ldGMva3ViZXJuZXRlcy9hZG1pbi5jb25mICByb290QCR7V0tOT0RFfTovaG9tZS8kVEhFVVNFUi8ua3ViZS9jb25maWcKICAgICAgICAgZWNobyAiQ29weWluZyBwdWJsaWNrZXkgb2YgdXNlciAkVEhFVVNFUiBmcm9tICRLOFNNQVNURVIgdG8gJHtXS05PREV9IgogICAgICAgICBzY3AgLW8gIlN0cmljdEhvc3RLZXlDaGVja2luZyBubyIgL2hvbWUvJFRIRVVTRVIvLnNzaC9pZF9yc2EucHViICByb290QCR7V0tOT0RFfTovaG9tZS8kVEhFVVNFUi8uc3NoL2F1dGhvcml6ZWRfa2V5cwogICAgICAgICBXT1JLRVJOQU1FPSQoa3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgZ2V0IG5vZGVzICR7V0tOT0RFfSAtbyBOQU1FIDI+L2Rldi9udWxsKQogICAgICAgICBbWyAiJFdPUktFUk5BTUUiICE9ICIiIF1dICYmIGt1YmVjdGwgLS1rdWJlY29uZmlnPS9ldGMva3ViZXJuZXRlcy9hZG1pbi5jb25mIGRlbGV0ZSAkV09SS0VSTkFNRSAKICAgICAgZWxzZQogICAgICAgICBlY2hvICJQZXJmb3JtaW5nICRNT0RFIG9uICRXS05PREUgLi4uIgogICAgICBmaQogICBmaQogICAgICBydW5fc2V0dXBfb25fd29ya2VyCiAgICAgIHNsZWVwIDIKICAgICAgaWYgWyAkKGdyZXAgcmVib290aW5nICRXT1JLRVJTVEFUIHwgd2MgLWwpIC1uZSAwIF0KICAgICAgdGhlbgoJICBBVkFJTD0kKHNzaCByb290QCR7V0tOT0RFfSAiZWNobyBcJChob3N0bmFtZSAyPi9kZXYvbnVsbCkiKQoJICB3aGlsZSBbICIkQVZBSUwiID0gIiIgXQogICAgICAgICAgZG8KCSAgICAgc2xlZXAgMwoJICAgICBlY2hvICJXYWl0aW5nIGZvciAkV0tOT0RFIHRvIHVwIGFuZCBydW5uaW5nIC4uLiIKCSAgICAgQVZBSUw9JChzc2ggcm9vdEAke1dLTk9ERX0gImVjaG8gXCQoaG9zdG5hbWUgMj4vZGV2L251bGwpIikKCSAgZG9uZQoJICBydW5fc2V0dXBfb25fd29ya2VyCiAgICAgIGZpCiAgICAgIENOVD0kKCggQ05UICsgMSApKQpkb25lCgpbWyAiJE1PREUiID0gIiRXT1JLRVJNT0RFIiBdXSAmJiBydW5fc2V0dXAgJHtNT0RFfSB8fCBrdWJlY3RsIC0ta3ViZWNvbmZpZz0vZXRjL2t1YmVybmV0ZXMvYWRtaW4uY29uZiBnZXQgbm9kZXMKa3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgZ2V0IHBvZHMgLUEKCmVjaG8gIldhaXRpbmcgZm9yIGFsbCBwb2RzIHRvIGJlIFJ1bm5pbmcuLi4uIgpzbGVlcCAxMApNQVNURVJOT0RFPSQoaG9zdG5hbWUpCmZvciBLOE5PREUgaW4gJChrdWJlY3RsIC0ta3ViZWNvbmZpZz0vZXRjL2t1YmVybmV0ZXMvYWRtaW4uY29uZiBnZXQgcG9kcyAtQSAtbyBjdXN0b20tY29sdW1ucz1OQU1FOi5zcGVjLm5vZGVOYW1lLFNUQVRVUzouc3RhdHVzLmNvbnRhaW5lclN0YXR1c2VzWypdLnJlYWR5IHwgZ3JlcCBmYWxzZSB8IGF3ayAne3ByaW50ICQxfScgfCBncmVwIC12ICIkTUFTVEVSTk9ERSIgfCBzb3J0IHwgdW5pcSB8IHRyICdcbicgJyAnKQpkbwogIGVjaG8gIlJlYm9vdGluZyBub2RlICRLOE5PREUgLi4uIiAmJiBzc2ggcm9vdEAkSzhOT0RFICJzbGVlcCAyOyByZWJvb3QiICYKICBzbGVlcCA0CmRvbmUKCgpNQVNURVJTVEFUPSQoa3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgZ2V0IHBvZHMgLUEgLS1uby1oZWFkZXJzIC1vIHdpZGUgfCBhd2sgJ3twcmludCAkMiIsIiQ0IiwiJChORi0yKX0nIHwgZ3JlcCAtdiAiUnVubmluZyIgfCBncmVwICIkTUFTVEVSTk9ERSIgfCB0YWlsIC0xIHwgY3V0IC1mMyAtZCwpCltbIC1mICRFTlZGSUxFIF1dICYmIHJtIC1mICRFTlZGSUxFCmlmIFsgIiRNQVNURVJTVEFUIiAhPSAiIiBdCnRoZW4KICAgZWNobyAiUmVib290aW5nICRNQVNURVJTVEFUIG5vZGUsIHRvIGZpeCBpc3N1ZXMuLi4iCiAgIHJlYm9vdApmaQo=" | base64 -d > $SCRIPT2RUN
}
